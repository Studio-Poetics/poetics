(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Rv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $f={exports:{}},Wr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function IE(){if(S_)return Wr;S_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:i,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Wr.Fragment=e,Wr.jsx=t,Wr.jsxs=t,Wr}var E_;function kE(){return E_||(E_=1,$f.exports=IE()),$f.exports}var j=kE(),jf={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function UE(){if(C_)return Ee;C_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function E(w){return w===null||typeof w!="object"?null:(w=T&&w[T]||w["@@iterator"],typeof w=="function"?w:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,M={};function x(w,Y,te){this.props=w,this.context=Y,this.refs=M,this.updater=te||C}x.prototype.isReactComponent={},x.prototype.setState=function(w,Y){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,Y,"setState")},x.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function q(){}q.prototype=x.prototype;function k(w,Y,te){this.props=w,this.context=Y,this.refs=M,this.updater=te||C}var F=k.prototype=new q;F.constructor=k,N(F,x.prototype),F.isPureReactComponent=!0;var R=Array.isArray;function O(){}var I={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function B(w,Y,te){var re=te.ref;return{$$typeof:i,type:w,key:Y,ref:re!==void 0?re:null,props:te}}function W(w,Y){return B(w.type,Y,w.props)}function Z(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function H(w){var Y={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(te){return Y[te]})}var ne=/\/+/g;function ie(w,Y){return typeof w=="object"&&w!==null&&w.key!=null?H(""+w.key):Y.toString(36)}function fe(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(O,O):(w.status="pending",w.then(function(Y){w.status==="pending"&&(w.status="fulfilled",w.value=Y)},function(Y){w.status==="pending"&&(w.status="rejected",w.reason=Y)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function U(w,Y,te,re,oe){var he=typeof w;(he==="undefined"||he==="boolean")&&(w=null);var Se=!1;if(w===null)Se=!0;else switch(he){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(w.$$typeof){case i:case e:Se=!0;break;case _:return Se=w._init,U(Se(w._payload),Y,te,re,oe)}}if(Se)return oe=oe(w),Se=re===""?"."+ie(w,0):re,R(oe)?(te="",Se!=null&&(te=Se.replace(ne,"$&/")+"/"),U(oe,Y,te,"",function(on){return on})):oe!=null&&(Z(oe)&&(oe=W(oe,te+(oe.key==null||w&&w.key===oe.key?"":(""+oe.key).replace(ne,"$&/")+"/")+Se)),Y.push(oe)),1;Se=0;var ce=re===""?".":re+":";if(R(w))for(var Le=0;Le<w.length;Le++)re=w[Le],he=ce+ie(re,Le),Se+=U(re,Y,te,he,oe);else if(Le=E(w),typeof Le=="function")for(w=Le.call(w),Le=0;!(re=w.next()).done;)re=re.value,he=ce+ie(re,Le++),Se+=U(re,Y,te,he,oe);else if(he==="object"){if(typeof w.then=="function")return U(fe(w),Y,te,re,oe);throw Y=String(w),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Se}function X(w,Y,te){if(w==null)return w;var re=[],oe=0;return U(w,re,"","",function(he){return Y.call(te,he,oe++)}),re}function ee(w){if(w._status===-1){var Y=w._result;Y=Y(),Y.then(function(te){(w._status===0||w._status===-1)&&(w._status=1,w._result=te)},function(te){(w._status===0||w._status===-1)&&(w._status=2,w._result=te)}),w._status===-1&&(w._status=0,w._result=Y)}if(w._status===1)return w._result.default;throw w._result}var se=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},ue={map:X,forEach:function(w,Y,te){X(w,function(){Y.apply(this,arguments)},te)},count:function(w){var Y=0;return X(w,function(){Y++}),Y},toArray:function(w){return X(w,function(Y){return Y})||[]},only:function(w){if(!Z(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Ee.Activity=v,Ee.Children=ue,Ee.Component=x,Ee.Fragment=t,Ee.Profiler=a,Ee.PureComponent=k,Ee.StrictMode=s,Ee.Suspense=m,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(w){return I.H.useMemoCache(w)}},Ee.cache=function(w){return function(){return w.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(w,Y,te){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var re=N({},w.props),oe=w.key;if(Y!=null)for(he in Y.key!==void 0&&(oe=""+Y.key),Y)!V.call(Y,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&Y.ref===void 0||(re[he]=Y[he]);var he=arguments.length-2;if(he===1)re.children=te;else if(1<he){for(var Se=Array(he),ce=0;ce<he;ce++)Se[ce]=arguments[ce+2];re.children=Se}return B(w.type,oe,re)},Ee.createContext=function(w){return w={$$typeof:c,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:l,_context:w},w},Ee.createElement=function(w,Y,te){var re,oe={},he=null;if(Y!=null)for(re in Y.key!==void 0&&(he=""+Y.key),Y)V.call(Y,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(oe[re]=Y[re]);var Se=arguments.length-2;if(Se===1)oe.children=te;else if(1<Se){for(var ce=Array(Se),Le=0;Le<Se;Le++)ce[Le]=arguments[Le+2];oe.children=ce}if(w&&w.defaultProps)for(re in Se=w.defaultProps,Se)oe[re]===void 0&&(oe[re]=Se[re]);return B(w,he,oe)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(w){return{$$typeof:d,render:w}},Ee.isValidElement=Z,Ee.lazy=function(w){return{$$typeof:_,_payload:{_status:-1,_result:w},_init:ee}},Ee.memo=function(w,Y){return{$$typeof:h,type:w,compare:Y===void 0?null:Y}},Ee.startTransition=function(w){var Y=I.T,te={};I.T=te;try{var re=w(),oe=I.S;oe!==null&&oe(te,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(O,se)}catch(he){se(he)}finally{Y!==null&&te.types!==null&&(Y.types=te.types),I.T=Y}},Ee.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ee.use=function(w){return I.H.use(w)},Ee.useActionState=function(w,Y,te){return I.H.useActionState(w,Y,te)},Ee.useCallback=function(w,Y){return I.H.useCallback(w,Y)},Ee.useContext=function(w){return I.H.useContext(w)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(w,Y){return I.H.useDeferredValue(w,Y)},Ee.useEffect=function(w,Y){return I.H.useEffect(w,Y)},Ee.useEffectEvent=function(w){return I.H.useEffectEvent(w)},Ee.useId=function(){return I.H.useId()},Ee.useImperativeHandle=function(w,Y,te){return I.H.useImperativeHandle(w,Y,te)},Ee.useInsertionEffect=function(w,Y){return I.H.useInsertionEffect(w,Y)},Ee.useLayoutEffect=function(w,Y){return I.H.useLayoutEffect(w,Y)},Ee.useMemo=function(w,Y){return I.H.useMemo(w,Y)},Ee.useOptimistic=function(w,Y){return I.H.useOptimistic(w,Y)},Ee.useReducer=function(w,Y,te){return I.H.useReducer(w,Y,te)},Ee.useRef=function(w){return I.H.useRef(w)},Ee.useState=function(w){return I.H.useState(w)},Ee.useSyncExternalStore=function(w,Y,te){return I.H.useSyncExternalStore(w,Y,te)},Ee.useTransition=function(){return I.H.useTransition()},Ee.version="19.2.0",Ee}var A_;function Nd(){return A_||(A_=1,jf.exports=UE()),jf.exports}var Pt=Nd();const OE=Rv(Pt);var ed={exports:{}},Qr={},td={exports:{}},nd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function VE(){return N_||(N_=1,(function(i){function e(U,X){var ee=U.length;U.push(X);e:for(;0<ee;){var se=ee-1>>>1,ue=U[se];if(0<a(ue,X))U[se]=X,U[ee]=ue,ee=se;else break e}}function t(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var X=U[0],ee=U.pop();if(ee!==X){U[0]=ee;e:for(var se=0,ue=U.length,w=ue>>>1;se<w;){var Y=2*(se+1)-1,te=U[Y],re=Y+1,oe=U[re];if(0>a(te,ee))re<ue&&0>a(oe,te)?(U[se]=oe,U[re]=ee,se=re):(U[se]=te,U[Y]=ee,se=Y);else if(re<ue&&0>a(oe,ee))U[se]=oe,U[re]=ee,se=re;else break e}}return X}function a(U,X){var ee=U.sortIndex-X.sortIndex;return ee!==0?ee:U.id-X.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],h=[],_=1,v=null,T=3,E=!1,C=!1,N=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function F(U){for(var X=t(h);X!==null;){if(X.callback===null)s(h);else if(X.startTime<=U)s(h),X.sortIndex=X.expirationTime,e(m,X);else break;X=t(h)}}function R(U){if(N=!1,F(U),!C)if(t(m)!==null)C=!0,O||(O=!0,H());else{var X=t(h);X!==null&&fe(R,X.startTime-U)}}var O=!1,I=-1,V=5,B=-1;function W(){return M?!0:!(i.unstable_now()-B<V)}function Z(){if(M=!1,O){var U=i.unstable_now();B=U;var X=!0;try{e:{C=!1,N&&(N=!1,q(I),I=-1),E=!0;var ee=T;try{t:{for(F(U),v=t(m);v!==null&&!(v.expirationTime>U&&W());){var se=v.callback;if(typeof se=="function"){v.callback=null,T=v.priorityLevel;var ue=se(v.expirationTime<=U);if(U=i.unstable_now(),typeof ue=="function"){v.callback=ue,F(U),X=!0;break t}v===t(m)&&s(m),F(U)}else s(m);v=t(m)}if(v!==null)X=!0;else{var w=t(h);w!==null&&fe(R,w.startTime-U),X=!1}}break e}finally{v=null,T=ee,E=!1}X=void 0}}finally{X?H():O=!1}}}var H;if(typeof k=="function")H=function(){k(Z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=Z,H=function(){ie.postMessage(null)}}else H=function(){x(Z,0)};function fe(U,X){I=x(function(){U(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(U){switch(T){case 1:case 2:case 3:var X=3;break;default:X=T}var ee=T;T=X;try{return U()}finally{T=ee}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=T;T=U;try{return X()}finally{T=ee}},i.unstable_scheduleCallback=function(U,X,ee){var se=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?se+ee:se):ee=se,U){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ee+ue,U={id:_++,callback:X,priorityLevel:U,startTime:ee,expirationTime:ue,sortIndex:-1},ee>se?(U.sortIndex=ee,e(h,U),t(m)===null&&U===t(h)&&(N?(q(I),I=-1):N=!0,fe(R,ee-se))):(U.sortIndex=ue,e(m,U),C||E||(C=!0,O||(O=!0,H()))),U},i.unstable_shouldYield=W,i.unstable_wrapCallback=function(U){var X=T;return function(){var ee=T;T=X;try{return U.apply(this,arguments)}finally{T=ee}}}})(nd)),nd}var M_;function qE(){return M_||(M_=1,td.exports=VE()),td.exports}var id={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function PE(){if(x_)return qt;x_=1;var i=Nd();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,h,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:h,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,qt.createPortal=function(m,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(m,h,null,_)},qt.flushSync=function(m){var h=c.T,_=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=h,s.p=_,s.d.f()}},qt.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(m,h))},qt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},qt.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var _=h.as,v=d(_,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?s.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:E}):_==="script"&&s.d.X(m,{crossOrigin:v,integrity:T,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qt.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);s.d.M(m,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(m)},qt.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,v=d(_,h.crossOrigin);s.d.L(m,_,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qt.preloadModule=function(m,h){if(typeof m=="string")if(h){var _=d(h.as,h.crossOrigin);s.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(m)},qt.requestFormReset=function(m){s.d.r(m)},qt.unstable_batchedUpdates=function(m,h){return m(h)},qt.useFormState=function(m,h,_){return c.H.useFormState(m,h,_)},qt.useFormStatus=function(){return c.H.useHostTransitionStatus()},qt.version="19.2.0",qt}var w_;function LE(){if(w_)return id.exports;w_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),id.exports=PE(),id.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function GE(){if(R_)return Qr;R_=1;var i=qE(),e=Nd(),t=LE();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,r=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(r=o.return),n=o.return;while(n)}return o.tag===3?r:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function d(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(s(188))}function h(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var r=n,u=o;;){var g=r.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){r=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===r)return m(g),n;if(y===u)return m(g),o;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=g,u=y;else{for(var S=!1,A=g.child;A;){if(A===r){S=!0,r=g,u=y;break}if(A===u){S=!0,u=g,r=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===r){S=!0,r=y,u=g;break}if(A===u){S=!0,u=y,r=g;break}A=A.sibling}if(!S)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:o}function _(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=_(n),o!==null)return o;n=n.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),k=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function H(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var ne=Symbol.for("react.client.reference");function ie(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ne?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case x:return"Profiler";case M:return"StrictMode";case R:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case k:return n.displayName||"Context";case q:return(n._context.displayName||"Context")+".Consumer";case F:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return o=n.displayName||null,o!==null?o:ie(n.type)||"Memo";case V:o=n._payload,n=n._init;try{return ie(n(o))}catch{}}return null}var fe=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},se=[],ue=-1;function w(n){return{current:n}}function Y(n){0>ue||(n.current=se[ue],se[ue]=null,ue--)}function te(n,o){ue++,se[ue]=n.current,n.current=o}var re=w(null),oe=w(null),he=w(null),Se=w(null);function ce(n,o){switch(te(he,o),te(oe,n),te(re,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?Hg(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=Hg(o),n=Yg(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(re),te(re,n)}function Le(){Y(re),Y(oe),Y(he)}function on(n){n.memoizedState!==null&&te(Se,n);var o=re.current,r=Yg(o,n.type);o!==r&&(te(oe,n),te(re,r))}function Dn(n){oe.current===n&&(Y(re),Y(oe)),Se.current===n&&(Y(Se),Hr._currentValue=ee)}var Yn,Ta;function si(n){if(Yn===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Yn=o&&o[1]||"",Ta=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yn+n+Ta}var le=!1;function ye(n,o){if(!n||le)return"";le=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(J){var z=J}Reflect.construct(n,[],$)}else{try{$.call()}catch(J){z=J}n.call($.prototype)}}else{try{throw Error()}catch(J){z=J}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(J){if(J&&z&&typeof J.stack=="string")return[J.stack,z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var b=S.split(`
`),G=A.split(`
`);for(g=u=0;u<b.length&&!b[u].includes("DetermineComponentFrameRoot");)u++;for(;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;if(u===b.length||g===G.length)for(u=b.length-1,g=G.length-1;1<=u&&0<=g&&b[u]!==G[g];)g--;for(;1<=u&&0<=g;u--,g--)if(b[u]!==G[g]){if(u!==1||g!==1)do if(u--,g--,0>g||b[u]!==G[g]){var Q=`
`+b[u].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=u&&0<=g);break}}}finally{le=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?si(r):""}function ut(n,o){switch(n.tag){case 26:case 27:case 5:return si(n.type);case 16:return si("Lazy");case 13:return n.child!==o&&o!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return ye(n.type,!1);case 11:return ye(n.type.render,!1);case 1:return ye(n.type,!0);case 31:return si("Activity");default:return""}}function Ze(n){try{var o="",r=null;do o+=ut(n,r),r=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var be=Object.prototype.hasOwnProperty,Ke=i.unstable_scheduleCallback,Vt=i.unstable_cancelCallback,Jn=i.unstable_shouldYield,gs=i.unstable_requestPaint,Rt=i.unstable_now,Pu=i.unstable_getCurrentPriorityLevel,Sa=i.unstable_ImmediatePriority,Ch=i.unstable_UserBlockingPriority,Ea=i.unstable_NormalPriority,h0=i.unstable_LowPriority,Ah=i.unstable_IdlePriority,p0=i.log,m0=i.unstable_setDisableYieldValue,nr=null,rn=null;function Ui(n){if(typeof p0=="function"&&m0(n),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(nr,n)}catch{}}var an=Math.clz32?Math.clz32:y0,g0=Math.log,_0=Math.LN2;function y0(n){return n>>>=0,n===0?32:31-(g0(n)/_0|0)|0}var Ca=256,Aa=262144,Na=4194304;function _s(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ma(n,o,r){var u=n.pendingLanes;if(u===0)return 0;var g=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~y,u!==0?g=_s(u):(S&=A,S!==0?g=_s(S):r||(r=A&~n,r!==0&&(g=_s(r))))):(A=u&~y,A!==0?g=_s(A):S!==0?g=_s(S):r||(r=u&~n,r!==0&&(g=_s(r)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,r=o&-o,y>=r||y===32&&(r&4194048)!==0)?o:g}function ir(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function v0(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nh(){var n=Na;return Na<<=1,(Na&62914560)===0&&(Na=4194304),n}function Lu(n){for(var o=[],r=0;31>r;r++)o.push(n);return o}function sr(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function T0(n,o,r,u,g,y){var S=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var A=n.entanglements,b=n.expirationTimes,G=n.hiddenUpdates;for(r=S&~r;0<r;){var Q=31-an(r),$=1<<Q;A[Q]=0,b[Q]=-1;var z=G[Q];if(z!==null)for(G[Q]=null,Q=0;Q<z.length;Q++){var J=z[Q];J!==null&&(J.lane&=-536870913)}r&=~$}u!==0&&Mh(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~o))}function Mh(n,o,r){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-an(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function xh(n,o){var r=n.entangledLanes|=o;for(n=n.entanglements;r;){var u=31-an(r),g=1<<u;g&o|n[u]&o&&(n[u]|=o),r&=~g}}function wh(n,o){var r=o&-o;return r=(r&42)!==0?1:Gu(r),(r&(n.suspendedLanes|o))!==0?0:r}function Gu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Rh(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:p_(n.type))}function bh(n,o){var r=X.p;try{return X.p=n,o()}finally{X.p=r}}var Oi=Math.random().toString(36).slice(2),bt="__reactFiber$"+Oi,Jt="__reactProps$"+Oi,Js="__reactContainer$"+Oi,zu="__reactEvents$"+Oi,S0="__reactListeners$"+Oi,E0="__reactHandles$"+Oi,Dh="__reactResources$"+Oi,or="__reactMarker$"+Oi;function Bu(n){delete n[bt],delete n[Jt],delete n[zu],delete n[S0],delete n[E0]}function Xs(n){var o=n[bt];if(o)return o;for(var r=n.parentNode;r;){if(o=r[Js]||r[bt]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(n=$g(n);n!==null;){if(r=n[bt])return r;n=$g(n)}return o}n=r,r=n.parentNode}return null}function Ws(n){if(n=n[bt]||n[Js]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function rr(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function Qs(n){var o=n[Dh];return o||(o=n[Dh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Nt(n){n[or]=!0}var Ih=new Set,kh={};function ys(n,o){Zs(n,o),Zs(n+"Capture",o)}function Zs(n,o){for(kh[n]=o,n=0;n<o.length;n++)Ih.add(o[n])}var C0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uh={},Oh={};function A0(n){return be.call(Oh,n)?!0:be.call(Uh,n)?!1:C0.test(n)?Oh[n]=!0:(Uh[n]=!0,!1)}function xa(n,o,r){if(A0(o))if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+r)}}function wa(n,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+r)}}function oi(n,o,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(o,r,""+u)}}function vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Vh(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function N0(n,o,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){r=""+S,y.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Hu(n){if(!n._valueTracker){var o=Vh(n)?"checked":"value";n._valueTracker=N0(n,o,""+n[o])}}function qh(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return n&&(u=Vh(n)?n.checked?"true":"false":n.value),n=u,n!==r?(o.setValue(n),!0):!1}function Ra(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var M0=/[\n"\\]/g;function Tn(n){return n.replace(M0,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Yu(n,o,r,u,g,y,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),o!=null?S==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+vn(o)):n.value!==""+vn(o)&&(n.value=""+vn(o)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),o!=null?Ju(n,S,vn(o)):r!=null?Ju(n,S,vn(r)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+vn(A):n.removeAttribute("name")}function Ph(n,o,r,u,g,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){Hu(n);return}r=r!=null?""+vn(r):"",o=o!=null?""+vn(o):r,A||o===n.value||(n.value=o),n.defaultValue=o}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),Hu(n)}function Ju(n,o,r){o==="number"&&Ra(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Ks(n,o,r,u){if(n=n.options,o){o={};for(var g=0;g<r.length;g++)o["$"+r[g]]=!0;for(r=0;r<n.length;r++)g=o.hasOwnProperty("$"+n[r].value),n[r].selected!==g&&(n[r].selected=g),g&&u&&(n[r].defaultSelected=!0)}else{for(r=""+vn(r),o=null,g=0;g<n.length;g++){if(n[g].value===r){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Lh(n,o,r){if(o!=null&&(o=""+vn(o),o!==n.value&&(n.value=o),r==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=r!=null?""+vn(r):""}function Gh(n,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if(fe(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=vn(o),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),Hu(n)}function $s(n,o){if(o){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=o;return}}n.textContent=o}var x0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fh(n,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,r):typeof r!="number"||r===0||x0.has(o)?o==="float"?n.cssFloat=r:n[o]=(""+r).trim():n[o]=r+"px"}function zh(n,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in o)u=o[g],o.hasOwnProperty(g)&&r[g]!==u&&Fh(n,g,u)}else for(var y in o)o.hasOwnProperty(y)&&Fh(n,y,o[y])}function Xu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),R0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(n){return R0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ri(){}var Wu=null;function Qu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var js=null,eo=null;function Bh(n){var o=Ws(n);if(o&&(n=o.stateNode)){var r=n[Jt]||null;e:switch(n=o.stateNode,o.type){case"input":if(Yu(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Tn(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==n&&u.form===n.form){var g=u[Jt]||null;if(!g)throw Error(s(90));Yu(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===n.form&&qh(u)}break e;case"textarea":Lh(n,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&Ks(n,!!r.multiple,o,!1)}}}var Zu=!1;function Hh(n,o,r){if(Zu)return n(o,r);Zu=!0;try{var u=n(o);return u}finally{if(Zu=!1,(js!==null||eo!==null)&&(_l(),js&&(o=js,n=eo,eo=js=null,Bh(o),n)))for(o=0;o<n.length;o++)Bh(n[o])}}function ar(n,o){var r=n.stateNode;if(r===null)return null;var u=r[Jt]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ku=!1;if(ai)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Ku=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Ku=!1}var Vi=null,$u=null,Da=null;function Yh(){if(Da)return Da;var n,o=$u,r=o.length,u,g="value"in Vi?Vi.value:Vi.textContent,y=g.length;for(n=0;n<r&&o[n]===g[n];n++);var S=r-n;for(u=1;u<=S&&o[r-u]===g[y-u];u++);return Da=g.slice(n,1<u?1-u:void 0)}function Ia(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function ka(){return!0}function Jh(){return!1}function Xt(n){function o(r,u,g,y,S){this._reactName=r,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(r=n[A],this[A]=r?r(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ka:Jh,this.isPropagationStopped=Jh,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),o}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Xt(vs),ur=v({},vs,{view:0,detail:0}),b0=Xt(ur),ju,ec,cr,Oa=v({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cr&&(cr&&n.type==="mousemove"?(ju=n.screenX-cr.screenX,ec=n.screenY-cr.screenY):ec=ju=0,cr=n),ju)},movementY:function(n){return"movementY"in n?n.movementY:ec}}),Xh=Xt(Oa),D0=v({},Oa,{dataTransfer:0}),I0=Xt(D0),k0=v({},ur,{relatedTarget:0}),tc=Xt(k0),U0=v({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),O0=Xt(U0),V0=v({},vs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),q0=Xt(V0),P0=v({},vs,{data:0}),Wh=Xt(P0),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=F0[n])?!!o[n]:!1}function nc(){return z0}var B0=v({},ur,{key:function(n){if(n.key){var o=L0[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Ia(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?G0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(n){return n.type==="keypress"?Ia(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ia(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),H0=Xt(B0),Y0=v({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qh=Xt(Y0),J0=v({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),X0=Xt(J0),W0=v({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=Xt(W0),Z0=v({},Oa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),K0=Xt(Z0),$0=v({},vs,{newState:0,oldState:0}),j0=Xt($0),eS=[9,13,27,32],ic=ai&&"CompositionEvent"in window,fr=null;ai&&"documentMode"in document&&(fr=document.documentMode);var tS=ai&&"TextEvent"in window&&!fr,Zh=ai&&(!ic||fr&&8<fr&&11>=fr),Kh=" ",$h=!1;function jh(n,o){switch(n){case"keyup":return eS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var to=!1;function nS(n,o){switch(n){case"compositionend":return ep(o);case"keypress":return o.which!==32?null:($h=!0,Kh);case"textInput":return n=o.data,n===Kh&&$h?null:n;default:return null}}function iS(n,o){if(to)return n==="compositionend"||!ic&&jh(n,o)?(n=Yh(),Da=$u=Vi=null,to=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Zh&&o.locale!=="ko"?null:o.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!sS[n.type]:o==="textarea"}function np(n,o,r,u){js?eo?eo.push(u):eo=[u]:js=u,o=Al(o,"onChange"),0<o.length&&(r=new Ua("onChange","change",null,r,u),n.push({event:r,listeners:o}))}var dr=null,hr=null;function oS(n){Pg(n,0)}function Va(n){var o=rr(n);if(qh(o))return n}function ip(n,o){if(n==="change")return o}var sp=!1;if(ai){var sc;if(ai){var oc="oninput"in document;if(!oc){var op=document.createElement("div");op.setAttribute("oninput","return;"),oc=typeof op.oninput=="function"}sc=oc}else sc=!1;sp=sc&&(!document.documentMode||9<document.documentMode)}function rp(){dr&&(dr.detachEvent("onpropertychange",ap),hr=dr=null)}function ap(n){if(n.propertyName==="value"&&Va(hr)){var o=[];np(o,hr,n,Qu(n)),Hh(oS,o)}}function rS(n,o,r){n==="focusin"?(rp(),dr=o,hr=r,dr.attachEvent("onpropertychange",ap)):n==="focusout"&&rp()}function aS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Va(hr)}function lS(n,o){if(n==="click")return Va(o)}function uS(n,o){if(n==="input"||n==="change")return Va(o)}function cS(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var ln=typeof Object.is=="function"?Object.is:cS;function pr(n,o){if(ln(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var r=Object.keys(n),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var g=r[u];if(!be.call(o,g)||!ln(n[g],o[g]))return!1}return!0}function lp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function up(n,o){var r=lp(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=o&&u>=o)return{node:r,offset:o-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lp(r)}}function cp(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?cp(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function fp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Ra(n.document);o instanceof n.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)n=o.contentWindow;else break;o=Ra(n.document)}return o}function rc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var fS=ai&&"documentMode"in document&&11>=document.documentMode,no=null,ac=null,mr=null,lc=!1;function dp(n,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lc||no==null||no!==Ra(u)||(u=no,"selectionStart"in u&&rc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mr&&pr(mr,u)||(mr=u,u=Al(ac,"onSelect"),0<u.length&&(o=new Ua("onSelect","select",null,o,r),n.push({event:o,listeners:u}),o.target=no)))}function Ts(n,o){var r={};return r[n.toLowerCase()]=o.toLowerCase(),r["Webkit"+n]="webkit"+o,r["Moz"+n]="moz"+o,r}var io={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},uc={},hp={};ai&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Ss(n){if(uc[n])return uc[n];if(!io[n])return n;var o=io[n],r;for(r in o)if(o.hasOwnProperty(r)&&r in hp)return uc[n]=o[r];return n}var pp=Ss("animationend"),mp=Ss("animationiteration"),gp=Ss("animationstart"),dS=Ss("transitionrun"),hS=Ss("transitionstart"),pS=Ss("transitioncancel"),_p=Ss("transitionend"),yp=new Map,cc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cc.push("scrollEnd");function In(n,o){yp.set(n,o),ys(o,[n])}var qa=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sn=[],so=0,fc=0;function Pa(){for(var n=so,o=fc=so=0;o<n;){var r=Sn[o];Sn[o++]=null;var u=Sn[o];Sn[o++]=null;var g=Sn[o];Sn[o++]=null;var y=Sn[o];if(Sn[o++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}y!==0&&vp(r,g,y)}}function La(n,o,r,u){Sn[so++]=n,Sn[so++]=o,Sn[so++]=r,Sn[so++]=u,fc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function dc(n,o,r,u){return La(n,o,r,u),Ga(n)}function Es(n,o){return La(n,null,null,o),Ga(n)}function vp(n,o,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var g=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&o!==null&&(g=31-an(r),n=y.hiddenUpdates,u=n[g],u===null?n[g]=[o]:u.push(o),o.lane=r|536870912),y):null}function Ga(n){if(50<qr)throw qr=0,Ef=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var oo={};function mS(n,o,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(n,o,r,u){return new mS(n,o,r,u)}function hc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function li(n,o){var r=n.alternate;return r===null?(r=un(n.tag,o,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=o,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,o=n.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Tp(n,o){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,o=r.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Fa(n,o,r,u,g,y){var S=0;if(u=n,typeof n=="function")hc(n)&&(S=1);else if(typeof n=="string")S=TE(n,r,re.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=un(31,r,o,g),n.elementType=B,n.lanes=y,n;case N:return Cs(r.children,g,y,o);case M:S=8,g|=24;break;case x:return n=un(12,r,o,g|2),n.elementType=x,n.lanes=y,n;case R:return n=un(13,r,o,g),n.elementType=R,n.lanes=y,n;case O:return n=un(19,r,o,g),n.elementType=O,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:S=10;break e;case q:S=9;break e;case F:S=11;break e;case I:S=14;break e;case V:S=16,u=null;break e}S=29,r=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=un(S,r,o,g),o.elementType=n,o.type=u,o.lanes=y,o}function Cs(n,o,r,u){return n=un(7,n,u,o),n.lanes=r,n}function pc(n,o,r){return n=un(6,n,null,o),n.lanes=r,n}function Sp(n){var o=un(18,null,null,0);return o.stateNode=n,o}function mc(n,o,r){return o=un(4,n.children!==null?n.children:[],n.key,o),o.lanes=r,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var Ep=new WeakMap;function En(n,o){if(typeof n=="object"&&n!==null){var r=Ep.get(n);return r!==void 0?r:(o={value:n,source:o,stack:Ze(o)},Ep.set(n,o),o)}return{value:n,source:o,stack:Ze(o)}}var ro=[],ao=0,za=null,gr=0,Cn=[],An=0,qi=null,Xn=1,Wn="";function ui(n,o){ro[ao++]=gr,ro[ao++]=za,za=n,gr=o}function Cp(n,o,r){Cn[An++]=Xn,Cn[An++]=Wn,Cn[An++]=qi,qi=n;var u=Xn;n=Wn;var g=32-an(u)-1;u&=~(1<<g),r+=1;var y=32-an(o)+g;if(30<y){var S=g-g%5;y=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Xn=1<<32-an(o)+g|r<<g|u,Wn=y+n}else Xn=1<<y|r<<g|u,Wn=n}function gc(n){n.return!==null&&(ui(n,1),Cp(n,1,0))}function _c(n){for(;n===za;)za=ro[--ao],ro[ao]=null,gr=ro[--ao],ro[ao]=null;for(;n===qi;)qi=Cn[--An],Cn[An]=null,Wn=Cn[--An],Cn[An]=null,Xn=Cn[--An],Cn[An]=null}function Ap(n,o){Cn[An++]=Xn,Cn[An++]=Wn,Cn[An++]=qi,Xn=o.id,Wn=o.overflow,qi=n}var Dt=null,je=null,De=!1,Pi=null,Nn=!1,yc=Error(s(519));function Li(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(En(o,n)),yc}function Np(n){var o=n.stateNode,r=n.type,u=n.memoizedProps;switch(o[bt]=n,o[Jt]=u,r){case"dialog":xe("cancel",o),xe("close",o);break;case"iframe":case"object":case"embed":xe("load",o);break;case"video":case"audio":for(r=0;r<Lr.length;r++)xe(Lr[r],o);break;case"source":xe("error",o);break;case"img":case"image":case"link":xe("error",o),xe("load",o);break;case"details":xe("toggle",o);break;case"input":xe("invalid",o),Ph(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",o);break;case"textarea":xe("invalid",o),Gh(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||zg(o.textContent,r)?(u.popover!=null&&(xe("beforetoggle",o),xe("toggle",o)),u.onScroll!=null&&xe("scroll",o),u.onScrollEnd!=null&&xe("scrollend",o),u.onClick!=null&&(o.onclick=ri),o=!0):o=!1,o||Li(n,!0)}function Mp(n){for(Dt=n.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Dt=Dt.return}}function lo(n){if(n!==Dt)return!1;if(!De)return Mp(n),De=!0,!1;var o=n.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||qf(n.type,n.memoizedProps)),r=!r),r&&je&&Li(n),Mp(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));je=Kg(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));je=Kg(n)}else o===27?(o=je,ji(n.type)?(n=zf,zf=null,je=n):je=o):je=Dt?xn(n.stateNode.nextSibling):null;return!0}function As(){je=Dt=null,De=!1}function vc(){var n=Pi;return n!==null&&(Kt===null?Kt=n:Kt.push.apply(Kt,n),Pi=null),n}function _r(n){Pi===null?Pi=[n]:Pi.push(n)}var Tc=w(null),Ns=null,ci=null;function Gi(n,o,r){te(Tc,o._currentValue),o._currentValue=r}function fi(n){n._currentValue=Tc.current,Y(Tc)}function Sc(n,o,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===r)break;n=n.return}}function Ec(n,o,r,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var S=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var b=0;b<o.length;b++)if(A.context===o[b]){y.lanes|=r,A=y.alternate,A!==null&&(A.lanes|=r),Sc(y.return,r,n),u||(S=null);break e}y=A.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=r,y=S.alternate,y!==null&&(y.lanes|=r),Sc(S,r,n),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===n){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function uo(n,o,r,u){n=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var A=g.type;ln(g.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(g===Se.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Hr):n=[Hr])}g=g.return}n!==null&&Ec(o,n,r,u),o.flags|=262144}function Ba(n){for(n=n.firstContext;n!==null;){if(!ln(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ms(n){Ns=n,ci=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function It(n){return xp(Ns,n)}function Ha(n,o){return Ns===null&&Ms(n),xp(n,o)}function xp(n,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},ci===null){if(n===null)throw Error(s(308));ci=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else ci=ci.next=o;return r}var gS=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(r){return r()})}},_S=i.unstable_scheduleCallback,yS=i.unstable_NormalPriority,pt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cc(){return{controller:new gS,data:new Map,refCount:0}}function yr(n){n.refCount--,n.refCount===0&&_S(yS,function(){n.controller.abort()})}var vr=null,Ac=0,co=0,fo=null;function vS(n,o){if(vr===null){var r=vr=[];Ac=0,co=wf(),fo={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Ac++,o.then(wp,wp),o}function wp(){if(--Ac===0&&vr!==null){fo!==null&&(fo.status="fulfilled");var n=vr;vr=null,co=0,fo=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function TS(n,o){var r=[],u={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var g=0;g<r.length;g++)(0,r[g])(o)},function(g){for(u.status="rejected",u.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),u}var Rp=U.S;U.S=function(n,o){dg=Rt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&vS(n,o),Rp!==null&&Rp(n,o)};var xs=w(null);function Nc(){var n=xs.current;return n!==null?n:We.pooledCache}function Ya(n,o){o===null?te(xs,xs.current):te(xs,o.pool)}function bp(){var n=Nc();return n===null?null:{parent:pt._currentValue,pool:n}}var ho=Error(s(460)),Mc=Error(s(474)),Ja=Error(s(542)),Xa={then:function(){}};function Dp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ip(n,o,r){switch(r=n[r],r===void 0?n.push(o):r!==o&&(o.then(ri,ri),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Up(n),n;default:if(typeof o.status=="string")o.then(ri,ri);else{if(n=We,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=u}},function(u){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Up(n),n}throw Rs=o,ho}}function ws(n){try{var o=n._init;return o(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Rs=r,ho):r}}var Rs=null;function kp(){if(Rs===null)throw Error(s(459));var n=Rs;return Rs=null,n}function Up(n){if(n===ho||n===Ja)throw Error(s(483))}var po=null,Tr=0;function Wa(n){var o=Tr;return Tr+=1,po===null&&(po=[]),Ip(po,n,o)}function Sr(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Qa(n,o){throw o.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Op(n){function o(P,D){if(n){var L=P.deletions;L===null?(P.deletions=[D],P.flags|=16):L.push(D)}}function r(P,D){if(!n)return null;for(;D!==null;)o(P,D),D=D.sibling;return null}function u(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function g(P,D){return P=li(P,D),P.index=0,P.sibling=null,P}function y(P,D,L){return P.index=L,n?(L=P.alternate,L!==null?(L=L.index,L<D?(P.flags|=67108866,D):L):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function S(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function A(P,D,L,K){return D===null||D.tag!==6?(D=pc(L,P.mode,K),D.return=P,D):(D=g(D,L),D.return=P,D)}function b(P,D,L,K){var _e=L.type;return _e===N?Q(P,D,L.props.children,K,L.key):D!==null&&(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===V&&ws(_e)===D.type)?(D=g(D,L.props),Sr(D,L),D.return=P,D):(D=Fa(L.type,L.key,L.props,null,P.mode,K),Sr(D,L),D.return=P,D)}function G(P,D,L,K){return D===null||D.tag!==4||D.stateNode.containerInfo!==L.containerInfo||D.stateNode.implementation!==L.implementation?(D=mc(L,P.mode,K),D.return=P,D):(D=g(D,L.children||[]),D.return=P,D)}function Q(P,D,L,K,_e){return D===null||D.tag!==7?(D=Cs(L,P.mode,K,_e),D.return=P,D):(D=g(D,L),D.return=P,D)}function $(P,D,L){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=pc(""+D,P.mode,L),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case E:return L=Fa(D.type,D.key,D.props,null,P.mode,L),Sr(L,D),L.return=P,L;case C:return D=mc(D,P.mode,L),D.return=P,D;case V:return D=ws(D),$(P,D,L)}if(fe(D)||H(D))return D=Cs(D,P.mode,L,null),D.return=P,D;if(typeof D.then=="function")return $(P,Wa(D),L);if(D.$$typeof===k)return $(P,Ha(P,D),L);Qa(P,D)}return null}function z(P,D,L,K){var _e=D!==null?D.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return _e!==null?null:A(P,D,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case E:return L.key===_e?b(P,D,L,K):null;case C:return L.key===_e?G(P,D,L,K):null;case V:return L=ws(L),z(P,D,L,K)}if(fe(L)||H(L))return _e!==null?null:Q(P,D,L,K,null);if(typeof L.then=="function")return z(P,D,Wa(L),K);if(L.$$typeof===k)return z(P,D,Ha(P,L),K);Qa(P,L)}return null}function J(P,D,L,K,_e){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return P=P.get(L)||null,A(D,P,""+K,_e);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return P=P.get(K.key===null?L:K.key)||null,b(D,P,K,_e);case C:return P=P.get(K.key===null?L:K.key)||null,G(D,P,K,_e);case V:return K=ws(K),J(P,D,L,K,_e)}if(fe(K)||H(K))return P=P.get(L)||null,Q(D,P,K,_e,null);if(typeof K.then=="function")return J(P,D,L,Wa(K),_e);if(K.$$typeof===k)return J(P,D,L,Ha(D,K),_e);Qa(D,K)}return null}function de(P,D,L,K){for(var _e=null,Ie=null,me=D,Ae=D=0,Re=null;me!==null&&Ae<L.length;Ae++){me.index>Ae?(Re=me,me=null):Re=me.sibling;var ke=z(P,me,L[Ae],K);if(ke===null){me===null&&(me=Re);break}n&&me&&ke.alternate===null&&o(P,me),D=y(ke,D,Ae),Ie===null?_e=ke:Ie.sibling=ke,Ie=ke,me=Re}if(Ae===L.length)return r(P,me),De&&ui(P,Ae),_e;if(me===null){for(;Ae<L.length;Ae++)me=$(P,L[Ae],K),me!==null&&(D=y(me,D,Ae),Ie===null?_e=me:Ie.sibling=me,Ie=me);return De&&ui(P,Ae),_e}for(me=u(me);Ae<L.length;Ae++)Re=J(me,P,Ae,L[Ae],K),Re!==null&&(n&&Re.alternate!==null&&me.delete(Re.key===null?Ae:Re.key),D=y(Re,D,Ae),Ie===null?_e=Re:Ie.sibling=Re,Ie=Re);return n&&me.forEach(function(ss){return o(P,ss)}),De&&ui(P,Ae),_e}function ve(P,D,L,K){if(L==null)throw Error(s(151));for(var _e=null,Ie=null,me=D,Ae=D=0,Re=null,ke=L.next();me!==null&&!ke.done;Ae++,ke=L.next()){me.index>Ae?(Re=me,me=null):Re=me.sibling;var ss=z(P,me,ke.value,K);if(ss===null){me===null&&(me=Re);break}n&&me&&ss.alternate===null&&o(P,me),D=y(ss,D,Ae),Ie===null?_e=ss:Ie.sibling=ss,Ie=ss,me=Re}if(ke.done)return r(P,me),De&&ui(P,Ae),_e;if(me===null){for(;!ke.done;Ae++,ke=L.next())ke=$(P,ke.value,K),ke!==null&&(D=y(ke,D,Ae),Ie===null?_e=ke:Ie.sibling=ke,Ie=ke);return De&&ui(P,Ae),_e}for(me=u(me);!ke.done;Ae++,ke=L.next())ke=J(me,P,Ae,ke.value,K),ke!==null&&(n&&ke.alternate!==null&&me.delete(ke.key===null?Ae:ke.key),D=y(ke,D,Ae),Ie===null?_e=ke:Ie.sibling=ke,Ie=ke);return n&&me.forEach(function(DE){return o(P,DE)}),De&&ui(P,Ae),_e}function Ye(P,D,L,K){if(typeof L=="object"&&L!==null&&L.type===N&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case E:e:{for(var _e=L.key;D!==null;){if(D.key===_e){if(_e=L.type,_e===N){if(D.tag===7){r(P,D.sibling),K=g(D,L.props.children),K.return=P,P=K;break e}}else if(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===V&&ws(_e)===D.type){r(P,D.sibling),K=g(D,L.props),Sr(K,L),K.return=P,P=K;break e}r(P,D);break}else o(P,D);D=D.sibling}L.type===N?(K=Cs(L.props.children,P.mode,K,L.key),K.return=P,P=K):(K=Fa(L.type,L.key,L.props,null,P.mode,K),Sr(K,L),K.return=P,P=K)}return S(P);case C:e:{for(_e=L.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===L.containerInfo&&D.stateNode.implementation===L.implementation){r(P,D.sibling),K=g(D,L.children||[]),K.return=P,P=K;break e}else{r(P,D);break}else o(P,D);D=D.sibling}K=mc(L,P.mode,K),K.return=P,P=K}return S(P);case V:return L=ws(L),Ye(P,D,L,K)}if(fe(L))return de(P,D,L,K);if(H(L)){if(_e=H(L),typeof _e!="function")throw Error(s(150));return L=_e.call(L),ve(P,D,L,K)}if(typeof L.then=="function")return Ye(P,D,Wa(L),K);if(L.$$typeof===k)return Ye(P,D,Ha(P,L),K);Qa(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,D!==null&&D.tag===6?(r(P,D.sibling),K=g(D,L),K.return=P,P=K):(r(P,D),K=pc(L,P.mode,K),K.return=P,P=K),S(P)):r(P,D)}return function(P,D,L,K){try{Tr=0;var _e=Ye(P,D,L,K);return po=null,_e}catch(me){if(me===ho||me===Ja)throw me;var Ie=un(29,me,null,P.mode);return Ie.lanes=K,Ie.return=P,Ie}finally{}}}var bs=Op(!0),Vp=Op(!1),Fi=!1;function xc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wc(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Bi(n,o,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ve&2)!==0){var g=u.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),u.pending=o,o=Ga(n),vp(n,null,r),o}return La(n,u,o,r),Ga(n)}function Er(n,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,xh(n,r)}}function Rc(n,o){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var g=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?g=y=S:y=y.next=S,r=r.next}while(r!==null);y===null?g=y=o:y=y.next=o}else g=y=o;r={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=o:n.next=o,r.lastBaseUpdate=o}var bc=!1;function Cr(){if(bc){var n=fo;if(n!==null)throw n}}function Ar(n,o,r,u){bc=!1;var g=n.updateQueue;Fi=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var b=A,G=b.next;b.next=null,S===null?y=G:S.next=G,S=b;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==S&&(A===null?Q.firstBaseUpdate=G:A.next=G,Q.lastBaseUpdate=b))}if(y!==null){var $=g.baseState;S=0,Q=G=b=null,A=y;do{var z=A.lane&-536870913,J=z!==A.lane;if(J?(we&z)===z:(u&z)===z){z!==0&&z===co&&(bc=!0),Q!==null&&(Q=Q.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var de=n,ve=A;z=o;var Ye=r;switch(ve.tag){case 1:if(de=ve.payload,typeof de=="function"){$=de.call(Ye,$,z);break e}$=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ve.payload,z=typeof de=="function"?de.call(Ye,$,z):de,z==null)break e;$=v({},$,z);break e;case 2:Fi=!0}}z=A.callback,z!==null&&(n.flags|=64,J&&(n.flags|=8192),J=g.callbacks,J===null?g.callbacks=[z]:J.push(z))}else J={lane:z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(G=Q=J,b=$):Q=Q.next=J,S|=z;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;J=A,A=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);Q===null&&(b=$),g.baseState=b,g.firstBaseUpdate=G,g.lastBaseUpdate=Q,y===null&&(g.shared.lanes=0),Wi|=S,n.lanes=S,n.memoizedState=$}}function qp(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function Pp(n,o){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)qp(r[n],o)}var mo=w(null),Za=w(0);function Lp(n,o){n=Ti,te(Za,n),te(mo,o),Ti=n|o.baseLanes}function Dc(){te(Za,Ti),te(mo,mo.current)}function Ic(){Ti=Za.current,Y(mo),Y(Za)}var cn=w(null),Mn=null;function Hi(n){var o=n.alternate;te(ct,ct.current&1),te(cn,n),Mn===null&&(o===null||mo.current!==null||o.memoizedState!==null)&&(Mn=n)}function kc(n){te(ct,ct.current),te(cn,n),Mn===null&&(Mn=n)}function Gp(n){n.tag===22?(te(ct,ct.current),te(cn,n),Mn===null&&(Mn=n)):Yi()}function Yi(){te(ct,ct.current),te(cn,cn.current)}function fn(n){Y(cn),Mn===n&&(Mn=null),Y(ct)}var ct=w(0);function Ka(n){for(var o=n;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Gf(r)||Ff(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var di=0,Ce=null,Be=null,mt=null,$a=!1,go=!1,Ds=!1,ja=0,Nr=0,_o=null,SS=0;function ot(){throw Error(s(321))}function Uc(n,o){if(o===null)return!1;for(var r=0;r<o.length&&r<n.length;r++)if(!ln(n[r],o[r]))return!1;return!0}function Oc(n,o,r,u,g,y){return di=y,Ce=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=n===null||n.memoizedState===null?Cm:Zc,Ds=!1,y=r(u,g),Ds=!1,go&&(y=zp(o,r,u,g)),Fp(n),y}function Fp(n){U.H=wr;var o=Be!==null&&Be.next!==null;if(di=0,mt=Be=Ce=null,$a=!1,Nr=0,_o=null,o)throw Error(s(300));n===null||gt||(n=n.dependencies,n!==null&&Ba(n)&&(gt=!0))}function zp(n,o,r,u){Ce=n;var g=0;do{if(go&&(_o=null),Nr=0,go=!1,25<=g)throw Error(s(301));if(g+=1,mt=Be=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=Am,y=o(r,u)}while(go);return y}function ES(){var n=U.H,o=n.useState()[0];return o=typeof o.then=="function"?Mr(o):o,n=n.useState()[0],(Be!==null?Be.memoizedState:null)!==n&&(Ce.flags|=1024),o}function Vc(){var n=ja!==0;return ja=0,n}function qc(n,o,r){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~r}function Pc(n){if($a){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}$a=!1}di=0,mt=Be=Ce=null,go=!1,Nr=ja=0,_o=null}function zt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ce.memoizedState=mt=n:mt=mt.next=n,mt}function ft(){if(Be===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=Be.next;var o=mt===null?Ce.memoizedState:mt.next;if(o!==null)mt=o,Be=n;else{if(n===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Be=n,n={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},mt===null?Ce.memoizedState=mt=n:mt=mt.next=n}return mt}function el(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mr(n){var o=Nr;return Nr+=1,_o===null&&(_o=[]),n=Ip(_o,n,o),o=Ce,(mt===null?o.memoizedState:mt.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?Cm:Zc),n}function tl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Mr(n);if(n.$$typeof===k)return It(n)}throw Error(s(438,String(n)))}function Lc(n){var o=null,r=Ce.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=el(),Ce.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(n),u=0;u<n;u++)r[u]=W;return o.index++,r}function hi(n,o){return typeof o=="function"?o(n):o}function nl(n){var o=ft();return Gc(o,Be,n)}function Gc(n,o,r){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}o.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{o=g.next;var A=S=null,b=null,G=o,Q=!1;do{var $=G.lane&-536870913;if($!==G.lane?(we&$)===$:(di&$)===$){var z=G.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),$===co&&(Q=!0);else if((di&z)===z){G=G.next,z===co&&(Q=!0);continue}else $={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},b===null?(A=b=$,S=y):b=b.next=$,Ce.lanes|=z,Wi|=z;$=G.action,Ds&&r(y,$),y=G.hasEagerState?G.eagerState:r(y,$)}else z={lane:$,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},b===null?(A=b=z,S=y):b=b.next=z,Ce.lanes|=$,Wi|=$;G=G.next}while(G!==null&&G!==o);if(b===null?S=y:b.next=A,!ln(y,n.memoizedState)&&(gt=!0,Q&&(r=fo,r!==null)))throw r;n.memoizedState=y,n.baseState=S,n.baseQueue=b,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Fc(n){var o=ft(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var u=r.dispatch,g=r.pending,y=o.memoizedState;if(g!==null){r.pending=null;var S=g=g.next;do y=n(y,S.action),S=S.next;while(S!==g);ln(y,o.memoizedState)||(gt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),r.lastRenderedState=y}return[y,u]}function Bp(n,o,r){var u=Ce,g=ft(),y=De;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=o();var S=!ln((Be||g).memoizedState,r);if(S&&(g.memoizedState=r,gt=!0),g=g.queue,Hc(Jp.bind(null,u,g,n),[n]),g.getSnapshot!==o||S||mt!==null&&mt.memoizedState.tag&1){if(u.flags|=2048,yo(9,{destroy:void 0},Yp.bind(null,u,g,r,o),null),We===null)throw Error(s(349));y||(di&127)!==0||Hp(u,o,r)}return r}function Hp(n,o,r){n.flags|=16384,n={getSnapshot:o,value:r},o=Ce.updateQueue,o===null?(o=el(),Ce.updateQueue=o,o.stores=[n]):(r=o.stores,r===null?o.stores=[n]:r.push(n))}function Yp(n,o,r,u){o.value=r,o.getSnapshot=u,Xp(o)&&Wp(n)}function Jp(n,o,r){return r(function(){Xp(o)&&Wp(n)})}function Xp(n){var o=n.getSnapshot;n=n.value;try{var r=o();return!ln(n,r)}catch{return!0}}function Wp(n){var o=Es(n,2);o!==null&&$t(o,n,2)}function zc(n){var o=zt();if(typeof n=="function"){var r=n;if(n=r(),Ds){Ui(!0);try{r()}finally{Ui(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},o}function Qp(n,o,r,u){return n.baseState=r,Gc(n,Be,typeof u=="function"?u:hi)}function CS(n,o,r,u,g){if(ol(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};U.T!==null?r(!0):y.isTransition=!1,u(y),r=o.pending,r===null?(y.next=o.pending=y,Zp(o,y)):(y.next=r.next,o.pending=r.next=y)}}function Zp(n,o){var r=o.action,u=o.payload,g=n.state;if(o.isTransition){var y=U.T,S={};U.T=S;try{var A=r(g,u),b=U.S;b!==null&&b(S,A),Kp(n,o,A)}catch(G){Bc(n,o,G)}finally{y!==null&&S.types!==null&&(y.types=S.types),U.T=y}}else try{y=r(g,u),Kp(n,o,y)}catch(G){Bc(n,o,G)}}function Kp(n,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){$p(n,o,u)},function(u){return Bc(n,o,u)}):$p(n,o,r)}function $p(n,o,r){o.status="fulfilled",o.value=r,jp(o),n.state=r,o=n.pending,o!==null&&(r=o.next,r===o?n.pending=null:(r=r.next,o.next=r,Zp(n,r)))}function Bc(n,o,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,jp(o),o=o.next;while(o!==u)}n.action=null}function jp(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function em(n,o){return o}function tm(n,o){if(De){var r=We.formState;if(r!==null){e:{var u=Ce;if(De){if(je){t:{for(var g=je,y=Nn;g.nodeType!==8;){if(!y){g=null;break t}if(g=xn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){je=xn(g.nextSibling),u=g.data==="F!";break e}}Li(u)}u=!1}u&&(o=r[0])}}return r=zt(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:o},r.queue=u,r=Tm.bind(null,Ce,u),u.dispatch=r,u=zc(!1),y=Qc.bind(null,Ce,!1,u.queue),u=zt(),g={state:o,dispatch:null,action:n,pending:null},u.queue=g,r=CS.bind(null,Ce,g,y,r),g.dispatch=r,u.memoizedState=n,[o,r,!1]}function nm(n){var o=ft();return im(o,Be,n)}function im(n,o,r){if(o=Gc(n,o,em)[0],n=nl(hi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Mr(o)}catch(S){throw S===ho?Ja:S}else u=o;o=ft();var g=o.queue,y=g.dispatch;return r!==o.memoizedState&&(Ce.flags|=2048,yo(9,{destroy:void 0},AS.bind(null,g,r),null)),[u,y,n]}function AS(n,o){n.action=o}function sm(n){var o=ft(),r=Be;if(r!==null)return im(o,r,n);ft(),o=o.memoizedState,r=ft();var u=r.queue.dispatch;return r.memoizedState=n,[o,u,!1]}function yo(n,o,r,u){return n={tag:n,create:r,deps:u,inst:o,next:null},o=Ce.updateQueue,o===null&&(o=el(),Ce.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,o.lastEffect=n),n}function om(){return ft().memoizedState}function il(n,o,r,u){var g=zt();Ce.flags|=n,g.memoizedState=yo(1|o,{destroy:void 0},r,u===void 0?null:u)}function sl(n,o,r,u){var g=ft();u=u===void 0?null:u;var y=g.memoizedState.inst;Be!==null&&u!==null&&Uc(u,Be.memoizedState.deps)?g.memoizedState=yo(o,y,r,u):(Ce.flags|=n,g.memoizedState=yo(1|o,y,r,u))}function rm(n,o){il(8390656,8,n,o)}function Hc(n,o){sl(2048,8,n,o)}function NS(n){Ce.flags|=4;var o=Ce.updateQueue;if(o===null)o=el(),Ce.updateQueue=o,o.events=[n];else{var r=o.events;r===null?o.events=[n]:r.push(n)}}function am(n){var o=ft().memoizedState;return NS({ref:o,nextImpl:n}),function(){if((Ve&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function lm(n,o){return sl(4,2,n,o)}function um(n,o){return sl(4,4,n,o)}function cm(n,o){if(typeof o=="function"){n=n();var r=o(n);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function fm(n,o,r){r=r!=null?r.concat([n]):null,sl(4,4,cm.bind(null,o,n),r)}function Yc(){}function dm(n,o){var r=ft();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Uc(o,u[1])?u[0]:(r.memoizedState=[n,o],n)}function hm(n,o){var r=ft();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Uc(o,u[1]))return u[0];if(u=n(),Ds){Ui(!0);try{n()}finally{Ui(!1)}}return r.memoizedState=[u,o],u}function Jc(n,o,r){return r===void 0||(di&1073741824)!==0&&(we&261930)===0?n.memoizedState=o:(n.memoizedState=r,n=pg(),Ce.lanes|=n,Wi|=n,r)}function pm(n,o,r,u){return ln(r,o)?r:mo.current!==null?(n=Jc(n,r,u),ln(n,o)||(gt=!0),n):(di&42)===0||(di&1073741824)!==0&&(we&261930)===0?(gt=!0,n.memoizedState=r):(n=pg(),Ce.lanes|=n,Wi|=n,o)}function mm(n,o,r,u,g){var y=X.p;X.p=y!==0&&8>y?y:8;var S=U.T,A={};U.T=A,Qc(n,!1,o,r);try{var b=g(),G=U.S;if(G!==null&&G(A,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var Q=TS(b,u);xr(n,o,Q,pn(n))}else xr(n,o,u,pn(n))}catch($){xr(n,o,{then:function(){},status:"rejected",reason:$},pn())}finally{X.p=y,S!==null&&A.types!==null&&(S.types=A.types),U.T=S}}function MS(){}function Xc(n,o,r,u){if(n.tag!==5)throw Error(s(476));var g=gm(n).queue;mm(n,g,o,ee,r===null?MS:function(){return _m(n),r(u)})}function gm(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:ee},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:r},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function _m(n){var o=gm(n);o.next===null&&(o=n.alternate.memoizedState),xr(n,o.next.queue,{},pn())}function Wc(){return It(Hr)}function ym(){return ft().memoizedState}function vm(){return ft().memoizedState}function xS(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var r=pn();n=zi(r);var u=Bi(o,n,r);u!==null&&($t(u,o,r),Er(u,o,r)),o={cache:Cc()},n.payload=o;return}o=o.return}}function wS(n,o,r){var u=pn();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ol(n)?Sm(o,r):(r=dc(n,o,r,u),r!==null&&($t(r,n,u),Em(r,o,u)))}function Tm(n,o,r){var u=pn();xr(n,o,r,u)}function xr(n,o,r,u){var g={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ol(n))Sm(o,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,A=y(S,r);if(g.hasEagerState=!0,g.eagerState=A,ln(A,S))return La(n,o,g,0),We===null&&Pa(),!1}catch{}finally{}if(r=dc(n,o,g,u),r!==null)return $t(r,n,u),Em(r,o,u),!0}return!1}function Qc(n,o,r,u){if(u={lane:2,revertLane:wf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ol(n)){if(o)throw Error(s(479))}else o=dc(n,r,u,2),o!==null&&$t(o,n,2)}function ol(n){var o=n.alternate;return n===Ce||o!==null&&o===Ce}function Sm(n,o){go=$a=!0;var r=n.pending;r===null?o.next=o:(o.next=r.next,r.next=o),n.pending=o}function Em(n,o,r){if((r&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,xh(n,r)}}var wr={readContext:It,use:tl,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};wr.useEffectEvent=ot;var Cm={readContext:It,use:tl,useCallback:function(n,o){return zt().memoizedState=[n,o===void 0?null:o],n},useContext:It,useEffect:rm,useImperativeHandle:function(n,o,r){r=r!=null?r.concat([n]):null,il(4194308,4,cm.bind(null,o,n),r)},useLayoutEffect:function(n,o){return il(4194308,4,n,o)},useInsertionEffect:function(n,o){il(4,2,n,o)},useMemo:function(n,o){var r=zt();o=o===void 0?null:o;var u=n();if(Ds){Ui(!0);try{n()}finally{Ui(!1)}}return r.memoizedState=[u,o],u},useReducer:function(n,o,r){var u=zt();if(r!==void 0){var g=r(o);if(Ds){Ui(!0);try{r(o)}finally{Ui(!1)}}}else g=o;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=wS.bind(null,Ce,n),[u.memoizedState,n]},useRef:function(n){var o=zt();return n={current:n},o.memoizedState=n},useState:function(n){n=zc(n);var o=n.queue,r=Tm.bind(null,Ce,o);return o.dispatch=r,[n.memoizedState,r]},useDebugValue:Yc,useDeferredValue:function(n,o){var r=zt();return Jc(r,n,o)},useTransition:function(){var n=zc(!1);return n=mm.bind(null,Ce,n.queue,!0,!1),zt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,r){var u=Ce,g=zt();if(De){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),We===null)throw Error(s(349));(we&127)!==0||Hp(u,o,r)}g.memoizedState=r;var y={value:r,getSnapshot:o};return g.queue=y,rm(Jp.bind(null,u,y,n),[n]),u.flags|=2048,yo(9,{destroy:void 0},Yp.bind(null,u,y,r,o),null),r},useId:function(){var n=zt(),o=We.identifierPrefix;if(De){var r=Wn,u=Xn;r=(u&~(1<<32-an(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=ja++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=SS++,o="_"+o+"r_"+r.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:Wc,useFormState:tm,useActionState:tm,useOptimistic:function(n){var o=zt();o.memoizedState=o.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=Qc.bind(null,Ce,!0,r),r.dispatch=o,[n,o]},useMemoCache:Lc,useCacheRefresh:function(){return zt().memoizedState=xS.bind(null,Ce)},useEffectEvent:function(n){var o=zt(),r={impl:n};return o.memoizedState=r,function(){if((Ve&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Zc={readContext:It,use:tl,useCallback:dm,useContext:It,useEffect:Hc,useImperativeHandle:fm,useInsertionEffect:lm,useLayoutEffect:um,useMemo:hm,useReducer:nl,useRef:om,useState:function(){return nl(hi)},useDebugValue:Yc,useDeferredValue:function(n,o){var r=ft();return pm(r,Be.memoizedState,n,o)},useTransition:function(){var n=nl(hi)[0],o=ft().memoizedState;return[typeof n=="boolean"?n:Mr(n),o]},useSyncExternalStore:Bp,useId:ym,useHostTransitionStatus:Wc,useFormState:nm,useActionState:nm,useOptimistic:function(n,o){var r=ft();return Qp(r,Be,n,o)},useMemoCache:Lc,useCacheRefresh:vm};Zc.useEffectEvent=am;var Am={readContext:It,use:tl,useCallback:dm,useContext:It,useEffect:Hc,useImperativeHandle:fm,useInsertionEffect:lm,useLayoutEffect:um,useMemo:hm,useReducer:Fc,useRef:om,useState:function(){return Fc(hi)},useDebugValue:Yc,useDeferredValue:function(n,o){var r=ft();return Be===null?Jc(r,n,o):pm(r,Be.memoizedState,n,o)},useTransition:function(){var n=Fc(hi)[0],o=ft().memoizedState;return[typeof n=="boolean"?n:Mr(n),o]},useSyncExternalStore:Bp,useId:ym,useHostTransitionStatus:Wc,useFormState:sm,useActionState:sm,useOptimistic:function(n,o){var r=ft();return Be!==null?Qp(r,Be,n,o):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:vm};Am.useEffectEvent=am;function Kc(n,o,r,u){o=n.memoizedState,r=r(u,o),r=r==null?o:v({},o,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var $c={enqueueSetState:function(n,o,r){n=n._reactInternals;var u=pn(),g=zi(u);g.payload=o,r!=null&&(g.callback=r),o=Bi(n,g,u),o!==null&&($t(o,n,u),Er(o,n,u))},enqueueReplaceState:function(n,o,r){n=n._reactInternals;var u=pn(),g=zi(u);g.tag=1,g.payload=o,r!=null&&(g.callback=r),o=Bi(n,g,u),o!==null&&($t(o,n,u),Er(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var r=pn(),u=zi(r);u.tag=2,o!=null&&(u.callback=o),o=Bi(n,u,r),o!==null&&($t(o,n,r),Er(o,n,r))}};function Nm(n,o,r,u,g,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,S):o.prototype&&o.prototype.isPureReactComponent?!pr(r,u)||!pr(g,y):!0}function Mm(n,o,r,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==n&&$c.enqueueReplaceState(o,o.state,null)}function Is(n,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(n=n.defaultProps){r===o&&(r=v({},r));for(var g in n)r[g]===void 0&&(r[g]=n[g])}return r}function xm(n){qa(n)}function wm(n){console.error(n)}function Rm(n){qa(n)}function rl(n,o){try{var r=n.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function bm(n,o,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function jc(n,o,r){return r=zi(r),r.tag=3,r.payload={element:null},r.callback=function(){rl(n,o)},r}function Dm(n){return n=zi(n),n.tag=3,n}function Im(n,o,r,u){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){bm(o,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){bm(o,r,u),typeof g!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function RS(n,o,r,u,g){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&uo(o,r,g,!0),r=cn.current,r!==null){switch(r.tag){case 31:case 13:return Mn===null?yl():r.alternate===null&&rt===0&&(rt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,u===Xa?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),Nf(n,u,g)),!1;case 22:return r.flags|=65536,u===Xa?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),Nf(n,u,g)),!1}throw Error(s(435,r.tag))}return Nf(n,u,g),yl(),!1}if(De)return o=cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,u!==yc&&(n=Error(s(422),{cause:u}),_r(En(n,r)))):(u!==yc&&(o=Error(s(423),{cause:u}),_r(En(o,r))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=En(u,r),g=jc(n.stateNode,u,g),Rc(n,g),rt!==4&&(rt=2)),!1;var y=Error(s(520),{cause:u});if(y=En(y,r),Vr===null?Vr=[y]:Vr.push(y),rt!==4&&(rt=2),o===null)return!0;u=En(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,n=g&-g,r.lanes|=n,n=jc(r.stateNode,u,n),Rc(r,n),!1;case 1:if(o=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Qi===null||!Qi.has(y))))return r.flags|=65536,g&=-g,r.lanes|=g,g=Dm(g),Im(g,n,r,u),Rc(r,g),!1}r=r.return}while(r!==null);return!1}var ef=Error(s(461)),gt=!1;function kt(n,o,r,u){o.child=n===null?Vp(o,null,r,u):bs(o,n.child,r,u)}function km(n,o,r,u,g){r=r.render;var y=o.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return Ms(o),u=Oc(n,o,r,S,y,g),A=Vc(),n!==null&&!gt?(qc(n,o,g),pi(n,o,g)):(De&&A&&gc(o),o.flags|=1,kt(n,o,u,g),o.child)}function Um(n,o,r,u,g){if(n===null){var y=r.type;return typeof y=="function"&&!hc(y)&&y.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=y,Om(n,o,y,u,g)):(n=Fa(r.type,null,u,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!uf(n,g)){var S=y.memoizedProps;if(r=r.compare,r=r!==null?r:pr,r(S,u)&&n.ref===o.ref)return pi(n,o,g)}return o.flags|=1,n=li(y,u),n.ref=o.ref,n.return=o,o.child=n}function Om(n,o,r,u,g){if(n!==null){var y=n.memoizedProps;if(pr(y,u)&&n.ref===o.ref)if(gt=!1,o.pendingProps=u=y,uf(n,g))(n.flags&131072)!==0&&(gt=!0);else return o.lanes=n.lanes,pi(n,o,g)}return tf(n,o,r,u,g)}function Vm(n,o,r,u){var g=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=o.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,o.child=null;return qm(n,o,y,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ya(o,y!==null?y.cachePool:null),y!==null?Lp(o,y):Dc(),Gp(o);else return u=o.lanes=536870912,qm(n,o,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Ya(o,y.cachePool),Lp(o,y),Yi(),o.memoizedState=null):(n!==null&&Ya(o,null),Dc(),Yi());return kt(n,o,g,r),o.child}function Rr(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function qm(n,o,r,u,g){var y=Nc();return y=y===null?null:{parent:pt._currentValue,pool:y},o.memoizedState={baseLanes:r,cachePool:y},n!==null&&Ya(o,null),Dc(),Gp(o),n!==null&&uo(n,o,u,!0),o.childLanes=g,null}function al(n,o){return o=ul({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function Pm(n,o,r){return bs(o,n.child,null,r),n=al(o,o.pendingProps),n.flags|=2,fn(o),o.memoizedState=null,n}function bS(n,o,r){var u=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(De){if(u.mode==="hidden")return n=al(o,u),o.lanes=536870912,Rr(null,n);if(kc(o),(n=je)?(n=Zg(n,Nn),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:qi!==null?{id:Xn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},r=Sp(n),r.return=o,o.child=r,Dt=o,je=null)):n=null,n===null)throw Li(o);return o.lanes=536870912,null}return al(o,u)}var y=n.memoizedState;if(y!==null){var S=y.dehydrated;if(kc(o),g)if(o.flags&256)o.flags&=-257,o=Pm(n,o,r);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(gt||uo(n,o,r,!1),g=(r&n.childLanes)!==0,gt||g){if(u=We,u!==null&&(S=wh(u,r),S!==0&&S!==y.retryLane))throw y.retryLane=S,Es(n,S),$t(u,n,S),ef;yl(),o=Pm(n,o,r)}else n=y.treeContext,je=xn(S.nextSibling),Dt=o,De=!0,Pi=null,Nn=!1,n!==null&&Ap(o,n),o=al(o,u),o.flags|=4096;return o}return n=li(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function ll(n,o){var r=o.ref;if(r===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(o.flags|=4194816)}}function tf(n,o,r,u,g){return Ms(o),r=Oc(n,o,r,u,void 0,g),u=Vc(),n!==null&&!gt?(qc(n,o,g),pi(n,o,g)):(De&&u&&gc(o),o.flags|=1,kt(n,o,r,g),o.child)}function Lm(n,o,r,u,g,y){return Ms(o),o.updateQueue=null,r=zp(o,u,r,g),Fp(n),u=Vc(),n!==null&&!gt?(qc(n,o,y),pi(n,o,y)):(De&&u&&gc(o),o.flags|=1,kt(n,o,r,y),o.child)}function Gm(n,o,r,u,g){if(Ms(o),o.stateNode===null){var y=oo,S=r.contextType;typeof S=="object"&&S!==null&&(y=It(S)),y=new r(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=$c,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},xc(o),S=r.contextType,y.context=typeof S=="object"&&S!==null?It(S):oo,y.state=o.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Kc(o,r,S,u),y.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&$c.enqueueReplaceState(y,y.state,null),Ar(o,u,y,g),Cr(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var A=o.memoizedProps,b=Is(r,A);y.props=b;var G=y.context,Q=r.contextType;S=oo,typeof Q=="object"&&Q!==null&&(S=It(Q));var $=r.getDerivedStateFromProps;Q=typeof $=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||G!==S)&&Mm(o,y,u,S),Fi=!1;var z=o.memoizedState;y.state=z,Ar(o,u,y,g),Cr(),G=o.memoizedState,A||z!==G||Fi?(typeof $=="function"&&(Kc(o,r,$,u),G=o.memoizedState),(b=Fi||Nm(o,r,b,u,z,G,S))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=G),y.props=u,y.state=G,y.context=S,u=b):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,wc(n,o),S=o.memoizedProps,Q=Is(r,S),y.props=Q,$=o.pendingProps,z=y.context,G=r.contextType,b=oo,typeof G=="object"&&G!==null&&(b=It(G)),A=r.getDerivedStateFromProps,(G=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==$||z!==b)&&Mm(o,y,u,b),Fi=!1,z=o.memoizedState,y.state=z,Ar(o,u,y,g),Cr();var J=o.memoizedState;S!==$||z!==J||Fi||n!==null&&n.dependencies!==null&&Ba(n.dependencies)?(typeof A=="function"&&(Kc(o,r,A,u),J=o.memoizedState),(Q=Fi||Nm(o,r,Q,u,z,J,b)||n!==null&&n.dependencies!==null&&Ba(n.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,J,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,J,b)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&z===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&z===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=J),y.props=u,y.state=J,y.context=b,u=Q):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&z===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&z===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,ll(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=bs(o,n.child,null,g),o.child=bs(o,null,r,g)):kt(n,o,r,g),o.memoizedState=y.state,n=o.child):n=pi(n,o,g),n}function Fm(n,o,r,u){return As(),o.flags|=256,kt(n,o,r,u),o.child}var nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sf(n){return{baseLanes:n,cachePool:bp()}}function of(n,o,r){return n=n!==null?n.childLanes&~r:0,o&&(n|=hn),n}function zm(n,o,r){var u=o.pendingProps,g=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(ct.current&2)!==0),S&&(g=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,n===null){if(De){if(g?Hi(o):Yi(),(n=je)?(n=Zg(n,Nn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:qi!==null?{id:Xn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},r=Sp(n),r.return=o,o.child=r,Dt=o,je=null)):n=null,n===null)throw Li(o);return Ff(n)?o.lanes=32:o.lanes=536870912,null}var A=u.children;return u=u.fallback,g?(Yi(),g=o.mode,A=ul({mode:"hidden",children:A},g),u=Cs(u,g,r,null),A.return=o,u.return=o,A.sibling=u,o.child=A,u=o.child,u.memoizedState=sf(r),u.childLanes=of(n,S,r),o.memoizedState=nf,Rr(null,u)):(Hi(o),rf(o,A))}var b=n.memoizedState;if(b!==null&&(A=b.dehydrated,A!==null)){if(y)o.flags&256?(Hi(o),o.flags&=-257,o=af(n,o,r)):o.memoizedState!==null?(Yi(),o.child=n.child,o.flags|=128,o=null):(Yi(),A=u.fallback,g=o.mode,u=ul({mode:"visible",children:u.children},g),A=Cs(A,g,r,null),A.flags|=2,u.return=o,A.return=o,u.sibling=A,o.child=u,bs(o,n.child,null,r),u=o.child,u.memoizedState=sf(r),u.childLanes=of(n,S,r),o.memoizedState=nf,o=Rr(null,u));else if(Hi(o),Ff(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var G=S.dgst;S=G,u=Error(s(419)),u.stack="",u.digest=S,_r({value:u,source:null,stack:null}),o=af(n,o,r)}else if(gt||uo(n,o,r,!1),S=(r&n.childLanes)!==0,gt||S){if(S=We,S!==null&&(u=wh(S,r),u!==0&&u!==b.retryLane))throw b.retryLane=u,Es(n,u),$t(S,n,u),ef;Gf(A)||yl(),o=af(n,o,r)}else Gf(A)?(o.flags|=192,o.child=n.child,o=null):(n=b.treeContext,je=xn(A.nextSibling),Dt=o,De=!0,Pi=null,Nn=!1,n!==null&&Ap(o,n),o=rf(o,u.children),o.flags|=4096);return o}return g?(Yi(),A=u.fallback,g=o.mode,b=n.child,G=b.sibling,u=li(b,{mode:"hidden",children:u.children}),u.subtreeFlags=b.subtreeFlags&65011712,G!==null?A=li(G,A):(A=Cs(A,g,r,null),A.flags|=2),A.return=o,u.return=o,u.sibling=A,o.child=u,Rr(null,u),u=o.child,A=n.child.memoizedState,A===null?A=sf(r):(g=A.cachePool,g!==null?(b=pt._currentValue,g=g.parent!==b?{parent:b,pool:b}:g):g=bp(),A={baseLanes:A.baseLanes|r,cachePool:g}),u.memoizedState=A,u.childLanes=of(n,S,r),o.memoizedState=nf,Rr(n.child,u)):(Hi(o),r=n.child,n=r.sibling,r=li(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,n!==null&&(S=o.deletions,S===null?(o.deletions=[n],o.flags|=16):S.push(n)),o.child=r,o.memoizedState=null,r)}function rf(n,o){return o=ul({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function ul(n,o){return n=un(22,n,null,o),n.lanes=0,n}function af(n,o,r){return bs(o,n.child,null,r),n=rf(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Bm(n,o,r){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),Sc(n.return,o,r)}function lf(n,o,r,u,g,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:g,treeForkCount:y}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=g,S.treeForkCount=y)}function Hm(n,o,r){var u=o.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var S=ct.current,A=(S&2)!==0;if(A?(S=S&1|2,o.flags|=128):S&=1,te(ct,S),kt(n,o,u,r),u=De?gr:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Bm(n,r,o);else if(n.tag===19)Bm(n,r,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(r=o.child,g=null;r!==null;)n=r.alternate,n!==null&&Ka(n)===null&&(g=r),r=r.sibling;r=g,r===null?(g=o.child,o.child=null):(g=r.sibling,r.sibling=null),lf(o,!1,g,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Ka(n)===null){o.child=g;break}n=g.sibling,g.sibling=r,r=g,g=n}lf(o,!0,r,null,y,u);break;case"together":lf(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function pi(n,o,r){if(n!==null&&(o.dependencies=n.dependencies),Wi|=o.lanes,(r&o.childLanes)===0)if(n!==null){if(uo(n,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,r=li(n,n.pendingProps),o.child=r,r.return=o;n.sibling!==null;)n=n.sibling,r=r.sibling=li(n,n.pendingProps),r.return=o;r.sibling=null}return o.child}function uf(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&Ba(n)))}function DS(n,o,r){switch(o.tag){case 3:ce(o,o.stateNode.containerInfo),Gi(o,pt,n.memoizedState.cache),As();break;case 27:case 5:on(o);break;case 4:ce(o,o.stateNode.containerInfo);break;case 10:Gi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,kc(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Hi(o),o.flags|=128,null):(r&o.child.childLanes)!==0?zm(n,o,r):(Hi(o),n=pi(n,o,r),n!==null?n.sibling:null);Hi(o);break;case 19:var g=(n.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(uo(n,o,r,!1),u=(r&o.childLanes)!==0),g){if(u)return Hm(n,o,r);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),te(ct,ct.current),u)break;return null;case 22:return o.lanes=0,Vm(n,o,r,o.pendingProps);case 24:Gi(o,pt,n.memoizedState.cache)}return pi(n,o,r)}function Ym(n,o,r){if(n!==null)if(n.memoizedProps!==o.pendingProps)gt=!0;else{if(!uf(n,r)&&(o.flags&128)===0)return gt=!1,DS(n,o,r);gt=(n.flags&131072)!==0}else gt=!1,De&&(o.flags&1048576)!==0&&Cp(o,gr,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=ws(o.elementType),o.type=n,typeof n=="function")hc(n)?(u=Is(n,u),o.tag=1,o=Gm(null,o,n,u,r)):(o.tag=0,o=tf(null,o,n,u,r));else{if(n!=null){var g=n.$$typeof;if(g===F){o.tag=11,o=km(null,o,n,u,r);break e}else if(g===I){o.tag=14,o=Um(null,o,n,u,r);break e}}throw o=ie(n)||n,Error(s(306,o,""))}}return o;case 0:return tf(n,o,o.type,o.pendingProps,r);case 1:return u=o.type,g=Is(u,o.pendingProps),Gm(n,o,u,g,r);case 3:e:{if(ce(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;g=y.element,wc(n,o),Ar(o,u,null,r);var S=o.memoizedState;if(u=S.cache,Gi(o,pt,u),u!==y.cache&&Ec(o,[pt],r,!0),Cr(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Fm(n,o,u,r);break e}else if(u!==g){g=En(Error(s(424)),o),_r(g),o=Fm(n,o,u,r);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(je=xn(n.firstChild),Dt=o,De=!0,Pi=null,Nn=!0,r=Vp(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(As(),u===g){o=pi(n,o,r);break e}kt(n,o,u,r)}o=o.child}return o;case 26:return ll(n,o),n===null?(r=n_(o.type,null,o.pendingProps,null))?o.memoizedState=r:De||(r=o.type,n=o.pendingProps,u=Nl(he.current).createElement(r),u[bt]=o,u[Jt]=n,Ut(u,r,n),Nt(u),o.stateNode=u):o.memoizedState=n_(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return on(o),n===null&&De&&(u=o.stateNode=jg(o.type,o.pendingProps,he.current),Dt=o,Nn=!0,g=je,ji(o.type)?(zf=g,je=xn(u.firstChild)):je=g),kt(n,o,o.pendingProps.children,r),ll(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&De&&((g=u=je)&&(u=aE(u,o.type,o.pendingProps,Nn),u!==null?(o.stateNode=u,Dt=o,je=xn(u.firstChild),Nn=!1,g=!0):g=!1),g||Li(o)),on(o),g=o.type,y=o.pendingProps,S=n!==null?n.memoizedProps:null,u=y.children,qf(g,y)?u=null:S!==null&&qf(g,S)&&(o.flags|=32),o.memoizedState!==null&&(g=Oc(n,o,ES,null,null,r),Hr._currentValue=g),ll(n,o),kt(n,o,u,r),o.child;case 6:return n===null&&De&&((n=r=je)&&(r=lE(r,o.pendingProps,Nn),r!==null?(o.stateNode=r,Dt=o,je=null,n=!0):n=!1),n||Li(o)),null;case 13:return zm(n,o,r);case 4:return ce(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=bs(o,null,u,r):kt(n,o,u,r),o.child;case 11:return km(n,o,o.type,o.pendingProps,r);case 7:return kt(n,o,o.pendingProps,r),o.child;case 8:return kt(n,o,o.pendingProps.children,r),o.child;case 12:return kt(n,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,Gi(o,o.type,u.value),kt(n,o,u.children,r),o.child;case 9:return g=o.type._context,u=o.pendingProps.children,Ms(o),g=It(g),u=u(g),o.flags|=1,kt(n,o,u,r),o.child;case 14:return Um(n,o,o.type,o.pendingProps,r);case 15:return Om(n,o,o.type,o.pendingProps,r);case 19:return Hm(n,o,r);case 31:return bS(n,o,r);case 22:return Vm(n,o,r,o.pendingProps);case 24:return Ms(o),u=It(pt),n===null?(g=Nc(),g===null&&(g=We,y=Cc(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=r),g=y),o.memoizedState={parent:u,cache:g},xc(o),Gi(o,pt,g)):((n.lanes&r)!==0&&(wc(n,o),Ar(o,null,null,r),Cr()),g=n.memoizedState,y=o.memoizedState,g.parent!==u?(g={parent:u,cache:u},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Gi(o,pt,u)):(u=y.cache,Gi(o,pt,u),u!==g.cache&&Ec(o,[pt],r,!0))),kt(n,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function mi(n){n.flags|=4}function cf(n,o,r,u,g){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(yg())n.flags|=8192;else throw Rs=Xa,Mc}else n.flags&=-16777217}function Jm(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!a_(o))if(yg())n.flags|=8192;else throw Rs=Xa,Mc}function cl(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?Nh():536870912,n.lanes|=o,Eo|=o)}function br(n,o){if(!De)switch(n.tailMode){case"hidden":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function et(n){var o=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(o)for(var g=n.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)r|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=r,o}function IS(n,o,r){var u=o.pendingProps;switch(_c(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(o),null;case 1:return et(o),null;case 3:return r=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),fi(pt),Le(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(lo(o)?mi(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vc())),et(o),null;case 26:var g=o.type,y=o.memoizedState;return n===null?(mi(o),y!==null?(et(o),Jm(o,y)):(et(o),cf(o,g,null,u,r))):y?y!==n.memoizedState?(mi(o),et(o),Jm(o,y)):(et(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&mi(o),et(o),cf(o,g,n,u,r)),null;case 27:if(Dn(o),r=he.current,g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&mi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return et(o),null}n=re.current,lo(o)?Np(o):(n=jg(g,u,r),o.stateNode=n,mi(o))}return et(o),null;case 5:if(Dn(o),g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&mi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return et(o),null}if(y=re.current,lo(o))Np(o);else{var S=Nl(he.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}y[bt]=o,y[Jt]=u;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=y;e:switch(Ut(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&mi(o)}}return et(o),cf(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,r),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&mi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=he.current,lo(o)){if(n=o.stateNode,r=o.memoizedProps,u=null,g=Dt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[bt]=o,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||zg(n.nodeValue,r)),n||Li(o,!0)}else n=Nl(n).createTextNode(u),n[bt]=o,o.stateNode=n}return et(o),null;case 31:if(r=o.memoizedState,n===null||n.memoizedState!==null){if(u=lo(o),r!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[bt]=o}else As(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;et(o),n=!1}else r=vc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return o.flags&256?(fn(o),o):(fn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return et(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=lo(o),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[bt]=o}else As(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;et(o),g=!1}else g=vc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(fn(o),o):(fn(o),null)}return fn(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=o.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),r!==n&&r&&(o.child.flags|=8192),cl(o,o.updateQueue),et(o),null);case 4:return Le(),n===null&&If(o.stateNode.containerInfo),et(o),null;case 10:return fi(o.type),et(o),null;case 19:if(Y(ct),u=o.memoizedState,u===null)return et(o),null;if(g=(o.flags&128)!==0,y=u.rendering,y===null)if(g)br(u,!1);else{if(rt!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=Ka(n),y!==null){for(o.flags|=128,br(u,!1),n=y.updateQueue,o.updateQueue=n,cl(o,n),o.subtreeFlags=0,n=r,r=o.child;r!==null;)Tp(r,n),r=r.sibling;return te(ct,ct.current&1|2),De&&ui(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&Rt()>ml&&(o.flags|=128,g=!0,br(u,!1),o.lanes=4194304)}else{if(!g)if(n=Ka(y),n!==null){if(o.flags|=128,g=!0,n=n.updateQueue,o.updateQueue=n,cl(o,n),br(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!De)return et(o),null}else 2*Rt()-u.renderingStartTime>ml&&r!==536870912&&(o.flags|=128,g=!0,br(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Rt(),n.sibling=null,r=ct.current,te(ct,g?r&1|2:r&1),De&&ui(o,u.treeForkCount),n):(et(o),null);case 22:case 23:return fn(o),Ic(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(et(o),o.subtreeFlags&6&&(o.flags|=8192)):et(o),r=o.updateQueue,r!==null&&cl(o,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),n!==null&&Y(xs),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),fi(pt),et(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function kS(n,o){switch(_c(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return fi(pt),Le(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return Dn(o),null;case 31:if(o.memoizedState!==null){if(fn(o),o.alternate===null)throw Error(s(340));As()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(fn(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));As()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Y(ct),null;case 4:return Le(),null;case 10:return fi(o.type),null;case 22:case 23:return fn(o),Ic(),n!==null&&Y(xs),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return fi(pt),null;case 25:return null;default:return null}}function Xm(n,o){switch(_c(o),o.tag){case 3:fi(pt),Le();break;case 26:case 27:case 5:Dn(o);break;case 4:Le();break;case 31:o.memoizedState!==null&&fn(o);break;case 13:fn(o);break;case 19:Y(ct);break;case 10:fi(o.type);break;case 22:case 23:fn(o),Ic(),n!==null&&Y(xs);break;case 24:fi(pt)}}function Dr(n,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var g=u.next;r=g;do{if((r.tag&n)===n){u=void 0;var y=r.create,S=r.inst;u=y(),S.destroy=u}r=r.next}while(r!==g)}}catch(A){Fe(o,o.return,A)}}function Ji(n,o,r){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,g=o;var b=r,G=A;try{G()}catch(Q){Fe(g,b,Q)}}}u=u.next}while(u!==y)}}catch(Q){Fe(o,o.return,Q)}}function Wm(n){var o=n.updateQueue;if(o!==null){var r=n.stateNode;try{Pp(o,r)}catch(u){Fe(n,n.return,u)}}}function Qm(n,o,r){r.props=Is(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Fe(n,o,u)}}function Ir(n,o){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(g){Fe(n,o,g)}}function Qn(n,o){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(g){Fe(n,o,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){Fe(n,o,g)}else r.current=null}function Zm(n){var o=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(g){Fe(n,n.return,g)}}function ff(n,o,r){try{var u=n.stateNode;tE(u,n.type,r,o),u[Jt]=o}catch(g){Fe(n,n.return,g)}}function Km(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ji(n.type)||n.tag===4}function df(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Km(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ji(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hf(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(n),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=ri));else if(u!==4&&(u===27&&ji(n.type)&&(r=n.stateNode,o=null),n=n.child,n!==null))for(hf(n,o,r),n=n.sibling;n!==null;)hf(n,o,r),n=n.sibling}function fl(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?r.insertBefore(n,o):r.appendChild(n);else if(u!==4&&(u===27&&ji(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(fl(n,o,r),n=n.sibling;n!==null;)fl(n,o,r),n=n.sibling}function $m(n){var o=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Ut(o,u,r),o[bt]=n,o[Jt]=r}catch(y){Fe(n,n.return,y)}}var gi=!1,_t=!1,pf=!1,jm=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function US(n,o){if(n=n.containerInfo,Of=Il,n=fp(n),rc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var S=0,A=-1,b=-1,G=0,Q=0,$=n,z=null;t:for(;;){for(var J;$!==r||g!==0&&$.nodeType!==3||(A=S+g),$!==y||u!==0&&$.nodeType!==3||(b=S+u),$.nodeType===3&&(S+=$.nodeValue.length),(J=$.firstChild)!==null;)z=$,$=J;for(;;){if($===n)break t;if(z===r&&++G===g&&(A=S),z===y&&++Q===u&&(b=S),(J=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=J}r=A===-1||b===-1?null:{start:A,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vf={focusedElem:n,selectionRange:r},Il=!1,Mt=o;Mt!==null;)if(o=Mt,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Mt=n;else for(;Mt!==null;){switch(o=Mt,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)g=n[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=o,g=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var de=Is(r.type,g);n=u.getSnapshotBeforeUpdate(de,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(ve){Fe(r,r.return,ve)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,r=n.nodeType,r===9)Lf(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Lf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,Mt=n;break}Mt=o.return}}function eg(n,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:yi(n,r),u&4&&Dr(5,r);break;case 1:if(yi(n,r),u&4)if(n=r.stateNode,o===null)try{n.componentDidMount()}catch(S){Fe(r,r.return,S)}else{var g=Is(r.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(g,o,n.__reactInternalSnapshotBeforeUpdate)}catch(S){Fe(r,r.return,S)}}u&64&&Wm(r),u&512&&Ir(r,r.return);break;case 3:if(yi(n,r),u&64&&(n=r.updateQueue,n!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{Pp(n,o)}catch(S){Fe(r,r.return,S)}}break;case 27:o===null&&u&4&&$m(r);case 26:case 5:yi(n,r),o===null&&u&4&&Zm(r),u&512&&Ir(r,r.return);break;case 12:yi(n,r);break;case 31:yi(n,r),u&4&&ig(n,r);break;case 13:yi(n,r),u&4&&sg(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=BS.bind(null,r),uE(n,r))));break;case 22:if(u=r.memoizedState!==null||gi,!u){o=o!==null&&o.memoizedState!==null||_t,g=gi;var y=_t;gi=u,(_t=o)&&!y?vi(n,r,(r.subtreeFlags&8772)!==0):yi(n,r),gi=g,_t=y}break;case 30:break;default:yi(n,r)}}function tg(n){var o=n.alternate;o!==null&&(n.alternate=null,tg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&Bu(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var it=null,Wt=!1;function _i(n,o,r){for(r=r.child;r!==null;)ng(n,o,r),r=r.sibling}function ng(n,o,r){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(nr,r)}catch{}switch(r.tag){case 26:_t||Qn(r,o),_i(n,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:_t||Qn(r,o);var u=it,g=Wt;ji(r.type)&&(it=r.stateNode,Wt=!1),_i(n,o,r),Fr(r.stateNode),it=u,Wt=g;break;case 5:_t||Qn(r,o);case 6:if(u=it,g=Wt,it=null,_i(n,o,r),it=u,Wt=g,it!==null)if(Wt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(r.stateNode)}catch(y){Fe(r,o,y)}else try{it.removeChild(r.stateNode)}catch(y){Fe(r,o,y)}break;case 18:it!==null&&(Wt?(n=it,Wg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),bo(n)):Wg(it,r.stateNode));break;case 4:u=it,g=Wt,it=r.stateNode.containerInfo,Wt=!0,_i(n,o,r),it=u,Wt=g;break;case 0:case 11:case 14:case 15:Ji(2,r,o),_t||Ji(4,r,o),_i(n,o,r);break;case 1:_t||(Qn(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Qm(r,o,u)),_i(n,o,r);break;case 21:_i(n,o,r);break;case 22:_t=(u=_t)||r.memoizedState!==null,_i(n,o,r),_t=u;break;default:_i(n,o,r)}}function ig(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{bo(n)}catch(r){Fe(o,o.return,r)}}}function sg(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bo(n)}catch(r){Fe(o,o.return,r)}}function OS(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new jm),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new jm),o;default:throw Error(s(435,n.tag))}}function dl(n,o){var r=OS(n);o.forEach(function(u){if(!r.has(u)){r.add(u);var g=HS.bind(null,n,u);u.then(g,g)}})}function Qt(n,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var g=r[u],y=n,S=o,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(ji(A.type)){it=A.stateNode,Wt=!1;break e}break;case 5:it=A.stateNode,Wt=!1;break e;case 3:case 4:it=A.stateNode.containerInfo,Wt=!0;break e}A=A.return}if(it===null)throw Error(s(160));ng(y,S,g),it=null,Wt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)og(o,n),o=o.sibling}var kn=null;function og(n,o){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qt(o,n),Zt(n),u&4&&(Ji(3,n,n.return),Dr(3,n),Ji(5,n,n.return));break;case 1:Qt(o,n),Zt(n),u&512&&(_t||r===null||Qn(r,r.return)),u&64&&gi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var g=kn;if(Qt(o,n),Zt(n),u&512&&(_t||r===null||Qn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[or]||y[bt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),Ut(y,u,r),y[bt]=n,Nt(y),u=y;break e;case"link":var S=o_("link","href",g).get(u+(r.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(A,1);break t}}y=g.createElement(u),Ut(y,u,r),g.head.appendChild(y);break;case"meta":if(S=o_("meta","content",g).get(u+(r.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(A,1);break t}}y=g.createElement(u),Ut(y,u,r),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[bt]=n,Nt(y),u=y}n.stateNode=u}else r_(g,n.type,n.stateNode);else n.stateNode=s_(g,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?r_(g,n.type,n.stateNode):s_(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ff(n,n.memoizedProps,r.memoizedProps)}break;case 27:Qt(o,n),Zt(n),u&512&&(_t||r===null||Qn(r,r.return)),r!==null&&u&4&&ff(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Qt(o,n),Zt(n),u&512&&(_t||r===null||Qn(r,r.return)),n.flags&32){g=n.stateNode;try{$s(g,"")}catch(de){Fe(n,n.return,de)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,ff(n,g,r!==null?r.memoizedProps:g)),u&1024&&(pf=!0);break;case 6:if(Qt(o,n),Zt(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(de){Fe(n,n.return,de)}}break;case 3:if(wl=null,g=kn,kn=Ml(o.containerInfo),Qt(o,n),kn=g,Zt(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{bo(o.containerInfo)}catch(de){Fe(n,n.return,de)}pf&&(pf=!1,rg(n));break;case 4:u=kn,kn=Ml(n.stateNode.containerInfo),Qt(o,n),Zt(n),kn=u;break;case 12:Qt(o,n),Zt(n);break;case 31:Qt(o,n),Zt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,dl(n,u)));break;case 13:Qt(o,n),Zt(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(pl=Rt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,dl(n,u)));break;case 22:g=n.memoizedState!==null;var b=r!==null&&r.memoizedState!==null,G=gi,Q=_t;if(gi=G||g,_t=Q||b,Qt(o,n),_t=Q,gi=G,Zt(n),u&8192)e:for(o=n.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(r===null||b||gi||_t||ks(n)),r=null,o=n;;){if(o.tag===5||o.tag===26){if(r===null){b=r=o;try{if(y=b.stateNode,g)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=b.stateNode;var $=b.memoizedProps.style,z=$!=null&&$.hasOwnProperty("display")?$.display:null;A.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(de){Fe(b,b.return,de)}}}else if(o.tag===6){if(r===null){b=o;try{b.stateNode.nodeValue=g?"":b.memoizedProps}catch(de){Fe(b,b.return,de)}}}else if(o.tag===18){if(r===null){b=o;try{var J=b.stateNode;g?Qg(J,!0):Qg(b.stateNode,!1)}catch(de){Fe(b,b.return,de)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,dl(n,r))));break;case 19:Qt(o,n),Zt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,dl(n,u)));break;case 30:break;case 21:break;default:Qt(o,n),Zt(n)}}function Zt(n){var o=n.flags;if(o&2){try{for(var r,u=n.return;u!==null;){if(Km(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var g=r.stateNode,y=df(n);fl(n,y,g);break;case 5:var S=r.stateNode;r.flags&32&&($s(S,""),r.flags&=-33);var A=df(n);fl(n,A,S);break;case 3:case 4:var b=r.stateNode.containerInfo,G=df(n);hf(n,G,b);break;default:throw Error(s(161))}}catch(Q){Fe(n,n.return,Q)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function rg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;rg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function yi(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)eg(n,o.alternate,o),o=o.sibling}function ks(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:Ji(4,o,o.return),ks(o);break;case 1:Qn(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&Qm(o,o.return,r),ks(o);break;case 27:Fr(o.stateNode);case 26:case 5:Qn(o,o.return),ks(o);break;case 22:o.memoizedState===null&&ks(o);break;case 30:ks(o);break;default:ks(o)}n=n.sibling}}function vi(n,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,g=n,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:vi(g,y,r),Dr(4,y);break;case 1:if(vi(g,y,r),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(G){Fe(u,u.return,G)}if(u=y,g=u.updateQueue,g!==null){var A=u.stateNode;try{var b=g.shared.hiddenCallbacks;if(b!==null)for(g.shared.hiddenCallbacks=null,g=0;g<b.length;g++)qp(b[g],A)}catch(G){Fe(u,u.return,G)}}r&&S&64&&Wm(y),Ir(y,y.return);break;case 27:$m(y);case 26:case 5:vi(g,y,r),r&&u===null&&S&4&&Zm(y),Ir(y,y.return);break;case 12:vi(g,y,r);break;case 31:vi(g,y,r),r&&S&4&&ig(g,y);break;case 13:vi(g,y,r),r&&S&4&&sg(g,y);break;case 22:y.memoizedState===null&&vi(g,y,r),Ir(y,y.return);break;case 30:break;default:vi(g,y,r)}o=o.sibling}}function mf(n,o){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&yr(r))}function gf(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&yr(n))}function Un(n,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ag(n,o,r,u),o=o.sibling}function ag(n,o,r,u){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Un(n,o,r,u),g&2048&&Dr(9,o);break;case 1:Un(n,o,r,u);break;case 3:Un(n,o,r,u),g&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&yr(n)));break;case 12:if(g&2048){Un(n,o,r,u),n=o.stateNode;try{var y=o.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(b){Fe(o,o.return,b)}}else Un(n,o,r,u);break;case 31:Un(n,o,r,u);break;case 13:Un(n,o,r,u);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?Un(n,o,r,u):kr(n,o):y._visibility&2?Un(n,o,r,u):(y._visibility|=2,vo(n,o,r,u,(o.subtreeFlags&10256)!==0||!1)),g&2048&&mf(S,o);break;case 24:Un(n,o,r,u),g&2048&&gf(o.alternate,o);break;default:Un(n,o,r,u)}}function vo(n,o,r,u,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,S=o,A=r,b=u,G=S.flags;switch(S.tag){case 0:case 11:case 15:vo(y,S,A,b,g),Dr(8,S);break;case 23:break;case 22:var Q=S.stateNode;S.memoizedState!==null?Q._visibility&2?vo(y,S,A,b,g):kr(y,S):(Q._visibility|=2,vo(y,S,A,b,g)),g&&G&2048&&mf(S.alternate,S);break;case 24:vo(y,S,A,b,g),g&&G&2048&&gf(S.alternate,S);break;default:vo(y,S,A,b,g)}o=o.sibling}}function kr(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=n,u=o,g=u.flags;switch(u.tag){case 22:kr(r,u),g&2048&&mf(u.alternate,u);break;case 24:kr(r,u),g&2048&&gf(u.alternate,u);break;default:kr(r,u)}o=o.sibling}}var Ur=8192;function To(n,o,r){if(n.subtreeFlags&Ur)for(n=n.child;n!==null;)lg(n,o,r),n=n.sibling}function lg(n,o,r){switch(n.tag){case 26:To(n,o,r),n.flags&Ur&&n.memoizedState!==null&&SE(r,kn,n.memoizedState,n.memoizedProps);break;case 5:To(n,o,r);break;case 3:case 4:var u=kn;kn=Ml(n.stateNode.containerInfo),To(n,o,r),kn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ur,Ur=16777216,To(n,o,r),Ur=u):To(n,o,r));break;default:To(n,o,r)}}function ug(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Or(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];Mt=u,fg(u,n)}ug(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)cg(n),n=n.sibling}function cg(n){switch(n.tag){case 0:case 11:case 15:Or(n),n.flags&2048&&Ji(9,n,n.return);break;case 3:Or(n);break;case 12:Or(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,hl(n)):Or(n);break;default:Or(n)}}function hl(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];Mt=u,fg(u,n)}ug(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:Ji(8,o,o.return),hl(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,hl(o));break;default:hl(o)}n=n.sibling}}function fg(n,o){for(;Mt!==null;){var r=Mt;switch(r.tag){case 0:case 11:case 15:Ji(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:yr(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Mt=u;else e:for(r=n;Mt!==null;){u=Mt;var g=u.sibling,y=u.return;if(tg(u),u===r){Mt=null;break e}if(g!==null){g.return=y,Mt=g;break e}Mt=y}}}var VS={getCacheForType:function(n){var o=It(pt),r=o.data.get(n);return r===void 0&&(r=n(),o.data.set(n,r)),r},cacheSignal:function(){return It(pt).controller.signal}},qS=typeof WeakMap=="function"?WeakMap:Map,Ve=0,We=null,Me=null,we=0,Ge=0,dn=null,Xi=!1,So=!1,_f=!1,Ti=0,rt=0,Wi=0,Us=0,yf=0,hn=0,Eo=0,Vr=null,Kt=null,vf=!1,pl=0,dg=0,ml=1/0,gl=null,Qi=null,St=0,Zi=null,Co=null,Si=0,Tf=0,Sf=null,hg=null,qr=0,Ef=null;function pn(){return(Ve&2)!==0&&we!==0?we&-we:U.T!==null?wf():Rh()}function pg(){if(hn===0)if((we&536870912)===0||De){var n=Aa;Aa<<=1,(Aa&3932160)===0&&(Aa=262144),hn=n}else hn=536870912;return n=cn.current,n!==null&&(n.flags|=32),hn}function $t(n,o,r){(n===We&&(Ge===2||Ge===9)||n.cancelPendingCommit!==null)&&(Ao(n,0),Ki(n,we,hn,!1)),sr(n,r),((Ve&2)===0||n!==We)&&(n===We&&((Ve&2)===0&&(Us|=r),rt===4&&Ki(n,we,hn,!1)),Zn(n))}function mg(n,o,r){if((Ve&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&n.expiredLanes)===0||ir(n,o),g=u?GS(n,o):Af(n,o,!0),y=u;do{if(g===0){So&&!u&&Ki(n,o,0,!1);break}else{if(r=n.current.alternate,y&&!PS(r)){g=Af(n,o,!1),y=!1;continue}if(g===2){if(y=o,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var A=n;g=Vr;var b=A.current.memoizedState.isDehydrated;if(b&&(Ao(A,S).flags|=256),S=Af(A,S,!1),S!==2){if(_f&&!b){A.errorRecoveryDisabledLanes|=y,Us|=y,g=4;break e}y=Kt,Kt=g,y!==null&&(Kt===null?Kt=y:Kt.push.apply(Kt,y))}g=S}if(y=!1,g!==2)continue}}if(g===1){Ao(n,0),Ki(n,o,0,!0);break}e:{switch(u=n,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Ki(u,o,hn,!Xi);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=pl+300-Rt(),10<g)){if(Ki(u,o,hn,!Xi),Ma(u,0,!0)!==0)break e;Si=o,u.timeoutHandle=Jg(gg.bind(null,u,r,Kt,gl,vf,o,hn,Us,Eo,Xi,y,"Throttled",-0,0),g);break e}gg(u,r,Kt,gl,vf,o,hn,Us,Eo,Xi,y,null,-0,0)}}break}while(!0);Zn(n)}function gg(n,o,r,u,g,y,S,A,b,G,Q,$,z,J){if(n.timeoutHandle=-1,$=o.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},lg(o,y,$);var de=(y&62914560)===y?pl-Rt():(y&4194048)===y?dg-Rt():0;if(de=EE($,de),de!==null){Si=y,n.cancelPendingCommit=de(Ag.bind(null,n,o,y,r,u,g,S,A,b,Q,$,null,z,J)),Ki(n,y,S,!G);return}}Ag(n,o,y,r,u,g,S,A,b)}function PS(n){for(var o=n;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var g=r[u],y=g.getSnapshot;g=g.value;try{if(!ln(y(),g))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ki(n,o,r,u){o&=~yf,o&=~Us,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var g=o;0<g;){var y=31-an(g),S=1<<y;u[y]=-1,g&=~S}r!==0&&Mh(n,r,o)}function _l(){return(Ve&6)===0?(Pr(0),!1):!0}function Cf(){if(Me!==null){if(Ge===0)var n=Me.return;else n=Me,ci=Ns=null,Pc(n),po=null,Tr=0,n=Me;for(;n!==null;)Xm(n.alternate,n),n=n.return;Me=null}}function Ao(n,o){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,sE(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Si=0,Cf(),We=n,Me=r=li(n.current,null),we=o,Ge=0,dn=null,Xi=!1,So=ir(n,o),_f=!1,Eo=hn=yf=Us=Wi=rt=0,Kt=Vr=null,vf=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var g=31-an(u),y=1<<g;o|=n[g],u&=~y}return Ti=o,Pa(),r}function _g(n,o){Ce=null,U.H=wr,o===ho||o===Ja?(o=kp(),Ge=3):o===Mc?(o=kp(),Ge=4):Ge=o===ef?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,dn=o,Me===null&&(rt=1,rl(n,En(o,n.current)))}function yg(){var n=cn.current;return n===null?!0:(we&4194048)===we?Mn===null:(we&62914560)===we||(we&536870912)!==0?n===Mn:!1}function vg(){var n=U.H;return U.H=wr,n===null?wr:n}function Tg(){var n=U.A;return U.A=VS,n}function yl(){rt=4,Xi||(we&4194048)!==we&&cn.current!==null||(So=!0),(Wi&134217727)===0&&(Us&134217727)===0||We===null||Ki(We,we,hn,!1)}function Af(n,o,r){var u=Ve;Ve|=2;var g=vg(),y=Tg();(We!==n||we!==o)&&(gl=null,Ao(n,o)),o=!1;var S=rt;e:do try{if(Ge!==0&&Me!==null){var A=Me,b=dn;switch(Ge){case 8:Cf(),S=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(o=!0);var G=Ge;if(Ge=0,dn=null,No(n,A,b,G),r&&So){S=0;break e}break;default:G=Ge,Ge=0,dn=null,No(n,A,b,G)}}LS(),S=rt;break}catch(Q){_g(n,Q)}while(!0);return o&&n.shellSuspendCounter++,ci=Ns=null,Ve=u,U.H=g,U.A=y,Me===null&&(We=null,we=0,Pa()),S}function LS(){for(;Me!==null;)Sg(Me)}function GS(n,o){var r=Ve;Ve|=2;var u=vg(),g=Tg();We!==n||we!==o?(gl=null,ml=Rt()+500,Ao(n,o)):So=ir(n,o);e:do try{if(Ge!==0&&Me!==null){o=Me;var y=dn;t:switch(Ge){case 1:Ge=0,dn=null,No(n,o,y,1);break;case 2:case 9:if(Dp(y)){Ge=0,dn=null,Eg(o);break}o=function(){Ge!==2&&Ge!==9||We!==n||(Ge=7),Zn(n)},y.then(o,o);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Dp(y)?(Ge=0,dn=null,Eg(o)):(Ge=0,dn=null,No(n,o,y,7));break;case 5:var S=null;switch(Me.tag){case 26:S=Me.memoizedState;case 5:case 27:var A=Me;if(S?a_(S):A.stateNode.complete){Ge=0,dn=null;var b=A.sibling;if(b!==null)Me=b;else{var G=A.return;G!==null?(Me=G,vl(G)):Me=null}break t}}Ge=0,dn=null,No(n,o,y,5);break;case 6:Ge=0,dn=null,No(n,o,y,6);break;case 8:Cf(),rt=6;break e;default:throw Error(s(462))}}FS();break}catch(Q){_g(n,Q)}while(!0);return ci=Ns=null,U.H=u,U.A=g,Ve=r,Me!==null?0:(We=null,we=0,Pa(),rt)}function FS(){for(;Me!==null&&!Jn();)Sg(Me)}function Sg(n){var o=Ym(n.alternate,n,Ti);n.memoizedProps=n.pendingProps,o===null?vl(n):Me=o}function Eg(n){var o=n,r=o.alternate;switch(o.tag){case 15:case 0:o=Lm(r,o,o.pendingProps,o.type,void 0,we);break;case 11:o=Lm(r,o,o.pendingProps,o.type.render,o.ref,we);break;case 5:Pc(o);default:Xm(r,o),o=Me=Tp(o,Ti),o=Ym(r,o,Ti)}n.memoizedProps=n.pendingProps,o===null?vl(n):Me=o}function No(n,o,r,u){ci=Ns=null,Pc(o),po=null,Tr=0;var g=o.return;try{if(RS(n,g,o,r,we)){rt=1,rl(n,En(r,n.current)),Me=null;return}}catch(y){if(g!==null)throw Me=g,y;rt=1,rl(n,En(r,n.current)),Me=null;return}o.flags&32768?(De||u===1?n=!0:So||(we&536870912)!==0?n=!1:(Xi=n=!0,(u===2||u===9||u===3||u===6)&&(u=cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cg(o,n)):vl(o)}function vl(n){var o=n;do{if((o.flags&32768)!==0){Cg(o,Xi);return}n=o.return;var r=IS(o.alternate,o,Ti);if(r!==null){Me=r;return}if(o=o.sibling,o!==null){Me=o;return}Me=o=n}while(o!==null);rt===0&&(rt=5)}function Cg(n,o){do{var r=kS(n.alternate,n);if(r!==null){r.flags&=32767,Me=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(n=n.sibling,n!==null)){Me=n;return}Me=n=r}while(n!==null);rt=6,Me=null}function Ag(n,o,r,u,g,y,S,A,b){n.cancelPendingCommit=null;do Tl();while(St!==0);if((Ve&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=fc,T0(n,r,y,S,A,b),n===We&&(Me=We=null,we=0),Co=o,Zi=n,Si=r,Tf=y,Sf=g,hg=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,YS(Ea,function(){return Rg(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,g=X.p,X.p=2,S=Ve,Ve|=4;try{US(n,o,r)}finally{Ve=S,X.p=g,U.T=u}}St=1,Ng(),Mg(),xg()}}function Ng(){if(St===1){St=0;var n=Zi,o=Co,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=U.T,U.T=null;var u=X.p;X.p=2;var g=Ve;Ve|=4;try{og(o,n);var y=Vf,S=fp(n.containerInfo),A=y.focusedElem,b=y.selectionRange;if(S!==A&&A&&A.ownerDocument&&cp(A.ownerDocument.documentElement,A)){if(b!==null&&rc(A)){var G=b.start,Q=b.end;if(Q===void 0&&(Q=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(Q,A.value.length);else{var $=A.ownerDocument||document,z=$&&$.defaultView||window;if(z.getSelection){var J=z.getSelection(),de=A.textContent.length,ve=Math.min(b.start,de),Ye=b.end===void 0?ve:Math.min(b.end,de);!J.extend&&ve>Ye&&(S=Ye,Ye=ve,ve=S);var P=up(A,ve),D=up(A,Ye);if(P&&D&&(J.rangeCount!==1||J.anchorNode!==P.node||J.anchorOffset!==P.offset||J.focusNode!==D.node||J.focusOffset!==D.offset)){var L=$.createRange();L.setStart(P.node,P.offset),J.removeAllRanges(),ve>Ye?(J.addRange(L),J.extend(D.node,D.offset)):(L.setEnd(D.node,D.offset),J.addRange(L))}}}}for($=[],J=A;J=J.parentNode;)J.nodeType===1&&$.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<$.length;A++){var K=$[A];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Il=!!Of,Vf=Of=null}finally{Ve=g,X.p=u,U.T=r}}n.current=o,St=2}}function Mg(){if(St===2){St=0;var n=Zi,o=Co,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=U.T,U.T=null;var u=X.p;X.p=2;var g=Ve;Ve|=4;try{eg(n,o.alternate,o)}finally{Ve=g,X.p=u,U.T=r}}St=3}}function xg(){if(St===4||St===3){St=0,gs();var n=Zi,o=Co,r=Si,u=hg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?St=5:(St=0,Co=Zi=null,wg(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Qi=null),Fu(r),o=o.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(nr,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=U.T,g=X.p,X.p=2,U.T=null;try{for(var y=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];y(A.value,{componentStack:A.stack})}}finally{U.T=o,X.p=g}}(Si&3)!==0&&Tl(),Zn(n),g=n.pendingLanes,(r&261930)!==0&&(g&42)!==0?n===Ef?qr++:(qr=0,Ef=n):qr=0,Pr(0)}}function wg(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,yr(o)))}function Tl(){return Ng(),Mg(),xg(),Rg()}function Rg(){if(St!==5)return!1;var n=Zi,o=Tf;Tf=0;var r=Fu(Si),u=U.T,g=X.p;try{X.p=32>r?32:r,U.T=null,r=Sf,Sf=null;var y=Zi,S=Si;if(St=0,Co=Zi=null,Si=0,(Ve&6)!==0)throw Error(s(331));var A=Ve;if(Ve|=4,cg(y.current),ag(y,y.current,S,r),Ve=A,Pr(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(nr,y)}catch{}return!0}finally{X.p=g,U.T=u,wg(n,o)}}function bg(n,o,r){o=En(r,o),o=jc(n.stateNode,o,2),n=Bi(n,o,2),n!==null&&(sr(n,2),Zn(n))}function Fe(n,o,r){if(n.tag===3)bg(n,n,r);else for(;o!==null;){if(o.tag===3){bg(o,n,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qi===null||!Qi.has(u))){n=En(r,n),r=Dm(2),u=Bi(o,r,2),u!==null&&(Im(r,u,o,n),sr(u,2),Zn(u));break}}o=o.return}}function Nf(n,o,r){var u=n.pingCache;if(u===null){u=n.pingCache=new qS;var g=new Set;u.set(o,g)}else g=u.get(o),g===void 0&&(g=new Set,u.set(o,g));g.has(r)||(_f=!0,g.add(r),n=zS.bind(null,n,o,r),o.then(n,n))}function zS(n,o,r){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,We===n&&(we&r)===r&&(rt===4||rt===3&&(we&62914560)===we&&300>Rt()-pl?(Ve&2)===0&&Ao(n,0):yf|=r,Eo===we&&(Eo=0)),Zn(n)}function Dg(n,o){o===0&&(o=Nh()),n=Es(n,o),n!==null&&(sr(n,o),Zn(n))}function BS(n){var o=n.memoizedState,r=0;o!==null&&(r=o.retryLane),Dg(n,r)}function HS(n,o){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(r=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Dg(n,r)}function YS(n,o){return Ke(n,o)}var Sl=null,Mo=null,Mf=!1,El=!1,xf=!1,$i=0;function Zn(n){n!==Mo&&n.next===null&&(Mo===null?Sl=Mo=n:Mo=Mo.next=n),El=!0,Mf||(Mf=!0,XS())}function Pr(n,o){if(!xf&&El){xf=!0;do for(var r=!1,u=Sl;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var S=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-an(42|n)+1)-1,y&=g&~(S&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Og(u,y))}else y=we,y=Ma(u,u===We?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||ir(u,y)||(r=!0,Og(u,y));u=u.next}while(r);xf=!1}}function JS(){Ig()}function Ig(){El=Mf=!1;var n=0;$i!==0&&iE()&&(n=$i);for(var o=Rt(),r=null,u=Sl;u!==null;){var g=u.next,y=kg(u,o);y===0?(u.next=null,r===null?Sl=g:r.next=g,g===null&&(Mo=r)):(r=u,(n!==0||(y&3)!==0)&&(El=!0)),u=g}St!==0&&St!==5||Pr(n),$i!==0&&($i=0)}function kg(n,o){for(var r=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-an(y),A=1<<S,b=g[S];b===-1?((A&r)===0||(A&u)!==0)&&(g[S]=v0(A,o)):b<=o&&(n.expiredLanes|=A),y&=~A}if(o=We,r=we,r=Ma(n,n===o?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===o&&(Ge===2||Ge===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Vt(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||ir(n,r)){if(o=r&-r,o===n.callbackPriority)return o;switch(u!==null&&Vt(u),Fu(r)){case 2:case 8:r=Ch;break;case 32:r=Ea;break;case 268435456:r=Ah;break;default:r=Ea}return u=Ug.bind(null,n),r=Ke(r,u),n.callbackPriority=o,n.callbackNode=r,o}return u!==null&&u!==null&&Vt(u),n.callbackPriority=2,n.callbackNode=null,2}function Ug(n,o){if(St!==0&&St!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Tl()&&n.callbackNode!==r)return null;var u=we;return u=Ma(n,n===We?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(mg(n,u,o),kg(n,Rt()),n.callbackNode!=null&&n.callbackNode===r?Ug.bind(null,n):null)}function Og(n,o){if(Tl())return null;mg(n,o,!0)}function XS(){oE(function(){(Ve&6)!==0?Ke(Sa,JS):Ig()})}function wf(){if($i===0){var n=co;n===0&&(n=Ca,Ca<<=1,(Ca&261888)===0&&(Ca=256)),$i=n}return $i}function Vg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ba(""+n)}function qg(n,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,n.id&&r.setAttribute("form",n.id),o.parentNode.insertBefore(r,o),n=new FormData(n),r.parentNode.removeChild(r),n}function WS(n,o,r,u,g){if(o==="submit"&&r&&r.stateNode===g){var y=Vg((g[Jt]||null).action),S=u.submitter;S&&(o=(o=S[Jt]||null)?Vg(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var A=new Ua("action","action",null,u,g);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($i!==0){var b=S?qg(g,S):new FormData(g);Xc(r,{pending:!0,data:b,method:g.method,action:y},null,b)}}else typeof y=="function"&&(A.preventDefault(),b=S?qg(g,S):new FormData(g),Xc(r,{pending:!0,data:b,method:g.method,action:y},y,b))},currentTarget:g}]})}}for(var Rf=0;Rf<cc.length;Rf++){var bf=cc[Rf],QS=bf.toLowerCase(),ZS=bf[0].toUpperCase()+bf.slice(1);In(QS,"on"+ZS)}In(pp,"onAnimationEnd"),In(mp,"onAnimationIteration"),In(gp,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(dS,"onTransitionRun"),In(hS,"onTransitionStart"),In(pS,"onTransitionCancel"),In(_p,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function Pg(n,o){o=(o&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],g=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var S=u.length-1;0<=S;S--){var A=u[S],b=A.instance,G=A.currentTarget;if(A=A.listener,b!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=G;try{y(g)}catch(Q){qa(Q)}g.currentTarget=null,y=b}else for(S=0;S<u.length;S++){if(A=u[S],b=A.instance,G=A.currentTarget,A=A.listener,b!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=G;try{y(g)}catch(Q){qa(Q)}g.currentTarget=null,y=b}}}}function xe(n,o){var r=o[zu];r===void 0&&(r=o[zu]=new Set);var u=n+"__bubble";r.has(u)||(Lg(o,n,2,!1),r.add(u))}function Df(n,o,r){var u=0;o&&(u|=4),Lg(r,n,u,o)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function If(n){if(!n[Cl]){n[Cl]=!0,Ih.forEach(function(r){r!=="selectionchange"&&(KS.has(r)||Df(r,!1,n),Df(r,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Cl]||(o[Cl]=!0,Df("selectionchange",!1,o))}}function Lg(n,o,r,u){switch(p_(o)){case 2:var g=NE;break;case 8:g=ME;break;default:g=Xf}r=g.bind(null,o,r,n),g=void 0,!Ku||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(o,r,{capture:!0,passive:g}):n.addEventListener(o,r,!0):g!==void 0?n.addEventListener(o,r,{passive:g}):n.addEventListener(o,r,!1)}function kf(n,o,r,u,g){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===g)break;if(S===4)for(S=u.return;S!==null;){var b=S.tag;if((b===3||b===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;A!==null;){if(S=Xs(A),S===null)return;if(b=S.tag,b===5||b===6||b===26||b===27){u=y=S;continue e}A=A.parentNode}}u=u.return}Hh(function(){var G=y,Q=Qu(r),$=[];e:{var z=yp.get(n);if(z!==void 0){var J=Ua,de=n;switch(n){case"keypress":if(Ia(r)===0)break e;case"keydown":case"keyup":J=H0;break;case"focusin":de="focus",J=tc;break;case"focusout":de="blur",J=tc;break;case"beforeblur":case"afterblur":J=tc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=I0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=X0;break;case pp:case mp:case gp:J=O0;break;case _p:J=Q0;break;case"scroll":case"scrollend":J=b0;break;case"wheel":J=K0;break;case"copy":case"cut":case"paste":J=q0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Qh;break;case"toggle":case"beforetoggle":J=j0}var ve=(o&4)!==0,Ye=!ve&&(n==="scroll"||n==="scrollend"),P=ve?z!==null?z+"Capture":null:z;ve=[];for(var D=G,L;D!==null;){var K=D;if(L=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||L===null||P===null||(K=ar(D,P),K!=null&&ve.push(Gr(D,K,L))),Ye)break;D=D.return}0<ve.length&&(z=new J(z,de,null,r,Q),$.push({event:z,listeners:ve}))}}if((o&7)===0){e:{if(z=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",z&&r!==Wu&&(de=r.relatedTarget||r.fromElement)&&(Xs(de)||de[Js]))break e;if((J||z)&&(z=Q.window===Q?Q:(z=Q.ownerDocument)?z.defaultView||z.parentWindow:window,J?(de=r.relatedTarget||r.toElement,J=G,de=de?Xs(de):null,de!==null&&(Ye=l(de),ve=de.tag,de!==Ye||ve!==5&&ve!==27&&ve!==6)&&(de=null)):(J=null,de=G),J!==de)){if(ve=Xh,K="onMouseLeave",P="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ve=Qh,K="onPointerLeave",P="onPointerEnter",D="pointer"),Ye=J==null?z:rr(J),L=de==null?z:rr(de),z=new ve(K,D+"leave",J,r,Q),z.target=Ye,z.relatedTarget=L,K=null,Xs(Q)===G&&(ve=new ve(P,D+"enter",de,r,Q),ve.target=L,ve.relatedTarget=Ye,K=ve),Ye=K,J&&de)t:{for(ve=$S,P=J,D=de,L=0,K=P;K;K=ve(K))L++;K=0;for(var _e=D;_e;_e=ve(_e))K++;for(;0<L-K;)P=ve(P),L--;for(;0<K-L;)D=ve(D),K--;for(;L--;){if(P===D||D!==null&&P===D.alternate){ve=P;break t}P=ve(P),D=ve(D)}ve=null}else ve=null;J!==null&&Gg($,z,J,ve,!1),de!==null&&Ye!==null&&Gg($,Ye,de,ve,!0)}}e:{if(z=G?rr(G):window,J=z.nodeName&&z.nodeName.toLowerCase(),J==="select"||J==="input"&&z.type==="file")var Ie=ip;else if(tp(z))if(sp)Ie=uS;else{Ie=aS;var me=rS}else J=z.nodeName,!J||J.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?G&&Xu(G.elementType)&&(Ie=ip):Ie=lS;if(Ie&&(Ie=Ie(n,G))){np($,Ie,r,Q);break e}me&&me(n,z,G),n==="focusout"&&G&&z.type==="number"&&G.memoizedProps.value!=null&&Ju(z,"number",z.value)}switch(me=G?rr(G):window,n){case"focusin":(tp(me)||me.contentEditable==="true")&&(no=me,ac=G,mr=null);break;case"focusout":mr=ac=no=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,dp($,r,Q);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":dp($,r,Q)}var Ae;if(ic)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else to?jh(n,r)&&(Re="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(Zh&&r.locale!=="ko"&&(to||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&to&&(Ae=Yh()):(Vi=Q,$u="value"in Vi?Vi.value:Vi.textContent,to=!0)),me=Al(G,Re),0<me.length&&(Re=new Wh(Re,n,null,r,Q),$.push({event:Re,listeners:me}),Ae?Re.data=Ae:(Ae=ep(r),Ae!==null&&(Re.data=Ae)))),(Ae=tS?nS(n,r):iS(n,r))&&(Re=Al(G,"onBeforeInput"),0<Re.length&&(me=new Wh("onBeforeInput","beforeinput",null,r,Q),$.push({event:me,listeners:Re}),me.data=Ae)),WS($,n,G,r,Q)}Pg($,o)})}function Gr(n,o,r){return{instance:n,listener:o,currentTarget:r}}function Al(n,o){for(var r=o+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ar(n,r),g!=null&&u.unshift(Gr(n,g,y)),g=ar(n,o),g!=null&&u.push(Gr(n,g,y))),n.tag===3)return u;n=n.return}return[]}function $S(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Gg(n,o,r,u,g){for(var y=o._reactName,S=[];r!==null&&r!==u;){var A=r,b=A.alternate,G=A.stateNode;if(A=A.tag,b!==null&&b===u)break;A!==5&&A!==26&&A!==27||G===null||(b=G,g?(G=ar(r,y),G!=null&&S.unshift(Gr(r,G,b))):g||(G=ar(r,y),G!=null&&S.push(Gr(r,G,b)))),r=r.return}S.length!==0&&n.push({event:o,listeners:S})}var jS=/\r\n?/g,eE=/\u0000|\uFFFD/g;function Fg(n){return(typeof n=="string"?n:""+n).replace(jS,`
`).replace(eE,"")}function zg(n,o){return o=Fg(o),Fg(n)===o}function He(n,o,r,u,g,y){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||$s(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&$s(n,""+u);break;case"className":wa(n,"class",u);break;case"tabIndex":wa(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wa(n,r,u);break;case"style":zh(n,u,y);break;case"data":if(o!=="object"){wa(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=ba(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(o!=="input"&&He(n,o,"name",g.name,g,null),He(n,o,"formEncType",g.formEncType,g,null),He(n,o,"formMethod",g.formMethod,g,null),He(n,o,"formTarget",g.formTarget,g,null)):(He(n,o,"encType",g.encType,g,null),He(n,o,"method",g.method,g,null),He(n,o,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=ba(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=ri);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=ba(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":xe("beforetoggle",n),xe("toggle",n),xa(n,"popover",u);break;case"xlinkActuate":oi(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":oi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":oi(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":oi(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":oi(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":oi(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":oi(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":oi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":oi(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=w0.get(r)||r,xa(n,r,u))}}function Uf(n,o,r,u,g,y){switch(r){case"style":zh(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof u=="string"?$s(n,u):(typeof u=="number"||typeof u=="bigint")&&$s(n,""+u);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),o=r.slice(2,g?r.length-7:void 0),y=n[Jt]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(o,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(o,u,g);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):xa(n,r,u)}}}function Ut(n,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",n),xe("load",n);var u=!1,g=!1,y;for(y in r)if(r.hasOwnProperty(y)){var S=r[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:He(n,o,y,S,r,null)}}g&&He(n,o,"srcSet",r.srcSet,r,null),u&&He(n,o,"src",r.src,r,null);return;case"input":xe("invalid",n);var A=y=S=g=null,b=null,G=null;for(u in r)if(r.hasOwnProperty(u)){var Q=r[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":S=Q;break;case"checked":b=Q;break;case"defaultChecked":G=Q;break;case"value":y=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,o));break;default:He(n,o,u,Q,r,null)}}Ph(n,y,A,b,G,S,g,!1);return;case"select":xe("invalid",n),u=S=y=null;for(g in r)if(r.hasOwnProperty(g)&&(A=r[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:He(n,o,g,A,r,null)}o=y,r=S,n.multiple=!!u,o!=null?Ks(n,!!u,o,!1):r!=null&&Ks(n,!!u,r,!0);return;case"textarea":xe("invalid",n),y=g=u=null;for(S in r)if(r.hasOwnProperty(S)&&(A=r[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:He(n,o,S,A,r,null)}Gh(n,u,g,y);return;case"option":for(b in r)if(r.hasOwnProperty(b)&&(u=r[b],u!=null))switch(b){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:He(n,o,b,u,r,null)}return;case"dialog":xe("beforetoggle",n),xe("toggle",n),xe("cancel",n),xe("close",n);break;case"iframe":case"object":xe("load",n);break;case"video":case"audio":for(u=0;u<Lr.length;u++)xe(Lr[u],n);break;case"image":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"embed":case"source":case"link":xe("error",n),xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in r)if(r.hasOwnProperty(G)&&(u=r[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:He(n,o,G,u,r,null)}return;default:if(Xu(o)){for(Q in r)r.hasOwnProperty(Q)&&(u=r[Q],u!==void 0&&Uf(n,o,Q,u,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(u=r[A],u!=null&&He(n,o,A,u,r,null))}function tE(n,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,S=null,A=null,b=null,G=null,Q=null;for(J in r){var $=r[J];if(r.hasOwnProperty(J)&&$!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":b=$;default:u.hasOwnProperty(J)||He(n,o,J,null,u,$)}}for(var z in u){var J=u[z];if($=r[z],u.hasOwnProperty(z)&&(J!=null||$!=null))switch(z){case"type":y=J;break;case"name":g=J;break;case"checked":G=J;break;case"defaultChecked":Q=J;break;case"value":S=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,o));break;default:J!==$&&He(n,o,z,J,u,$)}}Yu(n,S,A,b,G,Q,y,g);return;case"select":J=S=A=z=null;for(y in r)if(b=r[y],r.hasOwnProperty(y)&&b!=null)switch(y){case"value":break;case"multiple":J=b;default:u.hasOwnProperty(y)||He(n,o,y,null,u,b)}for(g in u)if(y=u[g],b=r[g],u.hasOwnProperty(g)&&(y!=null||b!=null))switch(g){case"value":z=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==b&&He(n,o,g,y,u,b)}o=A,r=S,u=J,z!=null?Ks(n,!!r,z,!1):!!u!=!!r&&(o!=null?Ks(n,!!r,o,!0):Ks(n,!!r,r?[]:"",!1));return;case"textarea":J=z=null;for(A in r)if(g=r[A],r.hasOwnProperty(A)&&g!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:He(n,o,A,null,u,g)}for(S in u)if(g=u[S],y=r[S],u.hasOwnProperty(S)&&(g!=null||y!=null))switch(S){case"value":z=g;break;case"defaultValue":J=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&He(n,o,S,g,u,y)}Lh(n,z,J);return;case"option":for(var de in r)if(z=r[de],r.hasOwnProperty(de)&&z!=null&&!u.hasOwnProperty(de))switch(de){case"selected":n.selected=!1;break;default:He(n,o,de,null,u,z)}for(b in u)if(z=u[b],J=r[b],u.hasOwnProperty(b)&&z!==J&&(z!=null||J!=null))switch(b){case"selected":n.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:He(n,o,b,z,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in r)z=r[ve],r.hasOwnProperty(ve)&&z!=null&&!u.hasOwnProperty(ve)&&He(n,o,ve,null,u,z);for(G in u)if(z=u[G],J=r[G],u.hasOwnProperty(G)&&z!==J&&(z!=null||J!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,o));break;default:He(n,o,G,z,u,J)}return;default:if(Xu(o)){for(var Ye in r)z=r[Ye],r.hasOwnProperty(Ye)&&z!==void 0&&!u.hasOwnProperty(Ye)&&Uf(n,o,Ye,void 0,u,z);for(Q in u)z=u[Q],J=r[Q],!u.hasOwnProperty(Q)||z===J||z===void 0&&J===void 0||Uf(n,o,Q,z,u,J);return}}for(var P in r)z=r[P],r.hasOwnProperty(P)&&z!=null&&!u.hasOwnProperty(P)&&He(n,o,P,null,u,z);for($ in u)z=u[$],J=r[$],!u.hasOwnProperty($)||z===J||z==null&&J==null||He(n,o,$,z,u,J)}function Bg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var g=r[u],y=g.transferSize,S=g.initiatorType,A=g.duration;if(y&&A&&Bg(S)){for(S=0,A=g.responseEnd,u+=1;u<r.length;u++){var b=r[u],G=b.startTime;if(G>A)break;var Q=b.transferSize,$=b.initiatorType;Q&&Bg($)&&(b=b.responseEnd,S+=Q*(b<A?1:(A-G)/(b-G)))}if(--u,o+=8*(y+S)/(g.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Of=null,Vf=null;function Nl(n){return n.nodeType===9?n:n.ownerDocument}function Hg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yg(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function qf(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Pf=null;function iE(){var n=window.event;return n&&n.type==="popstate"?n===Pf?!1:(Pf=n,!0):(Pf=null,!1)}var Jg=typeof setTimeout=="function"?setTimeout:void 0,sE=typeof clearTimeout=="function"?clearTimeout:void 0,Xg=typeof Promise=="function"?Promise:void 0,oE=typeof queueMicrotask=="function"?queueMicrotask:typeof Xg<"u"?function(n){return Xg.resolve(null).then(n).catch(rE)}:Jg;function rE(n){setTimeout(function(){throw n})}function ji(n){return n==="head"}function Wg(n,o){var r=o,u=0;do{var g=r.nextSibling;if(n.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(g),bo(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Fr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Fr(r);for(var y=r.firstChild;y;){var S=y.nextSibling,A=y.nodeName;y[or]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=S}}else r==="body"&&Fr(n.ownerDocument.body);r=g}while(r);bo(o)}function Qg(n,o){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function Lf(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Lf(r),Bu(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function aE(n,o,r,u){for(;n.nodeType===1;){var g=r;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[or])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=xn(n.nextSibling),n===null)break}return null}function lE(n,o,r){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=xn(n.nextSibling),n===null))return null;return n}function Zg(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=xn(n.nextSibling),n===null))return null;return n}function Gf(n){return n.data==="$?"||n.data==="$~"}function Ff(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function uE(n,o){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function xn(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var zf=null;function Kg(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(o===0)return xn(n.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}n=n.nextSibling}return null}function $g(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return n;o--}else r!=="/$"&&r!=="/&"||o++}n=n.previousSibling}return null}function jg(n,o,r){switch(o=Nl(r),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Fr(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);Bu(n)}var wn=new Map,e_=new Set;function Ml(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ei=X.d;X.d={f:cE,r:fE,D:dE,C:hE,L:pE,m:mE,X:_E,S:gE,M:yE};function cE(){var n=Ei.f(),o=_l();return n||o}function fE(n){var o=Ws(n);o!==null&&o.tag===5&&o.type==="form"?_m(o):Ei.r(n)}var xo=typeof document>"u"?null:document;function t_(n,o,r){var u=xo;if(u&&typeof o=="string"&&o){var g=Tn(o);g='link[rel="'+n+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),e_.has(g)||(e_.add(g),n={rel:n,crossOrigin:r,href:o},u.querySelector(g)===null&&(o=u.createElement("link"),Ut(o,"link",n),Nt(o),u.head.appendChild(o)))}}function dE(n){Ei.D(n),t_("dns-prefetch",n,null)}function hE(n,o){Ei.C(n,o),t_("preconnect",n,o)}function pE(n,o,r){Ei.L(n,o,r);var u=xo;if(u&&n&&o){var g='link[rel="preload"][as="'+Tn(o)+'"]';o==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+Tn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+Tn(r.imageSizes)+'"]')):g+='[href="'+Tn(n)+'"]';var y=g;switch(o){case"style":y=wo(n);break;case"script":y=Ro(n)}wn.has(y)||(n=v({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:n,as:o},r),wn.set(y,n),u.querySelector(g)!==null||o==="style"&&u.querySelector(zr(y))||o==="script"&&u.querySelector(Br(y))||(o=u.createElement("link"),Ut(o,"link",n),Nt(o),u.head.appendChild(o)))}}function mE(n,o){Ei.m(n,o);var r=xo;if(r&&n){var u=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ro(n)}if(!wn.has(y)&&(n=v({rel:"modulepreload",href:n},o),wn.set(y,n),r.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Br(y)))return}u=r.createElement("link"),Ut(u,"link",n),Nt(u),r.head.appendChild(u)}}}function gE(n,o,r){Ei.S(n,o,r);var u=xo;if(u&&n){var g=Qs(u).hoistableStyles,y=wo(n);o=o||"default";var S=g.get(y);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(zr(y)))A.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":o},r),(r=wn.get(y))&&Bf(n,r);var b=S=u.createElement("link");Nt(b),Ut(b,"link",n),b._p=new Promise(function(G,Q){b.onload=G,b.onerror=Q}),b.addEventListener("load",function(){A.loading|=1}),b.addEventListener("error",function(){A.loading|=2}),A.loading|=4,xl(S,o,u)}S={type:"stylesheet",instance:S,count:1,state:A},g.set(y,S)}}}function _E(n,o){Ei.X(n,o);var r=xo;if(r&&n){var u=Qs(r).hoistableScripts,g=Ro(n),y=u.get(g);y||(y=r.querySelector(Br(g)),y||(n=v({src:n,async:!0},o),(o=wn.get(g))&&Hf(n,o),y=r.createElement("script"),Nt(y),Ut(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function yE(n,o){Ei.M(n,o);var r=xo;if(r&&n){var u=Qs(r).hoistableScripts,g=Ro(n),y=u.get(g);y||(y=r.querySelector(Br(g)),y||(n=v({src:n,async:!0,type:"module"},o),(o=wn.get(g))&&Hf(n,o),y=r.createElement("script"),Nt(y),Ut(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function n_(n,o,r,u){var g=(g=he.current)?Ml(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=wo(r.href),r=Qs(g).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=wo(r.href);var y=Qs(g).hoistableStyles,S=y.get(n);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=g.querySelector(zr(n)))&&!y._p&&(S.instance=y,S.state.loading=5),wn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},wn.set(n,r),y||vE(g,n,r,S.state))),o&&u===null)throw Error(s(528,""));return S}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ro(r),r=Qs(g).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function wo(n){return'href="'+Tn(n)+'"'}function zr(n){return'link[rel="stylesheet"]['+n+"]"}function i_(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function vE(n,o,r,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Ut(o,"link",r),Nt(o),n.head.appendChild(o))}function Ro(n){return'[src="'+Tn(n)+'"]'}function Br(n){return"script[async]"+n}function s_(n,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+Tn(r.href)+'"]');if(u)return o.instance=u,Nt(u),u;var g=v({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Nt(u),Ut(u,"style",g),xl(u,r.precedence,n),o.instance=u;case"stylesheet":g=wo(r.href);var y=n.querySelector(zr(g));if(y)return o.state.loading|=4,o.instance=y,Nt(y),y;u=i_(r),(g=wn.get(g))&&Bf(u,g),y=(n.ownerDocument||n).createElement("link"),Nt(y);var S=y;return S._p=new Promise(function(A,b){S.onload=A,S.onerror=b}),Ut(y,"link",u),o.state.loading|=4,xl(y,r.precedence,n),o.instance=y;case"script":return y=Ro(r.src),(g=n.querySelector(Br(y)))?(o.instance=g,Nt(g),g):(u=r,(g=wn.get(y))&&(u=v({},r),Hf(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),Nt(g),Ut(g,"link",u),n.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,xl(u,r.precedence,n));return o.instance}function xl(n,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===o)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(n,o.firstChild))}function Bf(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function Hf(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var wl=null;function o_(n,o,r){if(wl===null){var u=new Map,g=wl=new Map;g.set(r,u)}else g=wl,u=g.get(r),u||(u=new Map,g.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),g=0;g<r.length;g++){var y=r[g];if(!(y[or]||y[bt]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=n+S;var A=u.get(S);A?A.push(y):u.set(S,[y])}}return u}function r_(n,o,r){n=n.ownerDocument||n,n.head.insertBefore(r,o==="title"?n.querySelector("head > title"):null)}function TE(n,o,r){if(r===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function a_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function SE(n,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=wo(u.href),y=o.querySelector(zr(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Rl.bind(n),o.then(n,n)),r.state.loading|=4,r.instance=y,Nt(y);return}y=o.ownerDocument||o,u=i_(u),(g=wn.get(g))&&Bf(u,g),y=y.createElement("link"),Nt(y);var S=y;S._p=new Promise(function(A,b){S.onload=A,S.onerror=b}),Ut(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=Rl.bind(n),o.addEventListener("load",r),o.addEventListener("error",r))}}var Yf=0;function EE(n,o){return n.stylesheets&&n.count===0&&Dl(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&Dl(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&Yf===0&&(Yf=62500*nE());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Dl(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Yf?50:800)+o);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Rl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var bl=null;function Dl(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,bl=new Map,o.forEach(CE,n),bl=null,Rl.call(n))}function CE(n,o){if(!(o.state.loading&4)){var r=bl.get(n);if(r)var u=r.get(null);else{r=new Map,bl.set(n,r);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var S=g[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}g=o.instance,S=g.getAttribute("data-precedence"),y=r.get(S)||u,y===u&&r.set(null,g),r.set(S,g),this.count++,u=Rl.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),o.state.loading|=4}}var Hr={$$typeof:k,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function AE(n,o,r,u,g,y,S,A,b){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lu(0),this.hiddenUpdates=Lu(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function l_(n,o,r,u,g,y,S,A,b,G,Q,$){return n=new AE(n,o,r,S,b,G,Q,$,A),o=1,y===!0&&(o|=24),y=un(3,null,null,o),n.current=y,y.stateNode=n,o=Cc(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:o},xc(y),n}function u_(n){return n?(n=oo,n):oo}function c_(n,o,r,u,g,y){g=u_(g),u.context===null?u.context=g:u.pendingContext=g,u=zi(o),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Bi(n,u,o),r!==null&&($t(r,n,o),Er(r,n,o))}function f_(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<o?r:o}}function Jf(n,o){f_(n,o),(n=n.alternate)&&f_(n,o)}function d_(n){if(n.tag===13||n.tag===31){var o=Es(n,67108864);o!==null&&$t(o,n,67108864),Jf(n,67108864)}}function h_(n){if(n.tag===13||n.tag===31){var o=pn();o=Gu(o);var r=Es(n,o);r!==null&&$t(r,n,o),Jf(n,o)}}var Il=!0;function NE(n,o,r,u){var g=U.T;U.T=null;var y=X.p;try{X.p=2,Xf(n,o,r,u)}finally{X.p=y,U.T=g}}function ME(n,o,r,u){var g=U.T;U.T=null;var y=X.p;try{X.p=8,Xf(n,o,r,u)}finally{X.p=y,U.T=g}}function Xf(n,o,r,u){if(Il){var g=Wf(u);if(g===null)kf(n,o,u,kl,r),m_(n,u);else if(wE(g,n,o,r,u))u.stopPropagation();else if(m_(n,u),o&4&&-1<xE.indexOf(n)){for(;g!==null;){var y=Ws(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=_s(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var b=1<<31-an(S);A.entanglements[1]|=b,S&=~b}Zn(y),(Ve&6)===0&&(ml=Rt()+500,Pr(0))}}break;case 31:case 13:A=Es(y,2),A!==null&&$t(A,y,2),_l(),Jf(y,2)}if(y=Wf(u),y===null&&kf(n,o,u,kl,r),y===g)break;g=y}g!==null&&u.stopPropagation()}else kf(n,o,u,null,r)}}function Wf(n){return n=Qu(n),Qf(n)}var kl=null;function Qf(n){if(kl=null,n=Xs(n),n!==null){var o=l(n);if(o===null)n=null;else{var r=o.tag;if(r===13){if(n=c(o),n!==null)return n;n=null}else if(r===31){if(n=d(o),n!==null)return n;n=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return kl=n,null}function p_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pu()){case Sa:return 2;case Ch:return 8;case Ea:case h0:return 32;case Ah:return 268435456;default:return 32}default:return 32}}var Zf=!1,es=null,ts=null,ns=null,Yr=new Map,Jr=new Map,is=[],xE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m_(n,o){switch(n){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Yr.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(o.pointerId)}}function Xr(n,o,r,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Ws(o),o!==null&&d_(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function wE(n,o,r,u,g){switch(o){case"focusin":return es=Xr(es,n,o,r,u,g),!0;case"dragenter":return ts=Xr(ts,n,o,r,u,g),!0;case"mouseover":return ns=Xr(ns,n,o,r,u,g),!0;case"pointerover":var y=g.pointerId;return Yr.set(y,Xr(Yr.get(y)||null,n,o,r,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Jr.set(y,Xr(Jr.get(y)||null,n,o,r,u,g)),!0}return!1}function g_(n){var o=Xs(n.target);if(o!==null){var r=l(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){n.blockedOn=o,bh(n.priority,function(){h_(r)});return}}else if(o===31){if(o=d(r),o!==null){n.blockedOn=o,bh(n.priority,function(){h_(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ul(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var r=Wf(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);Wu=u,r.target.dispatchEvent(u),Wu=null}else return o=Ws(r),o!==null&&d_(o),n.blockedOn=r,!1;o.shift()}return!0}function __(n,o,r){Ul(n)&&r.delete(o)}function RE(){Zf=!1,es!==null&&Ul(es)&&(es=null),ts!==null&&Ul(ts)&&(ts=null),ns!==null&&Ul(ns)&&(ns=null),Yr.forEach(__),Jr.forEach(__)}function Ol(n,o){n.blockedOn===o&&(n.blockedOn=null,Zf||(Zf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,RE)))}var Vl=null;function y_(n){Vl!==n&&(Vl=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Vl===n&&(Vl=null);for(var o=0;o<n.length;o+=3){var r=n[o],u=n[o+1],g=n[o+2];if(typeof u!="function"){if(Qf(u||r)===null)continue;break}var y=Ws(r);y!==null&&(n.splice(o,3),o-=3,Xc(y,{pending:!0,data:g,method:r.method,action:u},u,g))}}))}function bo(n){function o(b){return Ol(b,n)}es!==null&&Ol(es,n),ts!==null&&Ol(ts,n),ns!==null&&Ol(ns,n),Yr.forEach(o),Jr.forEach(o);for(var r=0;r<is.length;r++){var u=is[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<is.length&&(r=is[0],r.blockedOn===null);)g_(r),r.blockedOn===null&&is.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var g=r[u],y=r[u+1],S=g[Jt]||null;if(typeof y=="function")S||y_(r);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,S=y[Jt]||null)A=S.formAction;else if(Qf(g)!==null)continue}else A=S.action;typeof A=="function"?r[u+1]=A:(r.splice(u,3),u-=3),y_(r)}}}function v_(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Kf(n){this._internalRoot=n}ql.prototype.render=Kf.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=pn();c_(r,u,n,o,null,null)},ql.prototype.unmount=Kf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;c_(n.current,2,null,n,null,null),_l(),o[Js]=null}};function ql(n){this._internalRoot=n}ql.prototype.unstable_scheduleHydration=function(n){if(n){var o=Rh();n={blockedOn:null,target:n,priority:o};for(var r=0;r<is.length&&o!==0&&o<is[r].priority;r++);is.splice(r,0,n),r===0&&g_(n)}};var T_=e.version;if(T_!=="19.2.0")throw Error(s(527,T_,"19.2.0"));X.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=h(o),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var bE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{nr=Pl.inject(bE),rn=Pl}catch{}}return Qr.createRoot=function(n,o){if(!a(n))throw Error(s(299));var r=!1,u="",g=xm,y=wm,S=Rm;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=l_(n,1,!1,null,null,r,u,null,g,y,S,v_),n[Js]=o.current,If(n),new Kf(o)},Qr.hydrateRoot=function(n,o,r){if(!a(n))throw Error(s(299));var u=!1,g="",y=xm,S=wm,A=Rm,b=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(b=r.formState)),o=l_(n,1,!0,o,r??null,u,g,b,y,S,A,v_),o.context=u_(null),r=o.current,u=pn(),u=Gu(u),g=zi(u),g.callback=null,Bi(r,g,u),r=u,o.current.lanes=r,sr(o,r),Zn(o),n[Js]=o.current,If(n),new ql(o)},Qr.version="19.2.0",Qr}var b_;function FE(){if(b_)return ed.exports;b_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ed.exports=GE(),ed.exports}var zE=FE();const BE=Rv(zE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YE=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),D_=i=>{const e=YE(i);return e.charAt(0).toUpperCase()+e.slice(1)},bv=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),JE=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=Pt.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:c,...d},m)=>Pt.createElement("svg",{ref:m,...XE,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:bv("lucide",a),...!l&&!JE(d)&&{"aria-hidden":"true"},...d},[...c.map(([h,_])=>Pt.createElement(h,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(i,e)=>{const t=Pt.forwardRef(({className:s,...a},l)=>Pt.createElement(WE,{ref:l,iconNode:e,className:bv(`lucide-${HE(D_(i))}`,`lucide-${i}`,s),...a}));return t.displayName=D_(i),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],I_=Gt("activity",QE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],k_=Gt("arrow-right",ZE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],$E=Gt("box",KE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],eC=Gt("chevron-down",jE);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nC=Gt("chevron-up",tC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],sC=Gt("cpu",iC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],rC=Gt("disc",oC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lC=Gt("eye",aC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],cC=Gt("lightbulb",uC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dC=Gt("loader-circle",fC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],pC=Gt("music",hC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],gC=Gt("play",mC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],yC=Gt("scan-eye",_C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["circle",{cx:"12",cy:"14",r:"4",key:"1jruaj"}],["path",{d:"M12 14h.01",key:"1etili"}]],TC=Gt("speaker",vC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],EC=Gt("square",SC);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],AC=Gt("upload",CC);var at=(i=>(i.IDLE="IDLE",i.ANALYZING="ANALYZING",i.READY="READY",i.PLAYING="PLAYING",i.ERROR="ERROR",i))(at||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NC,MC;function xC(){return{geminiUrl:NC,vertexUrl:MC}}function wC(i,e,t,s){var a,l;if(!(i!=null&&i.baseUrl)){const c=xC();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ri{}function ae(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function p(i,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in i))if(Array.isArray(t))i[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(i[d])){const m=i[d];if(Array.isArray(t))for(let h=0;h<m.length;h++){const _=m[h];p(_,e.slice(l+1),t[h])}else for(const h of m)p(h,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in i||(i[d]=[{}]);const m=i[d];p(m[0],e.slice(l+1),t);return}(!i[c]||typeof i[c]!="object")&&(i[c]={}),i=i[c]}const s=e[e.length-1],a=i[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(i,t):i[s]=t}function f(i,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let s=0;s<e.length;s++){if(typeof i!="object"||i===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in i){const c=i[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else i=i[a]}return i}catch(s){if(s instanceof TypeError)return t;throw s}}function RC(i,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),c=new Set;let d=-1;for(let m=0;m<a.length;m++)if(a[m]==="*"){d=m;break}if(d!==-1&&l.length>d)for(let m=d;m<l.length;m++){const h=l[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&c.add(h)}ad(i,a,l,0,c)}}function ad(i,e,t,s,a){if(s>=e.length||typeof i!="object"||i===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),d=i;if(c in d&&Array.isArray(d[c]))for(const m of d[c])ad(m,e,t,s+1,a)}else if(l==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const c=i,d=Object.keys(c).filter(h=>!h.startsWith("_")&&!a.has(h)),m={};for(const h of d)m[h]=c[h];for(const[h,_]of Object.entries(m)){const v=[];for(const T of t.slice(s))T==="*"?v.push(h):v.push(T);p(c,v,_)}for(const h of d)delete c[h]}}else{const c=i;l in c&&ad(c[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Md(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bC(i){const e={},t=f(i,["operationName"]);t!=null&&p(e,["operationName"],t);const s=f(i,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function DC(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response","generateVideoResponse"]);return c!=null&&p(e,["response"],kC(c)),e}function IC(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response"]);return c!=null&&p(e,["response"],UC(c)),e}function kC(i){const e={},t=f(i,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>OC(c))),p(e,["generatedVideos"],l)}const s=f(i,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const a=f(i,["raiMediaFilteredReasons"]);return a!=null&&p(e,["raiMediaFilteredReasons"],a),e}function UC(i){const e={},t=f(i,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>VC(c))),p(e,["generatedVideos"],l)}const s=f(i,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const a=f(i,["raiMediaFilteredReasons"]);return a!=null&&p(e,["raiMediaFilteredReasons"],a),e}function OC(i){const e={},t=f(i,["video"]);return t!=null&&p(e,["video"],zC(t)),e}function VC(i){const e={},t=f(i,["_self"]);return t!=null&&p(e,["video"],BC(t)),e}function qC(i){const e={},t=f(i,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function PC(i){const e={},t=f(i,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function LC(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response"]);return c!=null&&p(e,["response"],GC(c)),e}function GC(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["parent"]);s!=null&&p(e,["parent"],s);const a=f(i,["documentName"]);return a!=null&&p(e,["documentName"],a),e}function Dv(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response"]);return c!=null&&p(e,["response"],FC(c)),e}function FC(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["parent"]);s!=null&&p(e,["parent"],s);const a=f(i,["documentName"]);return a!=null&&p(e,["documentName"],a),e}function zC(i){const e={},t=f(i,["uri"]);t!=null&&p(e,["uri"],t);const s=f(i,["encodedVideo"]);s!=null&&p(e,["videoBytes"],Md(s));const a=f(i,["encoding"]);return a!=null&&p(e,["mimeType"],a),e}function BC(i){const e={},t=f(i,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=f(i,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],Md(s));const a=f(i,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var U_;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(U_||(U_={}));var O_;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(O_||(O_={}));var V_;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(V_||(V_={}));var vt;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(vt||(vt={}));var q_;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(q_||(q_={}));var P_;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(P_||(P_={}));var L_;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(L_||(L_={}));var G_;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(G_||(G_={}));var F_;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(F_||(F_={}));var z_;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.HIGH="HIGH"})(z_||(z_={}));var B_;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(B_||(B_={}));var H_;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(H_||(H_={}));var Y_;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Y_||(Y_={}));var J_;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(J_||(J_={}));var X_;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(X_||(X_={}));var W_;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(W_||(W_={}));var Q_;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Q_||(Q_={}));var Z_;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Z_||(Z_={}));var K_;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(K_||(K_={}));var Wl;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Wl||(Wl={}));var $_;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($_||($_={}));var j_;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(j_||(j_={}));var ey;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ey||(ey={}));var ld;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ld||(ld={}));var ty;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ty||(ty={}));var ny;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ny||(ny={}));var iy;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(iy||(iy={}));var sy;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(sy||(sy={}));var oy;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(oy||(oy={}));var ry;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ry||(ry={}));var ay;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(ay||(ay={}));var ly;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(ly||(ly={}));var uy;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(uy||(uy={}));var cy;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(cy||(cy={}));var fy;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fy||(fy={}));var dy;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dy||(dy={}));var hy;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(hy||(hy={}));var py;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(py||(py={}));var my;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(my||(my={}));var gy;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(gy||(gy={}));var _y;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(_y||(_y={}));var yy;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(yy||(yy={}));var vy;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(vy||(vy={}));var Ty;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(Ty||(Ty={}));var Sy;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Sy||(Sy={}));var Ey;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Ey||(Ey={}));var Cy;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cy||(Cy={}));var Ay;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Ay||(Ay={}));var Ny;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ny||(Ny={}));var My;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(My||(My={}));var xy;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(xy||(xy={}));var wy;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wy||(wy={}));var Ry;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ry||(Ry={}));var by;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(by||(by={}));var ko;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(ko||(ko={}));class ud{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zr{get text(){var e,t,s,a,l,c,d,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const v=[];for(const T of(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[E,C]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(C!==null||C!==void 0)&&v.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,h+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,s,a,l,c,d,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const v of(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[T,E]of Object.entries(v))T!=="inlineData"&&(E!==null||E!==void 0)&&_.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(h+=atob(v.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,s,a,l,c,d,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,s,a,l,c,d,m,h;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,s,a,l,c,d,m,h;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(m=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class Dy{}class Iy{}class HC{}class YC{}class JC{}class XC{}class ky{}class Uy{}class Oy{}class WC{}class Ql{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Ql;let a;const l=e;return t?a=IC(l):a=DC(l),Object.assign(s,a),s}}class Vy{}class qy{}class Py{}class QC{}class ZC{}class KC{}class xd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new xd,l=LC(e);return Object.assign(s,l),s}}class $C{}class jC{}class eA{}class Ly{}class tA{get text(){var e,t,s;let a="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,h]of Object.entries(d))m!=="text"&&m!=="thought"&&h!==null&&c.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,a+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,m]of Object.entries(c))d!=="inlineData"&&m!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class nA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class wd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new wd,l=Dv(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ue(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Iv(i,e){const t=Ue(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function kv(i){return Array.isArray(i)?i.map(e=>Zl(e)):[Zl(i)]}function Zl(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function Uv(i){const e=Zl(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ov(i){const e=Zl(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gy(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function Vv(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>Gy(e)):[Gy(i)]}function cd(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Fy(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function zy(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Lt(i){if(i==null)throw new Error("ContentUnion is required");return cd(i)?i:{role:"user",parts:Vv(i)}}function Rd(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Lt(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(i.isVertexAI()){const t=Lt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Lt(t)):[Lt(e)]}function Rn(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Fy(i)||zy(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Lt(i)]}const e=[],t=[],s=cd(i[0]);for(const a of i){const l=cd(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(Fy(a)||zy(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:Vv(t)}),e}function iA(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(vt).includes(t[0].toUpperCase())?t[0].toUpperCase():vt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(vt).includes(s.toUpperCase())?s.toUpperCase():vt.TYPE_UNSPECIFIED})}}function Vo(i){const e={},t=["items"],s=["anyOf"],a=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=i.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,i=l[1]):l[1].type==="null"&&(e.nullable=!0,i=l[0])),i.type instanceof Array&&iA(i.type,e);for(const[c,d]of Object.entries(i))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(vt).includes(d.toUpperCase())?d.toUpperCase():vt.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Vo(d);else if(s.includes(c)){const m=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}m.push(Vo(h))}e[c]=m}else if(a.includes(c)){const m={};for(const[h,_]of Object.entries(d))m[h]=Vo(_);e[c]=m}else{if(c==="additionalProperties")continue;e[c]=d}return e}function bd(i){return Vo(i)}function Dd(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Id(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Jo(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Vo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Vo(e.response));return i}function Xo(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of i)e.push(t);return e}function sA(i,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:a?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function bi(i,e){if(typeof e!="string")throw new Error("name must be a string");return sA(i,e,"cachedContents")}function qv(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function hs(i){return Md(i)}function oA(i){return i!=null&&typeof i=="object"&&"name"in i}function rA(i){return i!=null&&typeof i=="object"&&"video"in i}function aA(i){return i!=null&&typeof i=="object"&&"uri"in i}function Pv(i){var e;let t;if(oA(i)&&(t=i.name),!(aA(i)&&(t=i.uri,t===void 0))&&!(rA(i)&&(t=(e=i.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof i=="string"&&(t=i),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Lv(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Gv(i){for(const e of["models","tunedModels","publisherModels"])if(lA(i,e))return i[e];return[]}function lA(i,e){return i!==null&&typeof i=="object"&&e in i}function uA(i,e={}){const t=i,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function cA(i,e={}){const t=[],s=new Set;for(const a of i){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=uA(a,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function Fv(i,e){let t;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(i.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function fA(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zv(i){if(typeof i!="object"||i===null)return{};const e=i,t=e.inlinedResponses;if(typeof t!="object"||t===null)return i;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return i;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const m=c.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function Wo(i,e){const t=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Bv(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dA(i){const e={},t=f(i,["responsesFile"]);t!=null&&p(e,["fileName"],t);const s=f(i,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>JA(c))),p(e,["inlinedResponses"],l)}const a=f(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["inlinedEmbedContentResponses"],l)}return e}function hA(i){const e={},t=f(i,["predictionsFormat"]);t!=null&&p(e,["format"],t);const s=f(i,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const a=f(i,["bigqueryDestination","outputUri"]);return a!=null&&p(e,["bigqueryUri"],a),e}function pA(i){const e={},t=f(i,["format"]);t!=null&&p(e,["predictionsFormat"],t);const s=f(i,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const a=f(i,["bigqueryUri"]);if(a!=null&&p(e,["bigqueryDestination","outputUri"],a),f(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Hl(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const a=f(i,["metadata","state"]);a!=null&&p(e,["state"],Bv(a));const l=f(i,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const c=f(i,["metadata","endTime"]);c!=null&&p(e,["endTime"],c);const d=f(i,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const m=f(i,["metadata","model"]);m!=null&&p(e,["model"],m);const h=f(i,["metadata","output"]);return h!=null&&p(e,["dest"],dA(zv(h))),e}function fd(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["displayName"]);s!=null&&p(e,["displayName"],s);const a=f(i,["state"]);a!=null&&p(e,["state"],Bv(a));const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["createTime"]);c!=null&&p(e,["createTime"],c);const d=f(i,["startTime"]);d!=null&&p(e,["startTime"],d);const m=f(i,["endTime"]);m!=null&&p(e,["endTime"],m);const h=f(i,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=f(i,["model"]);_!=null&&p(e,["model"],_);const v=f(i,["inputConfig"]);v!=null&&p(e,["src"],mA(v));const T=f(i,["outputConfig"]);T!=null&&p(e,["dest"],hA(zv(T)));const E=f(i,["completionStats"]);return E!=null&&p(e,["completionStats"],E),e}function mA(i){const e={},t=f(i,["instancesFormat"]);t!=null&&p(e,["format"],t);const s=f(i,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const a=f(i,["bigquerySource","inputUri"]);return a!=null&&p(e,["bigqueryUri"],a),e}function gA(i,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&p(t,["fileName"],s);const a=f(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>YA(i,c))),p(t,["requests","requests"],l)}return t}function _A(i){const e={},t=f(i,["format"]);t!=null&&p(e,["instancesFormat"],t);const s=f(i,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const a=f(i,["bigqueryUri"]);if(a!=null&&p(e,["bigquerySource","inputUri"],a),f(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yA(i){const e={},t=f(i,["data"]);if(t!=null&&p(e,["data"],t),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function vA(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],Wo(i,s)),t}function TA(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],Wo(i,s)),t}function SA(i){const e={},t=f(i,["content"]);t!=null&&p(e,["content"],t);const s=f(i,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],EA(s));const a=f(i,["tokenCount"]);a!=null&&p(e,["tokenCount"],a);const l=f(i,["finishReason"]);l!=null&&p(e,["finishReason"],l);const c=f(i,["avgLogprobs"]);c!=null&&p(e,["avgLogprobs"],c);const d=f(i,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(i,["index"]);m!=null&&p(e,["index"],m);const h=f(i,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(i,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>E)),p(e,["safetyRatings"],T)}const v=f(i,["urlContextMetadata"]);return v!=null&&p(e,["urlContextMetadata"],v),e}function EA(i){const e={},t=f(i,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),p(e,["citations"],s)}return e}function Hv(i){const e={},t=f(i,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>jA(l))),p(e,["parts"],a)}const s=f(i,["role"]);return s!=null&&p(e,["role"],s),e}function CA(i,e){const t={},s=f(i,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),f(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function AA(i,e){const t={},s=f(i,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=f(i,["dest"]);return e!==void 0&&a!=null&&p(e,["outputConfig"],pA(fA(a))),t}function By(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["src"]);a!=null&&p(t,["batch","inputConfig"],gA(i,Fv(i,a)));const l=f(e,["config"]);return l!=null&&CA(l,t),t}function NA(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["model"],Ue(i,s));const a=f(e,["src"]);a!=null&&p(t,["inputConfig"],_A(Fv(i,a)));const l=f(e,["config"]);return l!=null&&AA(l,t),t}function MA(i,e){const t={},s=f(i,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),t}function xA(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["src"]);a!=null&&p(t,["batch","inputConfig"],UA(i,a));const l=f(e,["config"]);return l!=null&&MA(l,t),t}function wA(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],Wo(i,s)),t}function RA(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],Wo(i,s)),t}function bA(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["name"]);s!=null&&p(e,["name"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);return l!=null&&p(e,["error"],l),e}function DA(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["name"]);s!=null&&p(e,["name"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);return l!=null&&p(e,["error"],l),e}function IA(i,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Rd(i,s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["requests[]","request","content"],l)}const a=f(e,["config"]);return a!=null&&(p(t,["_self"],kA(a,t)),RC(t,{"requests[].*":"requests[].request.*"})),t}function kA(i,e){const t={},s=f(i,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const a=f(i,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const l=f(i,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function UA(i,e){const t={},s=f(e,["fileName"]);s!=null&&p(t,["file_name"],s);const a=f(e,["inlinedRequests"]);return a!=null&&p(t,["requests"],IA(i,a)),t}function OA(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(i,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function VA(i){const e={},t=f(i,["id"]);t!=null&&p(e,["id"],t);const s=f(i,["args"]);s!=null&&p(e,["args"],s);const a=f(i,["name"]);if(a!=null&&p(e,["name"],a),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qA(i){const e={},t=f(i,["mode"]);t!=null&&p(e,["mode"],t);const s=f(i,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function PA(i,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],Hv(Lt(a)));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&p(s,["topP"],c);const d=f(e,["topK"]);d!=null&&p(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(s,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(s,["stopSequences"],_);const v=f(e,["responseLogprobs"]);v!=null&&p(s,["responseLogprobs"],v);const T=f(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const E=f(e,["presencePenalty"]);E!=null&&p(s,["presencePenalty"],E);const C=f(e,["frequencyPenalty"]);C!=null&&p(s,["frequencyPenalty"],C);const N=f(e,["seed"]);N!=null&&p(s,["seed"],N);const M=f(e,["responseMimeType"]);M!=null&&p(s,["responseMimeType"],M);const x=f(e,["responseSchema"]);x!=null&&p(s,["responseSchema"],bd(x));const q=f(e,["responseJsonSchema"]);if(q!=null&&p(s,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=f(e,["safetySettings"]);if(t!==void 0&&k!=null){let H=k;Array.isArray(H)&&(H=H.map(ne=>e1(ne))),p(t,["safetySettings"],H)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let H=Xo(F);Array.isArray(H)&&(H=H.map(ne=>n1(Jo(ne)))),p(t,["tools"],H)}const R=f(e,["toolConfig"]);if(t!==void 0&&R!=null&&p(t,["toolConfig"],t1(R)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=f(e,["cachedContent"]);t!==void 0&&O!=null&&p(t,["cachedContent"],bi(i,O));const I=f(e,["responseModalities"]);I!=null&&p(s,["responseModalities"],I);const V=f(e,["mediaResolution"]);V!=null&&p(s,["mediaResolution"],V);const B=f(e,["speechConfig"]);if(B!=null&&p(s,["speechConfig"],Dd(B)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=f(e,["thinkingConfig"]);W!=null&&p(s,["thinkingConfig"],W);const Z=f(e,["imageConfig"]);return Z!=null&&p(s,["imageConfig"],HA(Z)),s}function LA(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(h=>SA(h))),p(e,["candidates"],m)}const a=f(i,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const l=f(i,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const c=f(i,["responseId"]);c!=null&&p(e,["responseId"],c);const d=f(i,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function GA(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],Wo(i,s)),t}function FA(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],Wo(i,s)),t}function zA(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(i,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function BA(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(i,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function HA(i){const e={},t=f(i,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=f(i,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),f(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YA(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["request","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let d=Rn(a);Array.isArray(d)&&(d=d.map(m=>Hv(m))),p(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&p(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&p(t,["request","generationConfig"],PA(i,c,f(t,["request"],{}))),t}function JA(i){const e={},t=f(i,["response"]);t!=null&&p(e,["response"],LA(t));const s=f(i,["error"]);return s!=null&&p(e,["error"],s),e}function XA(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);if(e!==void 0&&a!=null&&p(e,["_query","pageToken"],a),f(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function WA(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const l=f(i,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function QA(i){const e={},t=f(i,["config"]);return t!=null&&XA(t,e),e}function ZA(i){const e={},t=f(i,["config"]);return t!=null&&WA(t,e),e}function KA(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Hl(c))),p(e,["batchJobs"],l)}return e}function $A(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>fd(c))),p(e,["batchJobs"],l)}return e}function jA(i){const e={},t=f(i,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(i,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const a=f(i,["executableCode"]);a!=null&&p(e,["executableCode"],a);const l=f(i,["fileData"]);l!=null&&p(e,["fileData"],OA(l));const c=f(i,["functionCall"]);c!=null&&p(e,["functionCall"],VA(c));const d=f(i,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(i,["inlineData"]);m!=null&&p(e,["inlineData"],yA(m));const h=f(i,["text"]);h!=null&&p(e,["text"],h);const _=f(i,["thought"]);_!=null&&p(e,["thought"],_);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const T=f(i,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function e1(i){const e={},t=f(i,["category"]);if(t!=null&&p(e,["category"],t),f(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(i,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function t1(i){const e={},t=f(i,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],qA(t));const s=f(i,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function n1(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(v=>v)),p(e,["functionDeclarations"],_)}if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(i,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=f(i,["computerUse"]);a!=null&&p(e,["computerUse"],a);const l=f(i,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const c=f(i,["codeExecution"]);if(c!=null&&p(e,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["googleMaps"]);d!=null&&p(e,["googleMaps"],zA(d));const m=f(i,["googleSearch"]);m!=null&&p(e,["googleSearch"],BA(m));const h=f(i,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mi;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Mi||(Mi={}));class zs{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i1 extends Ri{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new zs(Mi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=By(this.apiClient,e),s=t._url,a=ae("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,m=d.requests,h=[];for(const _ of m){const v=Object.assign({},_);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const E=v.request;E.systemInstruction=T,v.request=E}h.push(v)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(c)s.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=NA(this.apiClient,e);return d=ae("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>fd(_))}else{const h=By(this.apiClient,e);return d=ae("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Hl(_))}}async createEmbeddingsInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xA(this.apiClient,e);return l=ae("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>Hl(m))}}async get(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=FA(this.apiClient,e);return d=ae("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>fd(_))}else{const h=GA(this.apiClient,e);return d=ae("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Hl(_))}}async cancel(e){var t,s,a,l;let c="",d={};if(this.apiClient.isVertexAI()){const m=TA(this.apiClient,e);c=ae("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=vA(this.apiClient,e);c=ae("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=ZA(e);return d=ae("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=$A(_),T=new Ly;return Object.assign(T,v),T})}else{const h=QA(e);return d=ae("batches",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=KA(_),T=new Ly;return Object.assign(T,v),T})}}async delete(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=RA(this.apiClient,e);return d=ae("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>DA(_))}else{const h=wA(this.apiClient,e);return d=ae("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>bA(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s1(i){const e={},t=f(i,["data"]);if(t!=null&&p(e,["data"],t),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Hy(i){const e={},t=f(i,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>x1(l))),p(e,["parts"],a)}const s=f(i,["role"]);return s!=null&&p(e,["role"],s),e}function o1(i,e){const t={},s=f(i,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const a=f(i,["expireTime"]);e!==void 0&&a!=null&&p(e,["expireTime"],a);const l=f(i,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const c=f(i,["contents"]);if(e!==void 0&&c!=null){let _=Rn(c);Array.isArray(_)&&(_=_.map(v=>Hy(v))),p(e,["contents"],_)}const d=f(i,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],Hy(Lt(d)));const m=f(i,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(v=>R1(v))),p(e,["tools"],_)}const h=f(i,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],w1(h)),f(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function r1(i,e){const t={},s=f(i,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const a=f(i,["expireTime"]);e!==void 0&&a!=null&&p(e,["expireTime"],a);const l=f(i,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const c=f(i,["contents"]);if(e!==void 0&&c!=null){let v=Rn(c);Array.isArray(v)&&(v=v.map(T=>T)),p(e,["contents"],v)}const d=f(i,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],Lt(d));const m=f(i,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(T=>b1(T))),p(e,["tools"],v)}const h=f(i,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=f(i,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function a1(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["model"],Iv(i,s));const a=f(e,["config"]);return a!=null&&o1(a,t),t}function l1(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["model"],Iv(i,s));const a=f(e,["config"]);return a!=null&&r1(a,t),t}function u1(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],bi(i,s)),t}function c1(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],bi(i,s)),t}function f1(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function d1(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function h1(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(i,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function p1(i){const e={},t=f(i,["id"]);t!=null&&p(e,["id"],t);const s=f(i,["args"]);s!=null&&p(e,["args"],s);const a=f(i,["name"]);if(a!=null&&p(e,["name"],a),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m1(i){const e={},t=f(i,["mode"]);t!=null&&p(e,["mode"],t);const s=f(i,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function g1(i){const e={};if(f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(i,["description"]);t!=null&&p(e,["description"],t);const s=f(i,["name"]);s!=null&&p(e,["name"],s);const a=f(i,["parameters"]);a!=null&&p(e,["parameters"],a);const l=f(i,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const c=f(i,["response"]);c!=null&&p(e,["response"],c);const d=f(i,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function _1(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],bi(i,s)),t}function y1(i,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],bi(i,s)),t}function v1(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(i,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function T1(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(i,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function S1(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);return e!==void 0&&a!=null&&p(e,["_query","pageToken"],a),t}function E1(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);return e!==void 0&&a!=null&&p(e,["_query","pageToken"],a),t}function C1(i){const e={},t=f(i,["config"]);return t!=null&&S1(t,e),e}function A1(i){const e={},t=f(i,["config"]);return t!=null&&E1(t,e),e}function N1(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["cachedContents"],l)}return e}function M1(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["cachedContents"],l)}return e}function x1(i){const e={},t=f(i,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(i,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const a=f(i,["executableCode"]);a!=null&&p(e,["executableCode"],a);const l=f(i,["fileData"]);l!=null&&p(e,["fileData"],h1(l));const c=f(i,["functionCall"]);c!=null&&p(e,["functionCall"],p1(c));const d=f(i,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(i,["inlineData"]);m!=null&&p(e,["inlineData"],s1(m));const h=f(i,["text"]);h!=null&&p(e,["text"],h);const _=f(i,["thought"]);_!=null&&p(e,["thought"],_);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const T=f(i,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function w1(i){const e={},t=f(i,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],m1(t));const s=f(i,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function R1(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(v=>v)),p(e,["functionDeclarations"],_)}if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(i,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=f(i,["computerUse"]);a!=null&&p(e,["computerUse"],a);const l=f(i,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const c=f(i,["codeExecution"]);if(c!=null&&p(e,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["googleMaps"]);d!=null&&p(e,["googleMaps"],v1(d));const m=f(i,["googleSearch"]);m!=null&&p(e,["googleSearch"],T1(m));const h=f(i,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function b1(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>g1(T))),p(e,["functionDeclarations"],v)}const s=f(i,["retrieval"]);s!=null&&p(e,["retrieval"],s);const a=f(i,["googleSearchRetrieval"]);a!=null&&p(e,["googleSearchRetrieval"],a);const l=f(i,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(i,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const d=f(i,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(i,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(i,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function D1(i,e){const t={},s=f(i,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const a=f(i,["expireTime"]);return e!==void 0&&a!=null&&p(e,["expireTime"],a),t}function I1(i,e){const t={},s=f(i,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const a=f(i,["expireTime"]);return e!==void 0&&a!=null&&p(e,["expireTime"],a),t}function k1(i,e){const t={},s=f(e,["name"]);s!=null&&p(t,["_url","name"],bi(i,s));const a=f(e,["config"]);return a!=null&&D1(a,t),t}function U1(i,e){const t={},s=f(e,["name"]);s!=null&&p(t,["_url","name"],bi(i,s));const a=f(e,["config"]);return a!=null&&I1(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O1 extends Ri{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zs(Mi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=l1(this.apiClient,e);return d=ae("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const h=a1(this.apiClient,e);return d=ae("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=y1(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const h=_1(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=c1(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=d1(_),T=new qy;return Object.assign(T,v),T})}else{const h=u1(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=f1(_),T=new qy;return Object.assign(T,v),T})}}async update(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=U1(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const h=k1(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=A1(e);return d=ae("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=M1(_),T=new Py;return Object.assign(T,v),T})}else{const h=C1(e);return d=ae("cachedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=N1(_),T=new Py;return Object.assign(T,v),T})}}}function Yy(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(i){return this instanceof tt?(this.v=i,this):new tt(i)}function qo(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(E){return function(C){return Promise.resolve(C).then(E,v)}}function d(E,C){s[E]&&(a[E]=function(N){return new Promise(function(M,x){l.push([E,N,M,x])>1||m(E,N)})},C&&(a[E]=C(a[E])))}function m(E,C){try{h(s[E](C))}catch(N){T(l[0][3],N)}}function h(E){E.value instanceof tt?Promise.resolve(E.value.v).then(_,v):T(l[0][2],E)}function _(E){m("next",E)}function v(E){m("throw",E)}function T(E,C){E(C),l.shift(),l.length&&m(l[0][0],l[0][1])}}function $r(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Yy=="function"?Yy(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=i[l]&&function(c){return new Promise(function(d,m){c=i[l](c),a(d,m,c.done,c.value)})}}function a(l,c,d,m){Promise.resolve(m).then(function(h){l({value:h,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V1(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Yv(t)}function Yv(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function q1(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jy(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let s=0;for(;s<t;)if(i[s].role==="user")e.push(i[s]),s++;else{const a=[];let l=!0;for(;s<t&&i[s].role==="model";)a.push(i[s]),l&&!Yv(i[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class P1{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new L1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class L1{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),q1(l)}async sendMessage(e){var t;await this.sendPromise;const s=Lt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const m=await a,h=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,_=m.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];_!=null&&(T=(d=_.slice(v))!==null&&d!==void 0?d:[]);const E=h?[h]:[];this.recordHistory(s,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=Lt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?Jy(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,a;return qo(this,arguments,function*(){var c,d,m,h;const _=[];try{for(var v=!0,T=$r(e),E;E=yield tt(T.next()),c=E.done,!c;v=!0){h=E.value,v=!1;const C=h;if(V1(C)){const N=(a=(s=C.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content;N!==void 0&&_.push(N)}yield yield tt(C)}}catch(C){d={error:C}}finally{try{!v&&!c&&(m=T.return)&&(yield tt(m.call(T)))}finally{if(d)throw d.error}}this.recordHistory(t,_)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Jy(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class du extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,du.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G1(i){const e={},t=f(i,["file"]);return t!=null&&p(e,["file"],t),e}function F1(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function z1(i){const e={},t=f(i,["name"]);return t!=null&&p(e,["_url","file"],Pv(t)),e}function B1(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function H1(i){const e={},t=f(i,["name"]);return t!=null&&p(e,["_url","file"],Pv(t)),e}function Y1(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);return e!==void 0&&a!=null&&p(e,["_query","pageToken"],a),t}function J1(i){const e={},t=f(i,["config"]);return t!=null&&Y1(t,e),e}function X1(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W1 extends Ri{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zs(Mi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=J1(e);return l=ae("files",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>{const h=X1(m),_=new $C;return Object.assign(_,h),_})}}async createInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=G1(e);return l=ae("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=F1(m),_=new jC;return Object.assign(_,h),_})}}async get(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=H1(e);return l=ae("files/{file}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=z1(e);return l=ae("files/{file}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>{const h=B1(m),_=new eA;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yl(i){const e={},t=f(i,["data"]);if(t!=null&&p(e,["data"],t),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Q1(i){const e={},t=f(i,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>fN(l))),p(e,["parts"],a)}const s=f(i,["role"]);return s!=null&&p(e,["role"],s),e}function Z1(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(i,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function K1(i){const e={},t=f(i,["id"]);t!=null&&p(e,["id"],t);const s=f(i,["args"]);s!=null&&p(e,["args"],s);const a=f(i,["name"]);if(a!=null&&p(e,["name"],a),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $1(i){const e={};if(f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(i,["description"]);t!=null&&p(e,["description"],t);const s=f(i,["name"]);s!=null&&p(e,["name"],s);const a=f(i,["parameters"]);a!=null&&p(e,["parameters"],a);const l=f(i,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const c=f(i,["response"]);c!=null&&p(e,["response"],c);const d=f(i,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function j1(i){const e={},t=f(i,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const s=f(i,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const a=f(i,["audioTimestamp"]);a!=null&&p(e,["audioTimestamp"],a);const l=f(i,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const c=f(i,["enableAffectiveDialog"]);c!=null&&p(e,["enableAffectiveDialog"],c);const d=f(i,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(i,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(i,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(i,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const v=f(i,["presencePenalty"]);v!=null&&p(e,["presencePenalty"],v);const T=f(i,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const E=f(i,["responseMimeType"]);E!=null&&p(e,["responseMimeType"],E);const C=f(i,["responseModalities"]);C!=null&&p(e,["responseModalities"],C);const N=f(i,["responseSchema"]);N!=null&&p(e,["responseSchema"],N);const M=f(i,["routingConfig"]);M!=null&&p(e,["routingConfig"],M);const x=f(i,["seed"]);x!=null&&p(e,["seed"],x);const q=f(i,["speechConfig"]);q!=null&&p(e,["speechConfig"],Jv(q));const k=f(i,["stopSequences"]);k!=null&&p(e,["stopSequences"],k);const F=f(i,["temperature"]);F!=null&&p(e,["temperature"],F);const R=f(i,["thinkingConfig"]);R!=null&&p(e,["thinkingConfig"],R);const O=f(i,["topK"]);O!=null&&p(e,["topK"],O);const I=f(i,["topP"]);if(I!=null&&p(e,["topP"],I),f(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function eN(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(i,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function tN(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(i,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function nN(i,e){const t={},s=f(i,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const a=f(i,["responseModalities"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","responseModalities"],a);const l=f(i,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const c=f(i,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const d=f(i,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(i,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(i,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(i,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const v=f(i,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],Id(v));const T=f(i,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const E=f(i,["enableAffectiveDialog"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=f(i,["systemInstruction"]);e!==void 0&&C!=null&&p(e,["setup","systemInstruction"],Q1(Lt(C)));const N=f(i,["tools"]);if(e!==void 0&&N!=null){let O=Xo(N);Array.isArray(O)&&(O=O.map(I=>hN(Jo(I)))),p(e,["setup","tools"],O)}const M=f(i,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],dN(M));const x=f(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","inputAudioTranscription"],x);const q=f(i,["outputAudioTranscription"]);e!==void 0&&q!=null&&p(e,["setup","outputAudioTranscription"],q);const k=f(i,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const F=f(i,["contextWindowCompression"]);e!==void 0&&F!=null&&p(e,["setup","contextWindowCompression"],F);const R=f(i,["proactivity"]);return e!==void 0&&R!=null&&p(e,["setup","proactivity"],R),t}function iN(i,e){const t={},s=f(i,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],j1(s));const a=f(i,["responseModalities"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","responseModalities"],a);const l=f(i,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const c=f(i,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const d=f(i,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(i,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(i,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(i,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const v=f(i,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],Jv(Id(v)));const T=f(i,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const E=f(i,["enableAffectiveDialog"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=f(i,["systemInstruction"]);e!==void 0&&C!=null&&p(e,["setup","systemInstruction"],Lt(C));const N=f(i,["tools"]);if(e!==void 0&&N!=null){let O=Xo(N);Array.isArray(O)&&(O=O.map(I=>pN(Jo(I)))),p(e,["setup","tools"],O)}const M=f(i,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],M);const x=f(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","inputAudioTranscription"],x);const q=f(i,["outputAudioTranscription"]);e!==void 0&&q!=null&&p(e,["setup","outputAudioTranscription"],q);const k=f(i,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const F=f(i,["contextWindowCompression"]);e!==void 0&&F!=null&&p(e,["setup","contextWindowCompression"],F);const R=f(i,["proactivity"]);return e!==void 0&&R!=null&&p(e,["setup","proactivity"],R),t}function sN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["setup","model"],Ue(i,s));const a=f(e,["config"]);return a!=null&&p(t,["config"],nN(a,t)),t}function oN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["setup","model"],Ue(i,s));const a=f(e,["config"]);return a!=null&&p(t,["config"],iN(a,t)),t}function rN(i){const e={},t=f(i,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function aN(i){const e={},t=f(i,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),p(e,["weightedPrompts"],s)}return e}function lN(i){const e={},t=f(i,["media"]);if(t!=null){let h=kv(t);Array.isArray(h)&&(h=h.map(_=>Yl(_))),p(e,["mediaChunks"],h)}const s=f(i,["audio"]);s!=null&&p(e,["audio"],Yl(Ov(s)));const a=f(i,["audioStreamEnd"]);a!=null&&p(e,["audioStreamEnd"],a);const l=f(i,["video"]);l!=null&&p(e,["video"],Yl(Uv(l)));const c=f(i,["text"]);c!=null&&p(e,["text"],c);const d=f(i,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(i,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function uN(i){const e={},t=f(i,["media"]);if(t!=null){let h=kv(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const s=f(i,["audio"]);s!=null&&p(e,["audio"],Ov(s));const a=f(i,["audioStreamEnd"]);a!=null&&p(e,["audioStreamEnd"],a);const l=f(i,["video"]);l!=null&&p(e,["video"],Uv(l));const c=f(i,["text"]);c!=null&&p(e,["text"],c);const d=f(i,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(i,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function cN(i){const e={},t=f(i,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const s=f(i,["serverContent"]);s!=null&&p(e,["serverContent"],s);const a=f(i,["toolCall"]);a!=null&&p(e,["toolCall"],a);const l=f(i,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const c=f(i,["usageMetadata"]);c!=null&&p(e,["usageMetadata"],mN(c));const d=f(i,["goAway"]);d!=null&&p(e,["goAway"],d);const m=f(i,["sessionResumptionUpdate"]);return m!=null&&p(e,["sessionResumptionUpdate"],m),e}function fN(i){const e={},t=f(i,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(i,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const a=f(i,["executableCode"]);a!=null&&p(e,["executableCode"],a);const l=f(i,["fileData"]);l!=null&&p(e,["fileData"],Z1(l));const c=f(i,["functionCall"]);c!=null&&p(e,["functionCall"],K1(c));const d=f(i,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(i,["inlineData"]);m!=null&&p(e,["inlineData"],Yl(m));const h=f(i,["text"]);h!=null&&p(e,["text"],h);const _=f(i,["thought"]);_!=null&&p(e,["thought"],_);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const T=f(i,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function dN(i){const e={},t=f(i,["handle"]);if(t!=null&&p(e,["handle"],t),f(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Jv(i){const e={},t=f(i,["languageCode"]);t!=null&&p(e,["languageCode"],t);const s=f(i,["voiceConfig"]);if(s!=null&&p(e,["voiceConfig"],s),f(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function hN(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(v=>v)),p(e,["functionDeclarations"],_)}if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(i,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=f(i,["computerUse"]);a!=null&&p(e,["computerUse"],a);const l=f(i,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const c=f(i,["codeExecution"]);if(c!=null&&p(e,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["googleMaps"]);d!=null&&p(e,["googleMaps"],eN(d));const m=f(i,["googleSearch"]);m!=null&&p(e,["googleSearch"],tN(m));const h=f(i,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function pN(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>$1(T))),p(e,["functionDeclarations"],v)}const s=f(i,["retrieval"]);s!=null&&p(e,["retrieval"],s);const a=f(i,["googleSearchRetrieval"]);a!=null&&p(e,["googleSearchRetrieval"],a);const l=f(i,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(i,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const d=f(i,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(i,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(i,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function mN(i){const e={},t=f(i,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const s=f(i,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const a=f(i,["candidatesTokenCount"]);a!=null&&p(e,["responseTokenCount"],a);const l=f(i,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const c=f(i,["thoughtsTokenCount"]);c!=null&&p(e,["thoughtsTokenCount"],c);const d=f(i,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const m=f(i,["promptTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(C=>C)),p(e,["promptTokensDetails"],E)}const h=f(i,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(C=>C)),p(e,["cacheTokensDetails"],E)}const _=f(i,["candidatesTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(C=>C)),p(e,["responseTokensDetails"],E)}const v=f(i,["toolUsePromptTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(C=>C)),p(e,["toolUsePromptTokensDetails"],E)}const T=f(i,["trafficType"]);return T!=null&&p(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gN(i){const e={},t=f(i,["data"]);if(t!=null&&p(e,["data"],t),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function _N(i){const e={},t=f(i,["content"]);t!=null&&p(e,["content"],t);const s=f(i,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],yN(s));const a=f(i,["tokenCount"]);a!=null&&p(e,["tokenCount"],a);const l=f(i,["finishReason"]);l!=null&&p(e,["finishReason"],l);const c=f(i,["avgLogprobs"]);c!=null&&p(e,["avgLogprobs"],c);const d=f(i,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(i,["index"]);m!=null&&p(e,["index"],m);const h=f(i,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(i,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>E)),p(e,["safetyRatings"],T)}const v=f(i,["urlContextMetadata"]);return v!=null&&p(e,["urlContextMetadata"],v),e}function yN(i){const e={},t=f(i,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),p(e,["citations"],s)}return e}function vN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let l=Rn(a);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["contents"],l)}return t}function TN(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["tokensInfo"],a)}return e}function SN(i){const e={},t=f(i,["values"]);t!=null&&p(e,["values"],t);const s=f(i,["statistics"]);return s!=null&&p(e,["statistics"],EN(s)),e}function EN(i){const e={},t=f(i,["truncated"]);t!=null&&p(e,["truncated"],t);const s=f(i,["token_count"]);return s!=null&&p(e,["tokenCount"],s),e}function hu(i){const e={},t=f(i,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>DM(l))),p(e,["parts"],a)}const s=f(i,["role"]);return s!=null&&p(e,["role"],s),e}function CN(i){const e={},t=f(i,["controlType"]);t!=null&&p(e,["controlType"],t);const s=f(i,["enableControlImageComputation"]);return s!=null&&p(e,["computeControl"],s),e}function AN(i){const e={};if(f(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function NN(i,e){const t={},s=f(i,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Lt(s));const a=f(i,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>Kv(d))),p(e,["tools"],c)}const l=f(i,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],gM(l)),t}function MN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let c=Rn(a);Array.isArray(c)&&(c=c.map(d=>hu(d))),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&AN(l),t}function xN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let c=Rn(a);Array.isArray(c)&&(c=c.map(d=>d)),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&NN(l,t),t}function wN(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["totalTokens"]);s!=null&&p(e,["totalTokens"],s);const a=f(i,["cachedContentTokenCount"]);return a!=null&&p(e,["cachedContentTokenCount"],a),e}function RN(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["totalTokens"]);return s!=null&&p(e,["totalTokens"],s),e}function bN(i,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],Ue(i,s)),t}function DN(i,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],Ue(i,s)),t}function IN(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function kN(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function UN(i,e){const t={},s=f(i,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=f(i,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const l=f(i,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const c=f(i,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const d=f(i,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(i,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(i,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const v=f(i,["includeSafetyAttributes"]);e!==void 0&&v!=null&&p(e,["parameters","includeSafetyAttributes"],v);const T=f(i,["includeRaiReason"]);e!==void 0&&T!=null&&p(e,["parameters","includeRaiReason"],T);const E=f(i,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const C=f(i,["outputMimeType"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","mimeType"],C);const N=f(i,["outputCompressionQuality"]);e!==void 0&&N!=null&&p(e,["parameters","outputOptions","compressionQuality"],N);const M=f(i,["addWatermark"]);e!==void 0&&M!=null&&p(e,["parameters","addWatermark"],M);const x=f(i,["labels"]);e!==void 0&&x!=null&&p(e,["labels"],x);const q=f(i,["editMode"]);e!==void 0&&q!=null&&p(e,["parameters","editMode"],q);const k=f(i,["baseSteps"]);return e!==void 0&&k!=null&&p(e,["parameters","editConfig","baseSteps"],k),t}function ON(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["prompt"]);a!=null&&p(t,["instances[0]","prompt"],a);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>qM(m))),p(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&UN(c,t),t}function VN(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>pu(l))),p(e,["generatedImages"],a)}return e}function qN(i,e){const t={},s=f(i,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const a=f(i,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const l=f(i,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function PN(i,e){const t={},s=f(i,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const a=f(i,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const l=f(i,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const c=f(i,["mimeType"]);e!==void 0&&c!=null&&p(e,["instances[]","mimeType"],c);const d=f(i,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),t}function LN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let d=Rd(i,a);Array.isArray(d)&&(d=d.map(m=>m)),p(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&qN(l,t);const c=f(e,["model"]);return c!==void 0&&p(t,["requests[]","model"],Ue(i,c)),t}function GN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let c=Rd(i,a);Array.isArray(c)&&(c=c.map(d=>d)),p(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&PN(l,t),t}function FN(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["embeddings"],l)}const a=f(i,["metadata"]);return a!=null&&p(e,["metadata"],a),e}function zN(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>SN(c))),p(e,["embeddings"],l)}const a=f(i,["metadata"]);return a!=null&&p(e,["metadata"],a),e}function BN(i){const e={},t=f(i,["endpoint"]);t!=null&&p(e,["name"],t);const s=f(i,["deployedModelId"]);return s!=null&&p(e,["deployedModelId"],s),e}function HN(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(i,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function YN(i){const e={},t=f(i,["id"]);t!=null&&p(e,["id"],t);const s=f(i,["args"]);s!=null&&p(e,["args"],s);const a=f(i,["name"]);if(a!=null&&p(e,["name"],a),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JN(i){const e={},t=f(i,["mode"]);t!=null&&p(e,["mode"],t);const s=f(i,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),f(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XN(i){const e={};if(f(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(i,["description"]);t!=null&&p(e,["description"],t);const s=f(i,["name"]);s!=null&&p(e,["name"],s);const a=f(i,["parameters"]);a!=null&&p(e,["parameters"],a);const l=f(i,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const c=f(i,["response"]);c!=null&&p(e,["response"],c);const d=f(i,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function WN(i,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],hu(Lt(a)));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&p(s,["topP"],c);const d=f(e,["topK"]);d!=null&&p(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(s,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(s,["stopSequences"],_);const v=f(e,["responseLogprobs"]);v!=null&&p(s,["responseLogprobs"],v);const T=f(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const E=f(e,["presencePenalty"]);E!=null&&p(s,["presencePenalty"],E);const C=f(e,["frequencyPenalty"]);C!=null&&p(s,["frequencyPenalty"],C);const N=f(e,["seed"]);N!=null&&p(s,["seed"],N);const M=f(e,["responseMimeType"]);M!=null&&p(s,["responseMimeType"],M);const x=f(e,["responseSchema"]);x!=null&&p(s,["responseSchema"],bd(x));const q=f(e,["responseJsonSchema"]);if(q!=null&&p(s,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=f(e,["safetySettings"]);if(t!==void 0&&k!=null){let H=k;Array.isArray(H)&&(H=H.map(ne=>PM(ne))),p(t,["safetySettings"],H)}const F=f(e,["tools"]);if(t!==void 0&&F!=null){let H=Xo(F);Array.isArray(H)&&(H=H.map(ne=>YM(Jo(ne)))),p(t,["tools"],H)}const R=f(e,["toolConfig"]);if(t!==void 0&&R!=null&&p(t,["toolConfig"],HM(R)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=f(e,["cachedContent"]);t!==void 0&&O!=null&&p(t,["cachedContent"],bi(i,O));const I=f(e,["responseModalities"]);I!=null&&p(s,["responseModalities"],I);const V=f(e,["mediaResolution"]);V!=null&&p(s,["mediaResolution"],V);const B=f(e,["speechConfig"]);if(B!=null&&p(s,["speechConfig"],Dd(B)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=f(e,["thinkingConfig"]);W!=null&&p(s,["thinkingConfig"],W);const Z=f(e,["imageConfig"]);return Z!=null&&p(s,["imageConfig"],SM(Z)),s}function QN(i,e,t){const s={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],Lt(a));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&p(s,["topP"],c);const d=f(e,["topK"]);d!=null&&p(s,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(s,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(s,["stopSequences"],_);const v=f(e,["responseLogprobs"]);v!=null&&p(s,["responseLogprobs"],v);const T=f(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const E=f(e,["presencePenalty"]);E!=null&&p(s,["presencePenalty"],E);const C=f(e,["frequencyPenalty"]);C!=null&&p(s,["frequencyPenalty"],C);const N=f(e,["seed"]);N!=null&&p(s,["seed"],N);const M=f(e,["responseMimeType"]);M!=null&&p(s,["responseMimeType"],M);const x=f(e,["responseSchema"]);x!=null&&p(s,["responseSchema"],bd(x));const q=f(e,["responseJsonSchema"]);q!=null&&p(s,["responseJsonSchema"],q);const k=f(e,["routingConfig"]);k!=null&&p(s,["routingConfig"],k);const F=f(e,["modelSelectionConfig"]);F!=null&&p(s,["modelConfig"],F);const R=f(e,["safetySettings"]);if(t!==void 0&&R!=null){let U=R;Array.isArray(U)&&(U=U.map(X=>X)),p(t,["safetySettings"],U)}const O=f(e,["tools"]);if(t!==void 0&&O!=null){let U=Xo(O);Array.isArray(U)&&(U=U.map(X=>Kv(Jo(X)))),p(t,["tools"],U)}const I=f(e,["toolConfig"]);t!==void 0&&I!=null&&p(t,["toolConfig"],I);const V=f(e,["labels"]);t!==void 0&&V!=null&&p(t,["labels"],V);const B=f(e,["cachedContent"]);t!==void 0&&B!=null&&p(t,["cachedContent"],bi(i,B));const W=f(e,["responseModalities"]);W!=null&&p(s,["responseModalities"],W);const Z=f(e,["mediaResolution"]);Z!=null&&p(s,["mediaResolution"],Z);const H=f(e,["speechConfig"]);H!=null&&p(s,["speechConfig"],Zv(Dd(H)));const ne=f(e,["audioTimestamp"]);ne!=null&&p(s,["audioTimestamp"],ne);const ie=f(e,["thinkingConfig"]);ie!=null&&p(s,["thinkingConfig"],ie);const fe=f(e,["imageConfig"]);return fe!=null&&p(s,["imageConfig"],EM(fe)),s}function Xy(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let c=Rn(a);Array.isArray(c)&&(c=c.map(d=>hu(d))),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&p(t,["generationConfig"],WN(i,l,t)),t}function Wy(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["contents"]);if(a!=null){let c=Rn(a);Array.isArray(c)&&(c=c.map(d=>d)),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&p(t,["generationConfig"],QN(i,l,t)),t}function Qy(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(h=>_N(h))),p(e,["candidates"],m)}const a=f(i,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const l=f(i,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const c=f(i,["responseId"]);c!=null&&p(e,["responseId"],c);const d=f(i,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function Zy(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const a=f(i,["createTime"]);a!=null&&p(e,["createTime"],a);const l=f(i,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const c=f(i,["promptFeedback"]);c!=null&&p(e,["promptFeedback"],c);const d=f(i,["responseId"]);d!=null&&p(e,["responseId"],d);const m=f(i,["usageMetadata"]);return m!=null&&p(e,["usageMetadata"],m),e}function ZN(i,e){const t={};if(f(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(i,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=f(i,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const l=f(i,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),f(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(i,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=f(i,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=f(i,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const h=f(i,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=f(i,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const v=f(i,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const T=f(i,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T),f(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(i,["imageSize"]);if(e!==void 0&&E!=null&&p(e,["parameters","sampleImageSize"],E),f(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function KN(i,e){const t={},s=f(i,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=f(i,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const l=f(i,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const c=f(i,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const d=f(i,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(i,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(i,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(i,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const v=f(i,["includeSafetyAttributes"]);e!==void 0&&v!=null&&p(e,["parameters","includeSafetyAttributes"],v);const T=f(i,["includeRaiReason"]);e!==void 0&&T!=null&&p(e,["parameters","includeRaiReason"],T);const E=f(i,["language"]);e!==void 0&&E!=null&&p(e,["parameters","language"],E);const C=f(i,["outputMimeType"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","mimeType"],C);const N=f(i,["outputCompressionQuality"]);e!==void 0&&N!=null&&p(e,["parameters","outputOptions","compressionQuality"],N);const M=f(i,["addWatermark"]);e!==void 0&&M!=null&&p(e,["parameters","addWatermark"],M);const x=f(i,["labels"]);e!==void 0&&x!=null&&p(e,["labels"],x);const q=f(i,["imageSize"]);e!==void 0&&q!=null&&p(e,["parameters","sampleImageSize"],q);const k=f(i,["enhancePrompt"]);return e!==void 0&&k!=null&&p(e,["parameters","enhancePrompt"],k),t}function $N(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["prompt"]);a!=null&&p(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&ZN(l,t),t}function jN(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["prompt"]);a!=null&&p(t,["instances[0]","prompt"],a);const l=f(e,["config"]);return l!=null&&KN(l,t),t}function eM(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>dM(c))),p(e,["generatedImages"],l)}const a=f(i,["positivePromptSafetyAttributes"]);return a!=null&&p(e,["positivePromptSafetyAttributes"],Wv(a)),e}function tM(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>pu(c))),p(e,["generatedImages"],l)}const a=f(i,["positivePromptSafetyAttributes"]);return a!=null&&p(e,["positivePromptSafetyAttributes"],Qv(a)),e}function nM(i,e){const t={},s=f(i,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),f(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(i,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),f(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(i,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=f(i,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const d=f(i,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),f(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(i,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const h=f(i,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),f(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(i,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],mu(_));const v=f(i,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>sx(E))),p(e,["instances[0]","referenceImages"],T)}if(f(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function iM(i,e){const t={},s=f(i,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=f(i,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const l=f(i,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const c=f(i,["durationSeconds"]);e!==void 0&&c!=null&&p(e,["parameters","durationSeconds"],c);const d=f(i,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const m=f(i,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const h=f(i,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=f(i,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const v=f(i,["pubsubTopic"]);e!==void 0&&v!=null&&p(e,["parameters","pubsubTopic"],v);const T=f(i,["negativePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","negativePrompt"],T);const E=f(i,["enhancePrompt"]);e!==void 0&&E!=null&&p(e,["parameters","enhancePrompt"],E);const C=f(i,["generateAudio"]);e!==void 0&&C!=null&&p(e,["parameters","generateAudio"],C);const N=f(i,["lastFrame"]);e!==void 0&&N!=null&&p(e,["instances[0]","lastFrame"],Fn(N));const M=f(i,["referenceImages"]);if(e!==void 0&&M!=null){let k=M;Array.isArray(k)&&(k=k.map(F=>ox(F))),p(e,["instances[0]","referenceImages"],k)}const x=f(i,["mask"]);e!==void 0&&x!=null&&p(e,["instances[0]","mask"],ix(x));const q=f(i,["compressionQuality"]);return e!==void 0&&q!=null&&p(e,["parameters","compressionQuality"],q),t}function sM(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response","generateVideoResponse"]);return c!=null&&p(e,["response"],lM(c)),e}function oM(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response"]);return c!=null&&p(e,["response"],uM(c)),e}function rM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["prompt"]);a!=null&&p(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&p(t,["instances[0]","image"],mu(l));const c=f(e,["video"]);c!=null&&p(t,["instances[0]","video"],$v(c));const d=f(e,["source"]);d!=null&&cM(d,t);const m=f(e,["config"]);return m!=null&&nM(m,t),t}function aM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["prompt"]);a!=null&&p(t,["instances[0]","prompt"],a);const l=f(e,["image"]);l!=null&&p(t,["instances[0]","image"],Fn(l));const c=f(e,["video"]);c!=null&&p(t,["instances[0]","video"],jv(c));const d=f(e,["source"]);d!=null&&fM(d,t);const m=f(e,["config"]);return m!=null&&iM(m,t),t}function lM(i){const e={},t=f(i,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>pM(c))),p(e,["generatedVideos"],l)}const s=f(i,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const a=f(i,["raiMediaFilteredReasons"]);return a!=null&&p(e,["raiMediaFilteredReasons"],a),e}function uM(i){const e={},t=f(i,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>mM(c))),p(e,["generatedVideos"],l)}const s=f(i,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const a=f(i,["raiMediaFilteredReasons"]);return a!=null&&p(e,["raiMediaFilteredReasons"],a),e}function cM(i,e){const t={},s=f(i,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=f(i,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],mu(a));const l=f(i,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],$v(l)),t}function fM(i,e){const t={},s=f(i,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=f(i,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Fn(a));const l=f(i,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],jv(l)),t}function dM(i){const e={},t=f(i,["_self"]);t!=null&&p(e,["image"],CM(t));const s=f(i,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const a=f(i,["_self"]);return a!=null&&p(e,["safetyAttributes"],Wv(a)),e}function pu(i){const e={},t=f(i,["_self"]);t!=null&&p(e,["image"],Xv(t));const s=f(i,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const a=f(i,["_self"]);a!=null&&p(e,["safetyAttributes"],Qv(a));const l=f(i,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function hM(i){const e={},t=f(i,["_self"]);t!=null&&p(e,["mask"],Xv(t));const s=f(i,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["labels"],a)}return e}function pM(i){const e={},t=f(i,["video"]);return t!=null&&p(e,["video"],tx(t)),e}function mM(i){const e={},t=f(i,["_self"]);return t!=null&&p(e,["video"],nx(t)),e}function gM(i){const e={},t=f(i,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const s=f(i,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const a=f(i,["audioTimestamp"]);a!=null&&p(e,["audioTimestamp"],a);const l=f(i,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const c=f(i,["enableAffectiveDialog"]);c!=null&&p(e,["enableAffectiveDialog"],c);const d=f(i,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(i,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(i,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(i,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const v=f(i,["presencePenalty"]);v!=null&&p(e,["presencePenalty"],v);const T=f(i,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const E=f(i,["responseMimeType"]);E!=null&&p(e,["responseMimeType"],E);const C=f(i,["responseModalities"]);C!=null&&p(e,["responseModalities"],C);const N=f(i,["responseSchema"]);N!=null&&p(e,["responseSchema"],N);const M=f(i,["routingConfig"]);M!=null&&p(e,["routingConfig"],M);const x=f(i,["seed"]);x!=null&&p(e,["seed"],x);const q=f(i,["speechConfig"]);q!=null&&p(e,["speechConfig"],Zv(q));const k=f(i,["stopSequences"]);k!=null&&p(e,["stopSequences"],k);const F=f(i,["temperature"]);F!=null&&p(e,["temperature"],F);const R=f(i,["thinkingConfig"]);R!=null&&p(e,["thinkingConfig"],R);const O=f(i,["topK"]);O!=null&&p(e,["topK"],O);const I=f(i,["topP"]);if(I!=null&&p(e,["topP"],I),f(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _M(i,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],Ue(i,s)),t}function yM(i,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],Ue(i,s)),t}function vM(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(i,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function TM(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(i,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function SM(i){const e={},t=f(i,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=f(i,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),f(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function EM(i){const e={},t=f(i,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=f(i,["imageSize"]);s!=null&&p(e,["imageSize"],s);const a=f(i,["outputMimeType"]);a!=null&&p(e,["imageOutputOptions","mimeType"],a);const l=f(i,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function CM(i){const e={},t=f(i,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],hs(t));const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Xv(i){const e={},t=f(i,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=f(i,["bytesBase64Encoded"]);s!=null&&p(e,["imageBytes"],hs(s));const a=f(i,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function mu(i){const e={};if(f(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(i,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],hs(t));const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Fn(i){const e={},t=f(i,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=f(i,["imageBytes"]);s!=null&&p(e,["bytesBase64Encoded"],hs(s));const a=f(i,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function AM(i,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&p(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],Lv(i,d)),s}function NM(i,e,t){const s={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&p(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],Lv(i,d)),s}function MM(i,e){const t={},s=f(e,["config"]);return s!=null&&AM(i,s,t),t}function xM(i,e){const t={},s=f(e,["config"]);return s!=null&&NM(i,s,t),t}function wM(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["_self"]);if(a!=null){let l=Gv(a);Array.isArray(l)&&(l=l.map(c=>dd(c))),p(e,["models"],l)}return e}function RM(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["_self"]);if(a!=null){let l=Gv(a);Array.isArray(l)&&(l=l.map(c=>hd(c))),p(e,["models"],l)}return e}function bM(i){const e={},t=f(i,["maskMode"]);t!=null&&p(e,["maskMode"],t);const s=f(i,["segmentationClasses"]);s!=null&&p(e,["maskClasses"],s);const a=f(i,["maskDilation"]);return a!=null&&p(e,["dilation"],a),e}function dd(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["displayName"]);s!=null&&p(e,["displayName"],s);const a=f(i,["description"]);a!=null&&p(e,["description"],a);const l=f(i,["version"]);l!=null&&p(e,["version"],l);const c=f(i,["_self"]);c!=null&&p(e,["tunedModelInfo"],JM(c));const d=f(i,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const m=f(i,["outputTokenLimit"]);m!=null&&p(e,["outputTokenLimit"],m);const h=f(i,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=f(i,["temperature"]);_!=null&&p(e,["temperature"],_);const v=f(i,["maxTemperature"]);v!=null&&p(e,["maxTemperature"],v);const T=f(i,["topP"]);T!=null&&p(e,["topP"],T);const E=f(i,["topK"]);E!=null&&p(e,["topK"],E);const C=f(i,["thinking"]);return C!=null&&p(e,["thinking"],C),e}function hd(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["displayName"]);s!=null&&p(e,["displayName"],s);const a=f(i,["description"]);a!=null&&p(e,["description"],a);const l=f(i,["versionId"]);l!=null&&p(e,["version"],l);const c=f(i,["deployedModels"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(T=>BN(T))),p(e,["endpoints"],v)}const d=f(i,["labels"]);d!=null&&p(e,["labels"],d);const m=f(i,["_self"]);m!=null&&p(e,["tunedModelInfo"],XM(m));const h=f(i,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=f(i,["checkpoints"]);if(_!=null){let v=_;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["checkpoints"],v)}return e}function DM(i){const e={},t=f(i,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(i,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const a=f(i,["executableCode"]);a!=null&&p(e,["executableCode"],a);const l=f(i,["fileData"]);l!=null&&p(e,["fileData"],HN(l));const c=f(i,["functionCall"]);c!=null&&p(e,["functionCall"],YN(c));const d=f(i,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(i,["inlineData"]);m!=null&&p(e,["inlineData"],gN(m));const h=f(i,["text"]);h!=null&&p(e,["text"],h);const _=f(i,["thought"]);_!=null&&p(e,["thought"],_);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const T=f(i,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function IM(i){const e={},t=f(i,["productImage"]);return t!=null&&p(e,["image"],Fn(t)),e}function kM(i,e){const t={},s=f(i,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=f(i,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const l=f(i,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const c=f(i,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const d=f(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const m=f(i,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=f(i,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=f(i,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const v=f(i,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const T=f(i,["enhancePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T);const E=f(i,["labels"]);return e!==void 0&&E!=null&&p(e,["labels"],E),t}function UM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["source"]);a!=null&&VM(a,t);const l=f(e,["config"]);return l!=null&&kM(l,t),t}function OM(i){const e={},t=f(i,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>pu(a))),p(e,["generatedImages"],s)}return e}function VM(i,e){const t={},s=f(i,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=f(i,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],Fn(a));const l=f(i,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>IM(d))),p(e,["instances[0]","productImages"],c)}return t}function qM(i){const e={},t=f(i,["referenceImage"]);t!=null&&p(e,["referenceImage"],Fn(t));const s=f(i,["referenceId"]);s!=null&&p(e,["referenceId"],s);const a=f(i,["referenceType"]);a!=null&&p(e,["referenceType"],a);const l=f(i,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],bM(l));const c=f(i,["controlImageConfig"]);c!=null&&p(e,["controlImageConfig"],CN(c));const d=f(i,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const m=f(i,["subjectImageConfig"]);return m!=null&&p(e,["subjectImageConfig"],m),e}function Wv(i){const e={},t=f(i,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=f(i,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const a=f(i,["contentType"]);return a!=null&&p(e,["contentType"],a),e}function Qv(i){const e={},t=f(i,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=f(i,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const a=f(i,["contentType"]);return a!=null&&p(e,["contentType"],a),e}function PM(i){const e={},t=f(i,["category"]);if(t!=null&&p(e,["category"],t),f(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(i,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function LM(i){const e={},t=f(i,["image"]);return t!=null&&p(e,["image"],Fn(t)),e}function GM(i,e){const t={},s=f(i,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const a=f(i,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const l=f(i,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const c=f(i,["maskDilation"]);e!==void 0&&c!=null&&p(e,["parameters","maskDilation"],c);const d=f(i,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const m=f(i,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),t}function FM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["source"]);a!=null&&BM(a,t);const l=f(e,["config"]);return l!=null&&GM(l,t),t}function zM(i){const e={},t=f(i,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>hM(a))),p(e,["generatedMasks"],s)}return e}function BM(i,e){const t={},s=f(i,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const a=f(i,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],Fn(a));const l=f(i,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],LM(l)),t}function Zv(i){const e={},t=f(i,["languageCode"]);t!=null&&p(e,["languageCode"],t);const s=f(i,["voiceConfig"]);if(s!=null&&p(e,["voiceConfig"],s),f(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function HM(i){const e={},t=f(i,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],JN(t));const s=f(i,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function YM(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(v=>v)),p(e,["functionDeclarations"],_)}if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(i,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=f(i,["computerUse"]);a!=null&&p(e,["computerUse"],a);const l=f(i,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const c=f(i,["codeExecution"]);if(c!=null&&p(e,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["googleMaps"]);d!=null&&p(e,["googleMaps"],vM(d));const m=f(i,["googleSearch"]);m!=null&&p(e,["googleSearch"],TM(m));const h=f(i,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Kv(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>XN(T))),p(e,["functionDeclarations"],v)}const s=f(i,["retrieval"]);s!=null&&p(e,["retrieval"],s);const a=f(i,["googleSearchRetrieval"]);a!=null&&p(e,["googleSearchRetrieval"],a);const l=f(i,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),f(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(i,["codeExecution"]);c!=null&&p(e,["codeExecution"],c);const d=f(i,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(i,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(i,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(i,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function JM(i){const e={},t=f(i,["baseModel"]);t!=null&&p(e,["baseModel"],t);const s=f(i,["createTime"]);s!=null&&p(e,["createTime"],s);const a=f(i,["updateTime"]);return a!=null&&p(e,["updateTime"],a),e}function XM(i){const e={},t=f(i,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const s=f(i,["createTime"]);s!=null&&p(e,["createTime"],s);const a=f(i,["updateTime"]);return a!=null&&p(e,["updateTime"],a),e}function WM(i,e){const t={},s=f(i,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=f(i,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const l=f(i,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function QM(i,e){const t={},s=f(i,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=f(i,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const l=f(i,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function ZM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","name"],Ue(i,s));const a=f(e,["config"]);return a!=null&&WM(a,t),t}function KM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["config"]);return a!=null&&QM(a,t),t}function $M(i,e){const t={},s=f(i,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=f(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=f(i,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=f(i,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const d=f(i,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=f(i,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const h=f(i,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(i,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const v=f(i,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const T=f(i,["numberOfImages"]);e!==void 0&&T!=null&&p(e,["parameters","sampleCount"],T);const E=f(i,["mode"]);return e!==void 0&&E!=null&&p(e,["parameters","mode"],E),t}function jM(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],Ue(i,s));const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],Fn(a));const l=f(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&$M(c,t),t}function ex(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>pu(l))),p(e,["generatedImages"],a)}return e}function tx(i){const e={},t=f(i,["uri"]);t!=null&&p(e,["uri"],t);const s=f(i,["encodedVideo"]);s!=null&&p(e,["videoBytes"],hs(s));const a=f(i,["encoding"]);return a!=null&&p(e,["mimeType"],a),e}function nx(i){const e={},t=f(i,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=f(i,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],hs(s));const a=f(i,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}function ix(i){const e={},t=f(i,["image"]);t!=null&&p(e,["_self"],Fn(t));const s=f(i,["maskMode"]);return s!=null&&p(e,["maskMode"],s),e}function sx(i){const e={},t=f(i,["image"]);t!=null&&p(e,["image"],mu(t));const s=f(i,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function ox(i){const e={},t=f(i,["image"]);t!=null&&p(e,["image"],Fn(t));const s=f(i,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function $v(i){const e={},t=f(i,["uri"]);t!=null&&p(e,["uri"],t);const s=f(i,["videoBytes"]);s!=null&&p(e,["encodedVideo"],hs(s));const a=f(i,["mimeType"]);return a!=null&&p(e,["encoding"],a),e}function jv(i){const e={},t=f(i,["uri"]);t!=null&&p(e,["gcsUri"],t);const s=f(i,["videoBytes"]);s!=null&&p(e,["bytesBase64Encoded"],hs(s));const a=f(i,["mimeType"]);return a!=null&&p(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rx="Content-Type",ax="X-Server-Timeout",lx="User-Agent",pd="x-goog-api-client",ux="1.30.0",cx=`google-genai-sdk/${ux}`,fx="v1beta1",dx="v1beta",Ky=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class hx{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:fx,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:dx,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))a.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&px(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await $y(a),new ud(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await $y(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var t;return qo(this,arguments,function*(){const a=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:m}=yield tt(a.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=l.decode(m,{stream:!0});try{const v=JSON.parse(h);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),E=T.status,C=T.code,N=`got status: ${E}. ${JSON.stringify(v)}`;if(C>=400&&C<600)throw new du({message:N,status:C})}}catch(v){if(v.name==="ApiError")throw v}c+=h;let _=c.match(Ky);for(;_;){const v=_[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield tt(new ud(T)),c=c.slice(_[0].length),_=c.match(Ky)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=cx+" "+this.clientOptions.userAgentExtra;return e[lx]=t,e[pd]=t,e[rx]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(ax,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=d;const m={file:a},h=this.getFileName(e),_=ae("upload/v1beta/files",m._url),v=await this.fetchUploadUrl(_,a.sizeBytes,a.mimeType,h,m,t==null?void 0:t.httpOptions);return l.upload(e,v,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,c=await l.stat(t),d=String(c.size),m=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:c.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),v={};s!=null&&s.customMetadata&&(v.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(v.chunkingConfig=s.chunkingConfig);const T=await this.fetchUploadUrl(h,d,m,_,v,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,c){var d;let m={};c?m=c:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function $y(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const t=i.status;let s;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new du({message:a,status:t}):new Error(a)}}function px(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof i.body=="string"&&i.body.length>0)try{const l=JSON.parse(i.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const m in c)if(Object.prototype.hasOwnProperty.call(c,m)){const h=c[m],_=d[m];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[m]=s(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[m]=h)}return d}const a=s(t,e);i.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mx="mcp_used/unknown";let gx=!1;function eT(i){for(const e of i)if(_x(e)||typeof e=="object"&&"inputSchema"in e)return!0;return gx}function tT(i){var e;const t=(e=i[pd])!==null&&e!==void 0?e:"";i[pd]=(t+` ${mx}`).trimStart()}function _x(i){return i!==null&&typeof i=="object"&&i instanceof kd}function yx(i,e=100){return qo(this,arguments,function*(){let s,a=0;for(;a<e;){const l=yield tt(i.listTools({cursor:s}));for(const c of l.tools)yield yield tt(c),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class kd{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new kd(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const _ of this.mcpClients)try{for(var d=!0,m=(t=void 0,$r(yx(_))),h;h=await m.next(),e=h.done,!e;d=!0){a=h.value,d=!1;const v=a;c.push(v);const T=v.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=_}}catch(v){t={error:v}}finally{try{!d&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),cA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vx(i,e,t){const s=new nA;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class Tx{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=Cx(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(k=>{h=k}),v=e.callbacks,T=function(){h({})},E=this.apiClient,C={onopen:T,onmessage:k=>{vx(E,v.onmessage,k)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(k){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(k){}},N=this.webSocketFactory.create(m,Ex(c),C);N.connect(),await _;const q={setup:{model:Ue(this.apiClient,e.model)}};return N.send(JSON.stringify(q)),new Sx(N,this.apiClient)}}class Sx{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=aN(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=rN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ko.PLAY)}pause(){this.sendPlaybackControl(ko.PAUSE)}stop(){this.sendPlaybackControl(ko.STOP)}resetContext(){this.sendPlaybackControl(ko.RESET_CONTEXT)}close(){this.conn.close()}}function Ex(i){const e={};return i.forEach((t,s)=>{e[s]=t}),e}function Cx(i){const e=new Headers;for(const[t,s]of Object.entries(i))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ax="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Nx(i,e,t){const s=new tA;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(i.isVertexAI()){const c=cN(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class Mx{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new Tx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&eT(e.config.tools)&&tT(v);const T=bx(v);if(this.apiClient.isVertexAI())_=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_);else{const B=this.apiClient.getApiKey();let W="BidiGenerateContent",Z="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),W="BidiGenerateContentConstrained",Z="access_token"),_=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${W}?${Z}=${B}`}let E=()=>{};const C=new Promise(B=>{E=B}),N=e.callbacks,M=function(){var B;(B=N==null?void 0:N.onopen)===null||B===void 0||B.call(N),E({})},x=this.apiClient,q={onopen:M,onmessage:B=>{Nx(x,N.onmessage,B)},onerror:(t=N==null?void 0:N.onerror)!==null&&t!==void 0?t:function(B){},onclose:(s=N==null?void 0:N.onclose)!==null&&s!==void 0?s:function(B){}},k=this.webSocketFactory.create(_,Rx(T),q);k.connect(),await C;let F=Ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const B=this.apiClient.getProject(),W=this.apiClient.getLocation();F=`projects/${B}/locations/${W}/`+F}let R={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Wl.AUDIO]}:e.config.responseModalities=[Wl.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],I=[];for(const B of O)if(this.isCallableTool(B)){const W=B;I.push(await W.tool())}else I.push(B);I.length>0&&(e.config.tools=I);const V={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=oN(this.apiClient,V):R=sN(this.apiClient,V),delete R.config,k.send(JSON.stringify(R)),new wx(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const xx={turnComplete:!0};class wx{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Rn(t.turns),e.isVertexAI()||(s=s.map(a=>hu(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Ax)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},xx),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:uN(e)}:t={realtimeInput:lN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Rx(i){const e={};return i.forEach((t,s)=>{e[s]=t}),e}function bx(i){const e=new Headers;for(const[t,s]of Object.entries(i))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jy=10;function ev(i){var e,t,s;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(Po(c)){a=!0;break}if(!a)return!0;const l=(s=i==null?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Po(i){return"callTool"in i&&typeof i.callTool=="function"}function Dx(i){var e,t,s;return(s=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Po(a)))!==null&&s!==void 0?s:!1}function tv(i){var e;const t=[];return!((e=i==null?void 0:i.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((s,a)=>{if(Po(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function nv(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ix extends Ri{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,c,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Dx(t)||ev(t.config))return await this.generateContentInternal(m);const h=tv(t);if(h.length>0){const N=h.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let _,v;const T=Rn(m.contents),E=(l=(a=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:jy;let C=0;for(;C<E&&(_=await this.generateContentInternal(m),!(!_.functionCalls||_.functionCalls.length===0));){const N=_.candidates[0].content,M=[];for(const x of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Po(x)){const k=await x.callTool(_.functionCalls);M.push(...k)}C++,v={role:"user",parts:M},m.contents=Rn(m.contents),m.contents.push(N),m.contents.push(v),nv(m.config)&&(T.push(N),T.push(v))}return nv(m.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async t=>{var s,a,l,c,d;if(this.maybeMoveToResponseJsonSchem(t),ev(t.config)){const v=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(v)}const m=tv(t);if(m.length>0){const v=m.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const c=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((a=m==null?void 0:m.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new zs(Mi.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,c,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async m=>Po(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&eT(e.config.tools)){const m=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),tT(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Po(c)){const d=c,m=await d.tool();for(const h of(a=m.functionDeclarations)!==null&&a!==void 0?a:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,d)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:jy;let c=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(h,_,v){var T,E;return qo(this,arguments,function*(){for(var C,N,M,x;d<l;){c&&(d++,c=!1);const R=yield tt(h.processParamsMaybeAddMcpUsage(v)),O=yield tt(h.generateContentStreamInternal(R)),I=[],V=[];try{for(var q=!0,k=(N=void 0,$r(O)),F;F=yield tt(k.next()),C=F.done,!C;q=!0){x=F.value,q=!1;const B=x;if(yield yield tt(B),B.candidates&&(!((T=B.candidates[0])===null||T===void 0)&&T.content)){V.push(B.candidates[0].content);for(const W of(E=B.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(d<l&&W.functionCall){if(!W.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(W.functionCall.name)){const Z=yield tt(_.get(W.functionCall.name).callTool([W.functionCall]));I.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${W.functionCall.name}`)}}}}catch(B){N={error:B}}finally{try{!q&&!C&&(M=k.return)&&(yield tt(M.call(k)))}finally{if(N)throw N.error}}if(I.length>0){c=!0;const B=new Zr;B.candidates=[{content:{role:"user",parts:I}}],yield yield tt(B);const W=[];W.push(...V),W.push({role:"user",parts:I});const Z=Rn(v.contents).concat(W);v.contents=Z}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=Wy(this.apiClient,e);return d=ae("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=Zy(_),T=new Zr;return Object.assign(T,v),T})}else{const h=Xy(this.apiClient,e);return d=ae("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=Qy(_),T=new Zr;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=Wy(this.apiClient,e);return d=ae("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(v){return qo(this,arguments,function*(){var T,E,C,N;try{for(var M=!0,x=$r(v),q;q=yield tt(x.next()),T=q.done,!T;M=!0){N=q.value,M=!1;const k=N,F=Zy(yield tt(k.json()));F.sdkHttpResponse={headers:k.headers};const R=new Zr;Object.assign(R,F),yield yield tt(R)}}catch(k){E={error:k}}finally{try{!M&&!T&&(C=x.return)&&(yield tt(C.call(x)))}finally{if(E)throw E.error}}})})}else{const h=Xy(this.apiClient,e);return d=ae("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(v){return qo(this,arguments,function*(){var T,E,C,N;try{for(var M=!0,x=$r(v),q;q=yield tt(x.next()),T=q.done,!T;M=!0){N=q.value,M=!1;const k=N,F=Qy(yield tt(k.json()));F.sdkHttpResponse={headers:k.headers};const R=new Zr;Object.assign(R,F),yield yield tt(R)}}catch(k){E={error:k}}finally{try{!M&&!T&&(C=x.return)&&(yield tt(C.call(x)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=GN(this.apiClient,e);return d=ae("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=zN(_),T=new Dy;return Object.assign(T,v),T})}else{const h=LN(this.apiClient,e);return d=ae("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=FN(_),T=new Dy;return Object.assign(T,v),T})}}async generateImagesInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=jN(this.apiClient,e);return d=ae("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=tM(_),T=new Iy;return Object.assign(T,v),T})}else{const h=$N(this.apiClient,e);return d=ae("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=eM(_),T=new Iy;return Object.assign(T,v),T})}}async editImageInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=ON(this.apiClient,e);return l=ae("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>{const h=VN(m),_=new HC;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=jM(this.apiClient,e);return l=ae("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>{const h=ex(m),_=new YC;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=UM(this.apiClient,e);return l=ae("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=OM(m),_=new JC;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=FM(this.apiClient,e);return l=ae("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=zM(m),_=new XC;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=yM(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>hd(_))}else{const h=_M(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>dd(_))}}async listInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=xM(this.apiClient,e);return d=ae("{models_url}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=RM(_),T=new ky;return Object.assign(T,v),T})}else{const h=MM(this.apiClient,e);return d=ae("{models_url}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=wM(_),T=new ky;return Object.assign(T,v),T})}}async update(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=KM(this.apiClient,e);return d=ae("{model}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>hd(_))}else{const h=ZM(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>dd(_))}}async delete(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=DN(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=kN(_),T=new Uy;return Object.assign(T,v),T})}else{const h=bN(this.apiClient,e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=IN(_),T=new Uy;return Object.assign(T,v),T})}}async countTokens(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=xN(this.apiClient,e);return d=ae("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=RN(_),T=new Oy;return Object.assign(T,v),T})}else{const h=MN(this.apiClient,e);return d=ae("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=wN(_),T=new Oy;return Object.assign(T,v),T})}}async computeTokens(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=vN(this.apiClient,e);return l=ae("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>{const h=TN(m),_=new WC;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=aM(this.apiClient,e);return d=ae("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const v=oM(_),T=new Ql;return Object.assign(T,v),T})}else{const h=rM(this.apiClient,e);return d=ae("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const v=sM(_),T=new Ql;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kx extends Ri{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=PC(e);return d=ae("{operationName}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c}else{const h=qC(e);return d=ae("{operationName}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=bC(e);return l=ae("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ux(i){const e={},t=f(i,["data"]);if(t!=null&&p(e,["data"],t),f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Ox(i){const e={},t=f(i,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>Hx(l))),p(e,["parts"],a)}const s=f(i,["role"]);return s!=null&&p(e,["role"],s),e}function Vx(i,e,t){const s={},a=f(e,["expireTime"]);t!==void 0&&a!=null&&p(t,["expireTime"],a);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&p(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],Bx(i,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&p(t,["fieldMask"],m),s}function qx(i,e){const t={},s=f(e,["config"]);return s!=null&&p(t,["config"],Vx(i,s,t)),t}function Px(i){const e={};if(f(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(i,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(i,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Lx(i){const e={},t=f(i,["id"]);t!=null&&p(e,["id"],t);const s=f(i,["args"]);s!=null&&p(e,["args"],s);const a=f(i,["name"]);if(a!=null&&p(e,["name"],a),f(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gx(i){const e={};if(f(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(i,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Fx(i){const e={};if(f(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(i,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function zx(i,e){const t={},s=f(i,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const a=f(i,["responseModalities"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","responseModalities"],a);const l=f(i,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const c=f(i,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const d=f(i,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(i,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(i,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(i,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const v=f(i,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],Id(v));const T=f(i,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const E=f(i,["enableAffectiveDialog"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],E);const C=f(i,["systemInstruction"]);e!==void 0&&C!=null&&p(e,["setup","systemInstruction"],Ox(Lt(C)));const N=f(i,["tools"]);if(e!==void 0&&N!=null){let O=Xo(N);Array.isArray(O)&&(O=O.map(I=>Jx(Jo(I)))),p(e,["setup","tools"],O)}const M=f(i,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],Yx(M));const x=f(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&p(e,["setup","inputAudioTranscription"],x);const q=f(i,["outputAudioTranscription"]);e!==void 0&&q!=null&&p(e,["setup","outputAudioTranscription"],q);const k=f(i,["realtimeInputConfig"]);e!==void 0&&k!=null&&p(e,["setup","realtimeInputConfig"],k);const F=f(i,["contextWindowCompression"]);e!==void 0&&F!=null&&p(e,["setup","contextWindowCompression"],F);const R=f(i,["proactivity"]);return e!==void 0&&R!=null&&p(e,["setup","proactivity"],R),t}function Bx(i,e){const t={},s=f(e,["model"]);s!=null&&p(t,["setup","model"],Ue(i,s));const a=f(e,["config"]);return a!=null&&p(t,["config"],zx(a,t)),t}function Hx(i){const e={},t=f(i,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(i,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const a=f(i,["executableCode"]);a!=null&&p(e,["executableCode"],a);const l=f(i,["fileData"]);l!=null&&p(e,["fileData"],Px(l));const c=f(i,["functionCall"]);c!=null&&p(e,["functionCall"],Lx(c));const d=f(i,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(i,["inlineData"]);m!=null&&p(e,["inlineData"],Ux(m));const h=f(i,["text"]);h!=null&&p(e,["text"],h);const _=f(i,["thought"]);_!=null&&p(e,["thought"],_);const v=f(i,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const T=f(i,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function Yx(i){const e={},t=f(i,["handle"]);if(t!=null&&p(e,["handle"],t),f(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Jx(i){const e={},t=f(i,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(v=>v)),p(e,["functionDeclarations"],_)}if(f(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(i,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=f(i,["computerUse"]);a!=null&&p(e,["computerUse"],a);const l=f(i,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const c=f(i,["codeExecution"]);if(c!=null&&p(e,["codeExecution"],c),f(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(i,["googleMaps"]);d!=null&&p(e,["googleMaps"],Gx(d));const m=f(i,["googleSearch"]);m!=null&&p(e,["googleSearch"],Fx(m));const h=f(i,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xx(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const s=i[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function Wx(i,e){let t=null;const s=i.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(i.bidiGenerateContentSetup=l,t=l):delete i.bidiGenerateContentSetup}else s!==void 0&&delete i.bidiGenerateContentSetup;const a=i.fieldMask;if(t){const l=Xx(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?i.fieldMask=l:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];a.length>0&&(d=a.map(h=>c.includes(h)?`generationConfig.${h}`:h));const m=[];l&&m.push(l),d.length>0&&m.push(...d),m.length>0?i.fieldMask=m.join(","):delete i.fieldMask}else delete i.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?i.fieldMask=a.join(","):delete i.fieldMask;return i}class Qx extends Ri{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=qx(this.apiClient,e);l=ae("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const m=Wx(d,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),a.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zx(i,e){const t={},s=f(i,["displayName"]);return e!==void 0&&s!=null&&p(e,["displayName"],s),t}function Kx(i){const e={},t=f(i,["config"]);return t!=null&&Zx(t,e),e}function $x(i,e){const t={},s=f(i,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),t}function jx(i){const e={},t=f(i,["name"]);t!=null&&p(e,["_url","name"],t);const s=f(i,["config"]);return s!=null&&$x(s,e),e}function ew(i){const e={},t=f(i,["name"]);return t!=null&&p(e,["_url","name"],t),e}function tw(i,e){const t={},s=f(i,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["customMetadata"],l)}const a=f(i,["chunkingConfig"]);return e!==void 0&&a!=null&&p(e,["chunkingConfig"],a),t}function nw(i){const e={},t=f(i,["name"]);t!=null&&p(e,["name"],t);const s=f(i,["metadata"]);s!=null&&p(e,["metadata"],s);const a=f(i,["done"]);a!=null&&p(e,["done"],a);const l=f(i,["error"]);l!=null&&p(e,["error"],l);const c=f(i,["response"]);return c!=null&&p(e,["response"],sw(c)),e}function iw(i){const e={},t=f(i,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const s=f(i,["fileName"]);s!=null&&p(e,["fileName"],s);const a=f(i,["config"]);return a!=null&&tw(a,e),e}function sw(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["parent"]);s!=null&&p(e,["parent"],s);const a=f(i,["documentName"]);return a!=null&&p(e,["documentName"],a),e}function ow(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);return e!==void 0&&a!=null&&p(e,["_query","pageToken"],a),t}function rw(i){const e={},t=f(i,["config"]);return t!=null&&ow(t,e),e}function aw(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["fileSearchStores"],l)}return e}function lw(i,e){const t={},s=f(i,["mimeType"]);e!==void 0&&s!=null&&p(e,["mimeType"],s);const a=f(i,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const l=f(i,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["customMetadata"],d)}const c=f(i,["chunkingConfig"]);return e!==void 0&&c!=null&&p(e,["chunkingConfig"],c),t}function uw(i){const e={},t=f(i,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const s=f(i,["config"]);return s!=null&&lw(s,e),e}function cw(i){const e={},t=f(i,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fw(i,e){const t={},s=f(i,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),t}function dw(i){const e={},t=f(i,["name"]);t!=null&&p(e,["_url","name"],t);const s=f(i,["config"]);return s!=null&&fw(s,e),e}function hw(i){const e={},t=f(i,["name"]);return t!=null&&p(e,["_url","name"],t),e}function pw(i,e){const t={},s=f(i,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=f(i,["pageToken"]);return e!==void 0&&a!=null&&p(e,["_query","pageToken"],a),t}function mw(i){const e={},t=f(i,["parent"]);t!=null&&p(e,["_url","parent"],t);const s=f(i,["config"]);return s!=null&&pw(s,e),e}function gw(i){const e={},t=f(i,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(i,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const a=f(i,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _w extends Ri{constructor(e){super(),this.apiClient=e,this.list=async t=>new zs(Mi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hw(e);return l=ae("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dw(e);a=ae("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mw(e);return l=ae("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=gw(m),_=new QC;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yw extends Ri{constructor(e,t=new _w(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new zs(Mi.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Kx(e);return l=ae("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ew(e);return l=ae("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jx(e);a=ae("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rw(e);return l=ae("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=aw(m),_=new ZC;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uw(e);return l=ae("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=cw(m),_=new KC;return Object.assign(_,h),_})}}async importFile(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iw(e);return l=ae("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const h=nw(m),_=new xd;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(i,e){const t={},s=f(i,["name"]);return s!=null&&p(t,["_url","name"],s),t}function Tw(i,e){const t={},s=f(i,["name"]);return s!=null&&p(t,["_url","name"],s),t}function Sw(i,e,t){const s={};if(f(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(i,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&p(e,["displayName"],a),f(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(i,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(i,["learningRateMultiplier"]);if(c!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(i,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(i,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),f(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function Ew(i,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=f(i,["validationDataset"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec"],iv(E))}else if(a==="PREFERENCE_TUNING"){const E=f(i,["validationDataset"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec"],iv(E))}const l=f(i,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const c=f(i,["description"]);e!==void 0&&c!=null&&p(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const E=f(i,["epochCount"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(d==="PREFERENCE_TUNING"){const E=f(i,["epochCount"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=f(i,["learningRateMultiplier"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(m==="PREFERENCE_TUNING"){const E=f(i,["learningRateMultiplier"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=f(i,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(h==="PREFERENCE_TUNING"){const E=f(i,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const E=f(i,["adapterSize"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(_==="PREFERENCE_TUNING"){const E=f(i,["adapterSize"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(f(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=f(i,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const T=f(i,["beta"]);return e!==void 0&&T!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function Cw(i,e){const t={},s=f(i,["baseModel"]);s!=null&&p(t,["baseModel"],s);const a=f(i,["preTunedModel"]);a!=null&&p(t,["preTunedModel"],a);const l=f(i,["trainingDataset"]);l!=null&&Uw(l);const c=f(i,["config"]);return c!=null&&Sw(c,t),t}function Aw(i,e){const t={},s=f(i,["baseModel"]);s!=null&&p(t,["baseModel"],s);const a=f(i,["preTunedModel"]);a!=null&&p(t,["preTunedModel"],a);const l=f(i,["trainingDataset"]);l!=null&&Ow(l,t,e);const c=f(i,["config"]);return c!=null&&Ew(c,t,e),t}function Nw(i,e){const t={},s=f(i,["name"]);return s!=null&&p(t,["_url","name"],s),t}function Mw(i,e){const t={},s=f(i,["name"]);return s!=null&&p(t,["_url","name"],s),t}function xw(i,e,t){const s={},a=f(i,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(i,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const c=f(i,["filter"]);return e!==void 0&&c!=null&&p(e,["_query","filter"],c),s}function ww(i,e,t){const s={},a=f(i,["pageSize"]);e!==void 0&&a!=null&&p(e,["_query","pageSize"],a);const l=f(i,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const c=f(i,["filter"]);return e!==void 0&&c!=null&&p(e,["_query","filter"],c),s}function Rw(i,e){const t={},s=f(i,["config"]);return s!=null&&xw(s,t),t}function bw(i,e){const t={},s=f(i,["config"]);return s!=null&&ww(s,t),t}function Dw(i,e){const t={},s=f(i,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const a=f(i,["nextPageToken"]);a!=null&&p(t,["nextPageToken"],a);const l=f(i,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>nT(d))),p(t,["tuningJobs"],c)}return t}function Iw(i,e){const t={},s=f(i,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const a=f(i,["nextPageToken"]);a!=null&&p(t,["nextPageToken"],a);const l=f(i,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>md(d))),p(t,["tuningJobs"],c)}return t}function kw(i,e){const t={},s=f(i,["name"]);s!=null&&p(t,["model"],s);const a=f(i,["name"]);return a!=null&&p(t,["endpoint"],a),t}function Uw(i,e){const t={};if(f(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(i,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(t,["examples","examples"],a)}return t}function Ow(i,e,t){const s={};let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(i,["gcsUri"]);e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(i,["gcsUri"]);e!==void 0&&c!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(i,["vertexDatasetResource"]);e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(i,["vertexDatasetResource"]);e!==void 0&&c!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function nT(i,e){const t={},s=f(i,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const a=f(i,["name"]);a!=null&&p(t,["name"],a);const l=f(i,["state"]);l!=null&&p(t,["state"],qv(l));const c=f(i,["createTime"]);c!=null&&p(t,["createTime"],c);const d=f(i,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const m=f(i,["tuningTask","completeTime"]);m!=null&&p(t,["endTime"],m);const h=f(i,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=f(i,["description"]);_!=null&&p(t,["description"],_);const v=f(i,["baseModel"]);v!=null&&p(t,["baseModel"],v);const T=f(i,["_self"]);return T!=null&&p(t,["tunedModel"],kw(T)),t}function md(i,e){const t={},s=f(i,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const a=f(i,["name"]);a!=null&&p(t,["name"],a);const l=f(i,["state"]);l!=null&&p(t,["state"],qv(l));const c=f(i,["createTime"]);c!=null&&p(t,["createTime"],c);const d=f(i,["startTime"]);d!=null&&p(t,["startTime"],d);const m=f(i,["endTime"]);m!=null&&p(t,["endTime"],m);const h=f(i,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=f(i,["error"]);_!=null&&p(t,["error"],_);const v=f(i,["description"]);v!=null&&p(t,["description"],v);const T=f(i,["baseModel"]);T!=null&&p(t,["baseModel"],T);const E=f(i,["tunedModel"]);E!=null&&p(t,["tunedModel"],E);const C=f(i,["preTunedModel"]);C!=null&&p(t,["preTunedModel"],C);const N=f(i,["supervisedTuningSpec"]);N!=null&&p(t,["supervisedTuningSpec"],N);const M=f(i,["preferenceOptimizationSpec"]);M!=null&&p(t,["preferenceOptimizationSpec"],M);const x=f(i,["tuningDataStats"]);x!=null&&p(t,["tuningDataStats"],x);const q=f(i,["encryptionSpec"]);q!=null&&p(t,["encryptionSpec"],q);const k=f(i,["partnerModelTuningSpec"]);k!=null&&p(t,["partnerModelTuningSpec"],k);const F=f(i,["customBaseModel"]);F!=null&&p(t,["customBaseModel"],F);const R=f(i,["experiment"]);R!=null&&p(t,["experiment"],R);const O=f(i,["labels"]);O!=null&&p(t,["labels"],O);const I=f(i,["outputUri"]);I!=null&&p(t,["outputUri"],I);const V=f(i,["pipelineJob"]);V!=null&&p(t,["pipelineJob"],V);const B=f(i,["serviceAccount"]);B!=null&&p(t,["serviceAccount"],B);const W=f(i,["tunedModelDisplayName"]);W!=null&&p(t,["tunedModelDisplayName"],W);const Z=f(i,["veoTuningSpec"]);return Z!=null&&p(t,["veoTuningSpec"],Z),t}function Vw(i,e){const t={},s=f(i,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const a=f(i,["name"]);a!=null&&p(t,["name"],a);const l=f(i,["metadata"]);l!=null&&p(t,["metadata"],l);const c=f(i,["done"]);c!=null&&p(t,["done"],c);const d=f(i,["error"]);return d!=null&&p(t,["error"],d),t}function iv(i,e){const t={},s=f(i,["gcsUri"]);s!=null&&p(t,["validationDatasetUri"],s);const a=f(i,["vertexDatasetResource"]);return a!=null&&p(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qw extends Ri{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new zs(Mi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:ld.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=Mw(e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>md(_))}else{const h=Nw(e);return d=ae("{name}",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>nT(_))}}async listInternal(e){var t,s,a,l;let c,d="",m={};if(this.apiClient.isVertexAI()){const h=bw(e);return d=ae("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=Iw(_),T=new Vy;return Object.assign(T,v),T})}else{const h=Rw(e);return d=ae("tunedModels",h._url),m=h._query,delete h._url,delete h._query,c=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:_.headers},T})),c.then(_=>{const v=Dw(_),T=new Vy;return Object.assign(T,v),T})}}async cancel(e){var t,s,a,l;let c="",d={};if(this.apiClient.isVertexAI()){const m=Tw(e);c=ae("{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=vw(e);c=ae("{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=Aw(e,e);return l=ae("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>md(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Cw(e);return l=ae("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),a.then(m=>Vw(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pw{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Lw=1024*1024*8,Gw=3,Fw=1e3,zw=2,Kl="x-goog-upload-status";async function Bw(i,e,t){var s;const a=await iT(i,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Kl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Hw(i,e,t){var s;const a=await iT(i,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Kl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Dv(l),d=new wd;return Object.assign(d,c),d}async function iT(i,e,t){var s,a;let l=0,c=0,d=new ud(new Response),m="upload";for(l=i.size;c<l;){const h=Math.min(Lw,l-c),_=i.slice(c,c+h);c+h>=l&&(m+=", finalize");let v=0,T=Fw;for(;v<Gw&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(c),"Content-Length":String(h)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Kl]));)v++,await Jw(T),T=T*zw;if(c+=h,((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[Kl])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function Yw(i){return{size:i.size,type:i.type}}function Jw(i){return new Promise(e=>setTimeout(e,i))}class Xw{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bw(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hw(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Yw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ww{create(e,t,s){return new Qw(e,t,s)}}class Qw{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sv="x-goog-api-key";class Zw{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(sv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kw="gl-node/";class $w{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=wC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const a=new Zw(this.apiKey);this.apiClient=new hx({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Kw+"web",uploader:new Xw,downloader:new Pw}),this.models=new Ix(this.apiClient),this.live=new Mx(this.apiClient,a,new Ww),this.batches=new i1(this.apiClient),this.chats=new P1(this.models,this.apiClient),this.caches=new O1(this.apiClient),this.files=new W1(this.apiClient),this.operations=new kx(this.apiClient),this.authTokens=new Qx(this.apiClient),this.tunings=new qw(this.apiClient),this.fileSearchStores=new yw(this.apiClient)}}const jw=`
You are a Sonic Architect. Your task is to analyze architectural images (floor plans, interior photos, building sketches) and translate their visual properties into a complete musical composition profile.

Analyze the image for:
1. Volume/Space: Estimated physical volume. A small closet is 0.1, a cathedral is 1.0. 
2. Brightness/Light: Amount of natural light. Dark/Cave is 0.1, Glasshouse is 1.0.
3. Complexity: Visual noise and structural detail. Minimalist is 0.1, Baroque is 1.0.
4. Materials: Dominant materials.
5. Detected Features: specific visual elements (e.g., "Spiral staircase", "Open kitchen", "Corinthian columns", "Drafting lines").
6. Musical Parameters:
   - Key: A musical key that fits the vibe (e.g., "C Minor", "F# Major", "E Dorian").
   - Tempo: BPM between 60 and 140.
   - Genre: A generic style descriptor (e.g., "Deep House", "Ambient Drone", "Classical Minimalist", "Industrial", "Jazz Noir").

Return strictly JSON.
`,eR=async(i,e)=>{try{const a=(await new $w({apiKey:"AIzaSyAW13AVeblbuJXy3A10Nf41wxS8Y2m6CdE"}).models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{data:i,mimeType:e}},{text:"Analyze this architecture for sonic translation."}]},config:{systemInstruction:jw,responseMimeType:"application/json",responseSchema:{type:vt.OBJECT,properties:{volume:{type:vt.NUMBER,description:"0.0 to 1.0 representing physical space size"},brightness:{type:vt.NUMBER,description:"0.0 to 1.0 representing light and openness"},complexity:{type:vt.NUMBER,description:"0.0 to 1.0 representing visual detail density"},materials:{type:vt.STRING,description:"Dominant materials visible"},mood:{type:vt.STRING,description:"Emotional atmosphere"},suggestedKey:{type:vt.STRING,description:"Musical key (e.g. C Minor)"},tempo:{type:vt.NUMBER,description:"BPM"},genre:{type:vt.STRING,description:"Musical genre style"},detectedFeatures:{type:vt.ARRAY,items:{type:vt.STRING},description:"List of 3-5 specific visual elements found in the image"},architecturalDescription:{type:vt.STRING,description:"A poetic description of the space's acoustic qualities"}},required:["volume","brightness","complexity","materials","mood","suggestedKey","tempo","genre","detectedFeatures","architecturalDescription"]}}})).text;if(!a)throw new Error("No response from Gemini");return JSON.parse(a)}catch(t){throw console.error("Gemini Analysis Failed:",t),t}},sT="15.1.22",ov=(i,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:i}),rv=(i,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:i}),gd=(i,e)=>({startTime:e,type:"setValue",value:i}),oT=(i,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:i}),rT=(i,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-i)/a),Uo=i=>i.type==="exponentialRampToValue",$l=i=>i.type==="linearRampToValue",rs=i=>Uo(i)||$l(i),Ud=i=>i.type==="setValue",Ai=i=>i.type==="setValueCurve",jl=(i,e,t,s)=>{const a=i[e];return a===void 0?s:rs(a)||Ud(a)?a.value:Ai(a)?a.values[a.values.length-1]:rT(t,jl(i,e-1,a.startTime,s),a)},av=(i,e,t,s,a)=>t===void 0?[s.insertTime,a]:rs(t)?[t.endTime,t.value]:Ud(t)?[t.startTime,t.value]:Ai(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,jl(i,e-1,t.startTime,a)],_d=i=>i.type==="cancelAndHold",yd=i=>i.type==="cancelScheduledValues",os=i=>_d(i)||yd(i)?i.cancelTime:Uo(i)||$l(i)?i.endTime:i.startTime,lv=(i,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((i-e)/(s-e)):0,uv=(i,e,t,{endTime:s,value:a})=>t+(i-e)/(s-e)*(a-t),tR=(i,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?i[t]:(1-(e-t))*i[t]+(1-(s-e))*i[s]},nR=(i,{duration:e,startTime:t,values:s})=>{const a=(i-t)/e*(s.length-1);return tR(s,a)},Ll=i=>i.type==="setTarget";class iR{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=os(e);if(_d(e)||yd(e)){const s=this._automationEvents.findIndex(l=>yd(e)&&Ai(l)?l.startTime+l.duration>=t:os(l)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),_d(e)){const l=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&rs(a)){if(l!==void 0&&Ll(l))throw new Error("The internal list is malformed.");const c=l===void 0?a.insertTime:Ai(l)?l.startTime+l.duration:os(l),d=l===void 0?this._defaultValue:Ai(l)?l.values[l.values.length-1]:l.value,m=Uo(a)?lv(t,c,d,a):uv(t,c,d,a),h=Uo(a)?ov(m,t,this._currenTime):rv(m,t,this._currenTime);this._automationEvents.push(h)}if(l!==void 0&&Ll(l)&&this._automationEvents.push(gd(this.getValue(t),t)),l!==void 0&&Ai(l)&&l.startTime+l.duration>t){const c=t-l.startTime,d=(l.values.length-1)/l.duration,m=Math.max(2,1+Math.ceil(c*d)),h=c/(m-1)*d,_=l.values.slice(0,m);if(h<1)for(let v=1;v<m;v+=1){const T=h*v%1;_[v]=l.values[v-1]*(1-T)+l.values[v]*T}this._automationEvents[this._automationEvents.length-1]=oT(_,l.startTime,c)}}}else{const s=this._automationEvents.findIndex(c=>os(c)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&Ai(a)&&os(a)+a.duration>t)return!1;const l=Uo(e)?ov(e.value,e.endTime,this._currenTime):$l(e)?rv(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(l);else{if(Ai(e)&&t+e.duration>os(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,l)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>os(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];Ll(a)&&s.unshift(gd(jl(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(c=>os(c)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,l=this._automationEvents[a];if(l!==void 0&&Ll(l)&&(s===void 0||!rs(s)||s.insertTime>e))return rT(e,jl(this._automationEvents,a-1,l.startTime,this._defaultValue),l);if(l!==void 0&&Ud(l)&&(s===void 0||!rs(s)))return l.value;if(l!==void 0&&Ai(l)&&(s===void 0||!rs(s)||l.startTime+l.duration>e))return e<l.startTime+l.duration?nR(e,l):l.values[l.values.length-1];if(l!==void 0&&rs(l)&&(s===void 0||!rs(s)))return l.value;if(s!==void 0&&Uo(s)){const[c,d]=av(this._automationEvents,a,l,s,this._defaultValue);return lv(e,c,d,s)}if(s!==void 0&&$l(s)){const[c,d]=av(this._automationEvents,a,l,s,this._defaultValue);return uv(e,c,d,s)}return this._defaultValue}}const sR=i=>({cancelTime:i,type:"cancelAndHold"}),oR=i=>({cancelTime:i,type:"cancelScheduledValues"}),rR=(i,e)=>({endTime:e,type:"exponentialRampToValue",value:i}),aR=(i,e)=>({endTime:e,type:"linearRampToValue",value:i}),lR=(i,e,t)=>({startTime:e,target:i,timeConstant:t,type:"setTarget"}),uR=()=>new DOMException("","AbortError"),cR=i=>(e,t,[s,a,l],c)=>{i(e[a],[t,s,l],d=>d[0]===t&&d[1]===s,c)},fR=i=>(e,t,s)=>{const a=[];for(let l=0;l<s.numberOfInputs;l+=1)a.push(new Set);i.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},dR=i=>(e,t)=>{i.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Fo=new WeakSet,aT=new WeakMap,Od=new WeakMap,lT=new WeakMap,Vd=new WeakMap,gu=new WeakMap,uT=new WeakMap,vd=new WeakMap,Td=new WeakMap,Sd=new WeakMap,cT={construct(){return cT}},hR=i=>{try{const e=new Proxy(i,cT);new e}catch{return!1}return!0},cv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,fv=(i,e)=>{const t=[];let s=i.replace(/^[\s]+/,""),a=s.match(cv);for(;a!==null;){const l=a[1].slice(1,-1),c=a[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,e).toString());t.push(c),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(cv)}return[t.join(";"),s]},dv=i=>{if(i!==void 0&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},hv=i=>{if(!hR(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(i.prototype===null||typeof i.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},pR=(i,e,t,s,a,l,c,d,m,h,_,v,T)=>{let E=0;return(C,N,M={credentials:"omit"})=>{const x=_.get(C);if(x!==void 0&&x.has(N))return Promise.resolve();const q=h.get(C);if(q!==void 0){const R=q.get(N);if(R!==void 0)return R}const k=l(C),F=k.audioWorklet===void 0?a(N).then(([R,O])=>{const[I,V]=fv(R,O),B=`${I};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${V}
})})(window,'_AWGS')`;return t(B)}).then(()=>{const R=T._AWGS.pop();if(R===void 0)throw new SyntaxError;s(k.currentTime,k.sampleRate,()=>R(class{},void 0,(O,I)=>{if(O.trim()==="")throw e();const V=Td.get(k);if(V!==void 0){if(V.has(O))throw e();hv(I),dv(I.parameterDescriptors),V.set(O,I)}else hv(I),dv(I.parameterDescriptors),Td.set(k,new Map([[O,I]]))},k.sampleRate,void 0,void 0))}):Promise.all([a(N),Promise.resolve(i(v,v))]).then(([[R,O],I])=>{const V=E+1;E=V;const[B,W]=fv(R,O),ie=`${B};((AudioWorkletProcessor,registerProcessor)=>{${W}
})(${I?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${I?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${I?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${V}',class extends AudioWorkletProcessor{process(){return !1}})`,fe=new Blob([ie],{type:"application/javascript; charset=utf-8"}),U=URL.createObjectURL(fe);return k.audioWorklet.addModule(U,M).then(()=>{if(d(k))return k;const X=c(k);return X.audioWorklet.addModule(U,M).then(()=>X)}).then(X=>{if(m===null)throw new SyntaxError;try{new m(X,`__sac${V}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(U))});return q===void 0?h.set(C,new Map([[N,F]])):q.set(N,F),F.then(()=>{const R=_.get(C);R===void 0?_.set(C,new Set([N])):R.add(N)}).finally(()=>{const R=h.get(C);R!==void 0&&R.delete(N)}),F}},Pn=(i,e)=>{const t=i.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},_u=(i,e)=>{const t=Array.from(i).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return i.delete(s),s},fT=(i,e,t,s)=>{const a=Pn(i,e),l=_u(a,c=>c[0]===t&&c[1]===s);return a.size===0&&i.delete(e),l},sa=i=>Pn(uT,i),zo=i=>{if(Fo.has(i))throw new Error("The AudioNode is already stored.");Fo.add(i),sa(i).forEach(e=>e(!0))},dT=i=>"port"in i,oa=i=>{if(!Fo.has(i))throw new Error("The AudioNode is not stored.");Fo.delete(i),sa(i).forEach(e=>e(!1))},Ed=(i,e)=>{!dT(i)&&e.every(t=>t.size===0)&&oa(i)},mR=(i,e,t,s,a,l,c,d,m,h,_,v,T)=>{const E=new WeakMap;return(C,N,M,x,q)=>{const{activeInputs:k,passiveInputs:F}=l(N),{outputs:R}=l(C),O=d(C),I=V=>{const B=m(N),W=m(C);if(V){const Z=fT(F,C,M,x);i(k,C,Z,!1),!q&&!v(C)&&t(W,B,M,x),T(N)&&zo(N)}else{const Z=s(k,C,M,x);e(F,x,Z,!1),!q&&!v(C)&&a(W,B,M,x);const H=c(N);if(H===0)_(N)&&Ed(N,k);else{const ne=E.get(N);ne!==void 0&&clearTimeout(ne),E.set(N,setTimeout(()=>{_(N)&&Ed(N,k)},H*1e3))}}};return h(R,[N,M,x],V=>V[0]===N&&V[1]===M&&V[2]===x,!0)?(O.add(I),_(C)?i(k,C,[M,x,I],!0):e(F,x,[C,M,I],!0),!0):!1}},gR=i=>(e,t,[s,a,l],c)=>{const d=e.get(s);d===void 0?e.set(s,new Set([[a,t,l]])):i(d,[a,t,l],m=>m[0]===a&&m[1]===t,c)},_R=i=>(e,t)=>{const s=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},yR=i=>(e,t)=>{i(e).add(t)},vR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},TR=(i,e,t,s,a,l)=>class extends i{constructor(d,m){const h=a(d),_={...vR,...m},v=s(h,_),T=l(h)?e():null;super(d,!1,v,T),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const m=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=m,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const m=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=m,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},Ft=(i,e)=>i.context===e,SR=(i,e,t)=>()=>{const s=new WeakMap,a=async(l,c)=>{let d=e(l);if(!Ft(d,c)){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=i(c,h)}return s.set(c,d),await t(l,c,d),d};return{render(l,c){const d=s.get(c);return d!==void 0?Promise.resolve(d):a(l,c)}}},eu=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ti=()=>new DOMException("","IndexSizeError"),qd=i=>{i.getChannelData=(e=>t=>{try{return e.call(i,t)}catch(s){throw s.code===12?ti():s}})(i.getChannelData)},ER={numberOfChannels:1},CR=(i,e,t,s,a,l,c,d)=>{let m=null;return class hT{constructor(_){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:T,sampleRate:E}={...ER,..._};m===null&&(m=new a(1,1,44100));const C=s!==null&&e(l,l)?new s({length:v,numberOfChannels:T,sampleRate:E}):m.createBuffer(T,v,E);if(C.numberOfChannels===0)throw t();return typeof C.copyFromChannel!="function"?(c(C),qd(C)):e(eu,()=>eu(C))||d(C),i.add(C),C}static[Symbol.hasInstance](_){return _!==null&&typeof _=="object"&&Object.getPrototypeOf(_)===hT.prototype||i.has(_)}}},jt=-34028234663852886e22,Bt=-jt,Ni=i=>Fo.has(i),AR={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},NR=(i,e,t,s,a,l,c,d)=>class extends i{constructor(h,_){const v=l(h),T={...AR,..._},E=a(v,T),C=c(v),N=C?e():null;super(h,!1,E,N),this._audioBufferSourceNodeRenderer=N,this._isBufferNullified=!1,this._isBufferSet=T.buffer!==null,this._nativeAudioBufferSourceNode=E,this._onended=null,this._playbackRate=t(this,C,E.playbackRate,Bt,jt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const _=typeof h=="function"?d(this,h):null;this._nativeAudioBufferSourceNode.onended=_;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===_?h:v}get playbackRate(){return this._playbackRate}start(h=0,_=0,v){if(this._nativeAudioBufferSourceNode.start(h,_,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[h,_]:[h,_,v]),this.context.state!=="closed"){zo(this);const T=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",T),Ni(this)&&oa(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",T)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},MR=(i,e,t,s,a)=>()=>{const l=new WeakMap;let c=null,d=null;const m=async(h,_)=>{let v=t(h);const T=Ft(v,_);if(!T){const E={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=e(_,E),c!==null&&v.start(...c),d!==null&&v.stop(d)}return l.set(_,v),T?await i(_,h.playbackRate,v.playbackRate):await s(_,h.playbackRate,v.playbackRate),await a(h,_,v),v};return{set start(h){c=h},set stop(h){d=h},render(h,_){const v=l.get(_);return v!==void 0?Promise.resolve(v):m(h,_)}}},xR=i=>"playbackRate"in i,wR=i=>"frequency"in i&&"gain"in i,RR=i=>"offset"in i,bR=i=>!("frequency"in i)&&"gain"in i,DR=i=>"detune"in i&&"frequency"in i&&!("gain"in i),IR=i=>"pan"in i,Ht=i=>Pn(aT,i),ra=i=>Pn(lT,i),Cd=(i,e)=>{const{activeInputs:t}=Ht(i);t.forEach(a=>a.forEach(([l])=>{e.includes(i)||Cd(l,[...e,i])}));const s=xR(i)?[i.playbackRate]:dT(i)?Array.from(i.parameters.values()):wR(i)?[i.Q,i.detune,i.frequency,i.gain]:RR(i)?[i.offset]:bR(i)?[i.gain]:DR(i)?[i.detune,i.frequency]:IR(i)?[i.pan]:[];for(const a of s){const l=ra(a);l!==void 0&&l.activeInputs.forEach(([c])=>Cd(c,e))}Ni(i)&&oa(i)},pT=i=>{Cd(i.destination,[])},kR=i=>i===void 0||typeof i=="number"||typeof i=="string"&&(i==="balanced"||i==="interactive"||i==="playback"),UR=(i,e,t,s,a,l,c,d,m)=>class extends i{constructor(_={}){if(m===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new m(_)}catch(C){throw C.code===12&&C.message==="sampleRate is not in range"?t():C}if(v===null)throw s();if(!kR(_.latencyHint))throw new TypeError(`The provided value '${_.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(_.sampleRate!==void 0&&v.sampleRate!==_.sampleRate)throw t();super(v,2);const{latencyHint:T}=_,{sampleRate:E}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:T==="balanced"?512/E:T==="interactive"||T===void 0?256/E:T==="playback"?1024/E:Math.max(2,Math.min(128,Math.round(T*E/128)))*128/E,this._nativeAudioContext=v,m.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const C=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",C)};v.addEventListener("statechange",C)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),pT(this)}))}createMediaElementSource(_){return new a(this,{mediaElement:_})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(_){return new c(this,{mediaStream:_})}createMediaStreamTrackSource(_){return new d(this,{mediaStreamTrack:_})}resume(){return this._state==="suspended"?new Promise((_,v)=>{const T=()=>{this._nativeAudioContext.removeEventListener("statechange",T),this._nativeAudioContext.state==="running"?_():this.resume().then(_,v)};this._nativeAudioContext.addEventListener("statechange",T)}):this._nativeAudioContext.resume().catch(_=>{throw _===void 0||_.code===15?e():_})}suspend(){return this._nativeAudioContext.suspend().catch(_=>{throw _===void 0?e():_})}},OR=(i,e,t,s,a,l,c,d)=>class extends i{constructor(h,_){const v=l(h),T=c(v),E=a(v,_,T),C=T?e(d):null;super(h,!1,E,C),this._isNodeOfNativeOfflineAudioContext=T,this._nativeAudioDestinationNode=E}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},VR=i=>{const e=new WeakMap,t=async(s,a)=>{const l=a.destination;return e.set(a,l),await i(s,a,l),l};return{render(s,a){const l=e.get(a);return l!==void 0?Promise.resolve(l):t(s,a)}}},qR=(i,e,t,s,a,l,c,d)=>(m,h)=>{const _=h.listener,v=()=>{const R=new Float32Array(1),O=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),I=c(h);let V=!1,B=[0,0,-1,0,1,0],W=[0,0,0];const Z=()=>{if(V)return;V=!0;const fe=s(h,256,9,0);fe.onaudioprocess=({inputBuffer:U})=>{const X=[l(U,R,0),l(U,R,1),l(U,R,2),l(U,R,3),l(U,R,4),l(U,R,5)];X.some((se,ue)=>se!==B[ue])&&(_.setOrientation(...X),B=X);const ee=[l(U,R,6),l(U,R,7),l(U,R,8)];ee.some((se,ue)=>se!==W[ue])&&(_.setPosition(...ee),W=ee)},O.connect(fe)},H=fe=>U=>{U!==B[fe]&&(B[fe]=U,_.setOrientation(...B))},ne=fe=>U=>{U!==W[fe]&&(W[fe]=U,_.setPosition(...W))},ie=(fe,U,X)=>{const ee=t(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U});ee.connect(O,0,fe),ee.start(),Object.defineProperty(ee.offset,"defaultValue",{get(){return U}});const se=i({context:m},I,ee.offset,Bt,jt);return d(se,"value",ue=>()=>ue.call(se),ue=>w=>{try{ue.call(se,w)}catch(Y){if(Y.code!==9)throw Y}Z(),I&&X(w)}),se.cancelAndHoldAtTime=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.cancelAndHoldAtTime),se.cancelScheduledValues=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.cancelScheduledValues),se.exponentialRampToValueAtTime=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.exponentialRampToValueAtTime),se.linearRampToValueAtTime=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.linearRampToValueAtTime),se.setTargetAtTime=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.setTargetAtTime),se.setValueAtTime=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.setValueAtTime),se.setValueCurveAtTime=(ue=>I?()=>{throw a()}:(...w)=>{const Y=ue.apply(se,w);return Z(),Y})(se.setValueCurveAtTime),se};return{forwardX:ie(0,0,H(0)),forwardY:ie(1,0,H(1)),forwardZ:ie(2,-1,H(2)),positionX:ie(6,0,ne(0)),positionY:ie(7,0,ne(1)),positionZ:ie(8,0,ne(2)),upX:ie(3,0,H(3)),upY:ie(4,1,H(4)),upZ:ie(5,0,H(5))}},{forwardX:T,forwardY:E,forwardZ:C,positionX:N,positionY:M,positionZ:x,upX:q,upY:k,upZ:F}=_.forwardX===void 0?v():_;return{get forwardX(){return T},get forwardY(){return E},get forwardZ(){return C},get positionX(){return N},get positionY(){return M},get positionZ(){return x},get upX(){return q},get upY(){return k},get upZ(){return F}}},tu=i=>"context"in i,aa=i=>tu(i[0]),Bs=(i,e,t,s)=>{for(const a of i)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return i.add(e),!0},pv=(i,e,[t,s],a)=>{Bs(i,[e,t,s],l=>l[0]===e&&l[1]===t,a)},mv=(i,[e,t,s],a)=>{const l=i.get(e);l===void 0?i.set(e,new Set([[t,s]])):Bs(l,[t,s],c=>c[0]===t,a)},Qo=i=>"inputs"in i,nu=(i,e,t,s)=>{if(Qo(e)){const a=e.inputs[s];return i.connect(a,t,0),[a,t,0]}return i.connect(e,t,s),[e,t,s]},mT=(i,e,t)=>{for(const s of i)if(s[0]===e&&s[1]===t)return i.delete(s),s;return null},PR=(i,e,t)=>_u(i,s=>s[0]===e&&s[1]===t),gT=(i,e)=>{if(!sa(i).delete(e))throw new Error("Missing the expected event listener.")},_T=(i,e,t)=>{const s=Pn(i,e),a=_u(s,l=>l[0]===t);return s.size===0&&i.delete(e),a},iu=(i,e,t,s)=>{Qo(e)?i.disconnect(e.inputs[s],t,0):i.disconnect(e,t,s)},nt=i=>Pn(Od,i),ea=i=>Pn(Vd,i),Ls=i=>vd.has(i),Jl=i=>!Fo.has(i),gv=(i,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=i.createScriptProcessor(256,1,1),a=i.createGain(),l=i.createBuffer(1,2,44100),c=l.getChannelData(0);c[0]=1,c[1]=1;const d=i.createBufferSource();d.buffer=l,d.loop=!0,d.connect(s).connect(i.destination),d.connect(a),d.disconnect(a),s.onaudioprocess=m=>{const h=m.inputBuffer.getChannelData(0);Array.prototype.some.call(h,_=>_===1)?t(!0):t(!1),d.stop(),s.onaudioprocess=null,d.disconnect(s),s.disconnect(i.destination)},d.start()}}),sd=(i,e)=>{const t=new Map;for(const s of i)for(const a of s){const l=t.get(a);t.set(a,l===void 0?1:l+1)}t.forEach((s,a)=>e(a,s))},su=i=>"context"in i,LR=i=>{const e=new Map;i.connect=(t=>(s,a=0,l=0)=>{const c=su(s)?t(s,a,l):t(s,a),d=e.get(s);return d===void 0?e.set(s,[{input:l,output:a}]):d.every(m=>m.input!==l||m.output!==a)&&d.push({input:l,output:a}),c})(i.connect.bind(i)),i.disconnect=(t=>(s,a,l)=>{if(t.apply(i),s===void 0)e.clear();else if(typeof s=="number")for(const[c,d]of e){const m=d.filter(h=>h.output!==s);m.length===0?e.delete(c):e.set(c,m)}else if(e.has(s))if(a===void 0)e.delete(s);else{const c=e.get(s);if(c!==void 0){const d=c.filter(m=>m.output!==a&&(m.input!==l||l===void 0));d.length===0?e.delete(s):e.set(s,d)}}for(const[c,d]of e)d.forEach(m=>{su(c)?i.connect(c,m.output,m.input):i.connect(c,m.output)})})(i.disconnect)},GR=(i,e,t,s)=>{const{activeInputs:a,passiveInputs:l}=ra(e),{outputs:c}=Ht(i),d=sa(i),m=h=>{const _=nt(i),v=ea(e);if(h){const T=_T(l,i,t);pv(a,i,T,!1),!s&&!Ls(i)&&_.connect(v,t)}else{const T=PR(a,i,t);mv(l,T,!1),!s&&!Ls(i)&&_.disconnect(v,t)}};return Bs(c,[e,t],h=>h[0]===e&&h[1]===t,!0)?(d.add(m),Ni(i)?pv(a,i,[t,m],!0):mv(l,[i,t,m],!0),!0):!1},FR=(i,e,t,s)=>{const{activeInputs:a,passiveInputs:l}=Ht(e),c=mT(a[s],i,t);return c===null?[fT(l,i,t,s)[2],!1]:[c[2],!0]},zR=(i,e,t)=>{const{activeInputs:s,passiveInputs:a}=ra(e),l=mT(s,i,t);return l===null?[_T(a,i,t)[1],!1]:[l[2],!0]},Pd=(i,e,t,s,a)=>{const[l,c]=FR(i,t,s,a);if(l!==null&&(gT(i,l),c&&!e&&!Ls(i)&&iu(nt(i),nt(t),s,a)),Ni(t)){const{activeInputs:d}=Ht(t);Ed(t,d)}},Ld=(i,e,t,s)=>{const[a,l]=zR(i,t,s);a!==null&&(gT(i,a),l&&!e&&!Ls(i)&&nt(i).disconnect(ea(t),s))},BR=(i,e)=>{const t=Ht(i),s=[];for(const a of t.outputs)aa(a)?Pd(i,e,...a):Ld(i,e,...a),s.push(a[0]);return t.outputs.clear(),s},HR=(i,e,t)=>{const s=Ht(i),a=[];for(const l of s.outputs)l[1]===t&&(aa(l)?Pd(i,e,...l):Ld(i,e,...l),a.push(l[0]),s.outputs.delete(l));return a},YR=(i,e,t,s,a)=>{const l=Ht(i);return Array.from(l.outputs).filter(c=>c[0]===t&&(s===void 0||c[1]===s)&&(a===void 0||c[2]===a)).map(c=>(aa(c)?Pd(i,e,...c):Ld(i,e,...c),l.outputs.delete(c),c[0]))},JR=(i,e,t,s,a,l,c,d,m,h,_,v,T,E,C,N)=>class extends h{constructor(x,q,k,F){super(k),this._context=x,this._nativeAudioNode=k;const R=_(x);v(R)&&t(gv,()=>gv(R,N))!==!0&&LR(k),Od.set(this,k),uT.set(this,new Set),x.state!=="closed"&&q&&zo(this),i(this,F,k)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(x){this._nativeAudioNode.channelCount=x}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(x){this._nativeAudioNode.channelCountMode=x}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(x){this._nativeAudioNode.channelInterpretation=x}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(x,q=0,k=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw a();const F=_(this._context),R=C(F);if(T(x)||E(x))throw l();if(tu(x)){const V=nt(x);try{const W=nu(this._nativeAudioNode,V,q,k),Z=Jl(this);(R||Z)&&this._nativeAudioNode.disconnect(...W),this.context.state!=="closed"&&!Z&&Jl(x)&&zo(x)}catch(W){throw W.code===12?l():W}if(e(this,x,q,k,R)){const W=m([this],x);sd(W,s(R))}return x}const O=ea(x);if(O.name==="playbackRate"&&O.maxValue===1024)throw c();try{this._nativeAudioNode.connect(O,q),(R||Jl(this))&&this._nativeAudioNode.disconnect(O,q)}catch(V){throw V.code===12?l():V}if(GR(this,x,q,R)){const V=m([this],x);sd(V,s(R))}}disconnect(x,q,k){let F;const R=_(this._context),O=C(R);if(x===void 0)F=BR(this,O);else if(typeof x=="number"){if(x<0||x>=this.numberOfOutputs)throw a();F=HR(this,O,x)}else{if(q!==void 0&&(q<0||q>=this.numberOfOutputs)||tu(x)&&k!==void 0&&(k<0||k>=x.numberOfInputs))throw a();if(F=YR(this,O,x,q,k),F.length===0)throw l()}for(const I of F){const V=m([this],I);sd(V,d)}}},XR=(i,e,t,s,a,l,c,d,m,h,_,v,T)=>(E,C,N,M=null,x=null)=>{const q=N.value,k=new iR(q),F=C?s(k):null,R={get defaultValue(){return q},get maxValue(){return M===null?N.maxValue:M},get minValue(){return x===null?N.minValue:x},get value(){return N.value},set value(O){N.value=O,R.setValueAtTime(O,E.context.currentTime)},cancelAndHoldAtTime(O){if(typeof N.cancelAndHoldAtTime=="function")F===null&&k.flush(E.context.currentTime),k.add(a(O)),N.cancelAndHoldAtTime(O);else{const I=Array.from(k).pop();F===null&&k.flush(E.context.currentTime),k.add(a(O));const V=Array.from(k).pop();N.cancelScheduledValues(O),I!==V&&V!==void 0&&(V.type==="exponentialRampToValue"?N.exponentialRampToValueAtTime(V.value,V.endTime):V.type==="linearRampToValue"?N.linearRampToValueAtTime(V.value,V.endTime):V.type==="setValue"?N.setValueAtTime(V.value,V.startTime):V.type==="setValueCurve"&&N.setValueCurveAtTime(V.values,V.startTime,V.duration))}return R},cancelScheduledValues(O){return F===null&&k.flush(E.context.currentTime),k.add(l(O)),N.cancelScheduledValues(O),R},exponentialRampToValueAtTime(O,I){if(O===0)throw new RangeError;if(!Number.isFinite(I)||I<0)throw new RangeError;const V=E.context.currentTime;return F===null&&k.flush(V),Array.from(k).length===0&&(k.add(h(q,V)),N.setValueAtTime(q,V)),k.add(c(O,I)),N.exponentialRampToValueAtTime(O,I),R},linearRampToValueAtTime(O,I){const V=E.context.currentTime;return F===null&&k.flush(V),Array.from(k).length===0&&(k.add(h(q,V)),N.setValueAtTime(q,V)),k.add(d(O,I)),N.linearRampToValueAtTime(O,I),R},setTargetAtTime(O,I,V){return F===null&&k.flush(E.context.currentTime),k.add(m(O,I,V)),N.setTargetAtTime(O,I,V),R},setValueAtTime(O,I){return F===null&&k.flush(E.context.currentTime),k.add(h(O,I)),N.setValueAtTime(O,I),R},setValueCurveAtTime(O,I,V){const B=O instanceof Float32Array?O:new Float32Array(O);if(v!==null&&v.name==="webkitAudioContext"){const W=I+V,Z=E.context.sampleRate,H=Math.ceil(I*Z),ne=Math.floor(W*Z),ie=ne-H,fe=new Float32Array(ie);for(let X=0;X<ie;X+=1){const ee=(B.length-1)/V*((H+X)/Z-I),se=Math.floor(ee),ue=Math.ceil(ee);fe[X]=se===ue?B[se]:(1-(ee-se))*B[se]+(1-(ue-ee))*B[ue]}F===null&&k.flush(E.context.currentTime),k.add(_(fe,I,V)),N.setValueCurveAtTime(fe,I,V);const U=ne/Z;U<W&&T(R,fe[fe.length-1],U),T(R,B[B.length-1],W)}else F===null&&k.flush(E.context.currentTime),k.add(_(B,I,V)),N.setValueCurveAtTime(B,I,V);return R}};return t.set(R,N),e.set(R,E),i(R,F),R},WR=i=>({replay(e){for(const t of i)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:l}=t;e.setTargetAtTime(a,s,l)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:l}=t;e.setValueCurveAtTime(l,a,s)}else throw new Error("Can't apply an unknown automation.")}});class yT{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const QR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},ZR=(i,e,t,s,a,l,c,d,m,h,_,v,T,E)=>class extends e{constructor(N,M,x){var q;const k=d(N),F=m(k),R=_({...QR,...x});T(R);const O=Td.get(k),I=O==null?void 0:O.get(M),V=F||k.state!=="closed"?k:(q=c(k))!==null&&q!==void 0?q:k,B=a(V,F?null:N.baseLatency,h,M,I,R),W=F?s(M,R,I):null;super(N,!0,B,W);const Z=[];B.parameters.forEach((ne,ie)=>{const fe=t(this,F,ne);Z.push([ie,fe])}),this._nativeAudioWorkletNode=B,this._onprocessorerror=null,this._parameters=new yT(Z),F&&i(k,this);const{activeInputs:H}=l(this);v(B,H)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(N){const M=typeof N=="function"?E(this,N):null;this._nativeAudioWorkletNode.onprocessorerror=M;const x=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=x!==null&&x===M?N:x}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ou(i,e,t,s,a){if(typeof i.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),i.copyFromChannel(e[t],s,a);else{const l=i.getChannelData(s);if(e[t].byteLength===0)e[t]=l.slice(a,a+128);else{const c=new Float32Array(l.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(c)}}}const vT=(i,e,t,s,a)=>{typeof i.copyToChannel=="function"?e[t].byteLength!==0&&i.copyToChannel(e[t],s,a):e[t].byteLength!==0&&i.getChannelData(s).set(e[t],a)},ru=(i,e)=>{const t=[];for(let s=0;s<i;s+=1){const a=[],l=typeof e=="number"?e:e[s];for(let c=0;c<l;c+=1)a.push(new Float32Array(128));t.push(a)}return t},KR=(i,e)=>{const t=Pn(Sd,i),s=nt(e);return Pn(t,s)},$R=async(i,e,t,s,a,l,c)=>{const d=e===null?Math.ceil(i.context.length/128)*128:e.length,m=s.channelCount*s.numberOfInputs,h=a.reduce((M,x)=>M+x,0),_=h===0?null:t.createBuffer(h,d,t.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const v=Ht(i),T=await KR(t,i),E=ru(s.numberOfInputs,s.channelCount),C=ru(s.numberOfOutputs,a),N=Array.from(i.parameters.keys()).reduce((M,x)=>({...M,[x]:new Float32Array(128)}),{});for(let M=0;M<d;M+=128){if(s.numberOfInputs>0&&e!==null)for(let x=0;x<s.numberOfInputs;x+=1)for(let q=0;q<s.channelCount;q+=1)ou(e,E[x],q,q,M);l.parameterDescriptors!==void 0&&e!==null&&l.parameterDescriptors.forEach(({name:x},q)=>{ou(e,N,x,m+q,M)});for(let x=0;x<s.numberOfInputs;x+=1)for(let q=0;q<a[x];q+=1)C[x][q].byteLength===0&&(C[x][q]=new Float32Array(128));try{const x=E.map((k,F)=>v.activeInputs[F].size===0?[]:k),q=c(M/t.sampleRate,t.sampleRate,()=>T.process(x,C,N));if(_!==null)for(let k=0,F=0;k<s.numberOfOutputs;k+=1){for(let R=0;R<a[k];R+=1)vT(_,C[k],R,F+R,M);F+=a[k]}if(!q)break}catch(x){i.dispatchEvent(new ErrorEvent("processorerror",{colno:x.colno,filename:x.filename,lineno:x.lineno,message:x.message}));break}}return _},jR=(i,e,t,s,a,l,c,d,m,h,_,v,T,E,C,N)=>(M,x,q)=>{const k=new WeakMap;let F=null;const R=async(O,I)=>{let V=_(O),B=null;const W=Ft(V,I),Z=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(v===null){const H=Z.reduce((U,X)=>U+X,0),ne=a(I,{channelCount:Math.max(1,H),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,H)}),ie=[];for(let U=0;U<O.numberOfOutputs;U+=1)ie.push(s(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Z[U]}));const fe=c(I,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1});fe.connect=e.bind(null,ie),fe.disconnect=m.bind(null,ie),B=[ne,ie,fe]}else W||(V=new v(I,M));if(k.set(I,B===null?V:B[2]),B!==null){if(F===null){if(q===void 0)throw new Error("Missing the processor constructor.");if(T===null)throw new Error("Missing the native OfflineAudioContext constructor.");const X=O.channelCount*O.numberOfInputs,ee=q.parameterDescriptors===void 0?0:q.parameterDescriptors.length,se=X+ee;F=$R(O,se===0?null:await(async()=>{const w=new T(se,Math.ceil(O.context.length/128)*128,I.sampleRate),Y=[],te=[];for(let he=0;he<x.numberOfInputs;he+=1)Y.push(c(w,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),te.push(a(w,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const re=await Promise.all(Array.from(O.parameters.values()).map(async he=>{const Se=l(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:he.value});return await E(w,he,Se.offset),Se})),oe=s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,X+ee)});for(let he=0;he<x.numberOfInputs;he+=1){Y[he].connect(te[he]);for(let Se=0;Se<x.channelCount;Se+=1)te[he].connect(oe,Se,he*x.channelCount+Se)}for(const[he,Se]of re.entries())Se.connect(oe,0,X+he),Se.start(0);return oe.connect(w.destination),await Promise.all(Y.map(he=>C(O,w,he))),N(w)})(),I,x,Z,q,h)}const H=await F,ne=t(I,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ie,fe,U]=B;H!==null&&(ne.buffer=H,ne.start(0)),ne.connect(ie);for(let X=0,ee=0;X<O.numberOfOutputs;X+=1){const se=fe[X];for(let ue=0;ue<Z[X];ue+=1)ie.connect(se,ee+ue,ue);ee+=Z[X]}return U}if(W)for(const[H,ne]of O.parameters.entries())await i(I,ne,V.parameters.get(H));else for(const[H,ne]of O.parameters.entries())await E(I,ne,V.parameters.get(H));return await C(O,I,V),V};return{render(O,I){d(I,O);const V=k.get(I);return V!==void 0?Promise.resolve(V):R(O,I)}}},eb=(i,e,t,s,a,l,c,d,m,h,_,v,T,E,C,N,M,x,q,k)=>class extends C{constructor(R,O){super(R,O),this._nativeContext=R,this._audioWorklet=i===void 0?void 0:{addModule:(I,V)=>i(this,I,V)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(R,O,I){return new t({length:O,numberOfChannels:R,sampleRate:I})}createBufferSource(){return new s(this)}createChannelMerger(R=6){return new l(this,{numberOfInputs:R})}createChannelSplitter(R=6){return new c(this,{numberOfOutputs:R})}createConstantSource(){return new d(this)}createConvolver(){return new m(this)}createDelay(R=1){return new _(this,{maxDelayTime:R})}createDynamicsCompressor(){return new v(this)}createGain(){return new T(this)}createIIRFilter(R,O){return new E(this,{feedback:O,feedforward:R})}createOscillator(){return new N(this)}createPanner(){return new M(this)}createPeriodicWave(R,O,I={disableNormalization:!1}){return new x(this,{...I,imag:O,real:R})}createStereoPanner(){return new q(this)}createWaveShaper(){return new k(this)}decodeAudioData(R,O,I){return h(this._nativeContext,R).then(V=>(typeof O=="function"&&O(V),V),V=>{throw typeof I=="function"&&I(V),V})}},tb={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},nb=(i,e,t,s,a,l,c,d)=>class extends i{constructor(h,_){const v=l(h),T={...tb,..._},E=a(v,T),C=c(v),N=C?t():null;super(h,!1,E,N),this._Q=e(this,C,E.Q,Bt,jt),this._detune=e(this,C,E.detune,1200*Math.log2(Bt),-1200*Math.log2(Bt)),this._frequency=e(this,C,E.frequency,h.sampleRate/2,0),this._gain=e(this,C,E.gain,40*Math.log10(Bt),jt),this._nativeBiquadFilterNode=E,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,_,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,_,v)}catch(T){throw T.code===11?s():T}if(h.length!==_.length||_.length!==v.length)throw s()}},ib=(i,e,t,s,a)=>()=>{const l=new WeakMap,c=async(d,m)=>{let h=t(d);const _=Ft(h,m);if(!_){const v={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(m,v)}return l.set(m,h),_?(await i(m,d.Q,h.Q),await i(m,d.detune,h.detune),await i(m,d.frequency,h.frequency),await i(m,d.gain,h.gain)):(await s(m,d.Q,h.Q),await s(m,d.detune,h.detune),await s(m,d.frequency,h.frequency),await s(m,d.gain,h.gain)),await a(d,m,h),h};return{render(d,m){const h=l.get(m);return h!==void 0?Promise.resolve(h):c(d,m)}}},sb=(i,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const l=i.get(t);if(l!==void 0)return l;try{const c=s();return c instanceof Promise?(i.set(t,c),c.catch(()=>!1).then(d=>(i.delete(t),e.set(t,d),d))):(e.set(t,c),c)}catch{return e.set(t,!1),!1}},ob={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},rb=(i,e,t,s,a)=>class extends i{constructor(c,d){const m=s(c),h={...ob,...d},_=t(m,h),v=a(m)?e():null;super(c,!1,_,v)}},ab=(i,e,t)=>()=>{const s=new WeakMap,a=async(l,c)=>{let d=e(l);if(!Ft(d,c)){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=i(c,h)}return s.set(c,d),await t(l,c,d),d};return{render(l,c){const d=s.get(c);return d!==void 0?Promise.resolve(d):a(l,c)}}},lb={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ub=(i,e,t,s,a,l)=>class extends i{constructor(d,m){const h=s(d),_=l({...lb,...m}),v=t(h,_),T=a(h)?e():null;super(d,!1,v,T)}},cb=(i,e,t)=>()=>{const s=new WeakMap,a=async(l,c)=>{let d=e(l);if(!Ft(d,c)){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=i(c,h)}return s.set(c,d),await t(l,c,d),d};return{render(l,c){const d=s.get(c);return d!==void 0?Promise.resolve(d):a(l,c)}}},fb=i=>(e,t,s)=>i(t,e,s),db=i=>(e,t,s=0,a=0)=>{const l=e[s];if(l===void 0)throw i();return su(t)?l.connect(t,0,a):l.connect(t,0)},hb=i=>(e,t)=>{const s=i(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},pb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},mb=(i,e,t,s,a,l,c)=>class extends i{constructor(m,h){const _=a(m),v={...pb,...h},T=s(_,v),E=l(_),C=E?t():null;super(m,!1,T,C),this._constantSourceNodeRenderer=C,this._nativeConstantSourceNode=T,this._offset=e(this,E,T.offset,Bt,jt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(m){const h=typeof m=="function"?c(this,m):null;this._nativeConstantSourceNode.onended=h;const _=this._nativeConstantSourceNode.onended;this._onended=_!==null&&_===h?m:_}start(m=0){if(this._nativeConstantSourceNode.start(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=m),this.context.state!=="closed"){zo(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),Ni(this)&&oa(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(m=0){this._nativeConstantSourceNode.stop(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=m)}},gb=(i,e,t,s,a)=>()=>{const l=new WeakMap;let c=null,d=null;const m=async(h,_)=>{let v=t(h);const T=Ft(v,_);if(!T){const E={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=e(_,E),c!==null&&v.start(c),d!==null&&v.stop(d)}return l.set(_,v),T?await i(_,h.offset,v.offset):await s(_,h.offset,v.offset),await a(h,_,v),v};return{set start(h){c=h},set stop(h){d=h},render(h,_){const v=l.get(_);return v!==void 0?Promise.resolve(v):m(h,_)}}},_b=i=>e=>(i[0]=e,i[0]),yb={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},vb=(i,e,t,s,a,l)=>class extends i{constructor(d,m){const h=s(d),_={...yb,...m},v=t(h,_),E=a(h)?e():null;super(d,!1,v,E),this._isBufferNullified=!1,this._nativeConvolverNode=v,_.buffer!==null&&l(this,_.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const m=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=m.createBuffer(1,1,m.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},Tb=(i,e,t)=>()=>{const s=new WeakMap,a=async(l,c)=>{let d=e(l);if(!Ft(d,c)){const h={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=i(c,h)}return s.set(c,d),Qo(d)?await t(l,c,d.inputs[0]):await t(l,c,d),d};return{render(l,c){const d=s.get(c);return d!==void 0?Promise.resolve(d):a(l,c)}}},Sb=(i,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(l){throw l.name==="SyntaxError"?i():l}},Eb=()=>new DOMException("","DataCloneError"),_v=i=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(i,[i])}catch{}finally{a()}})},Cb=(i,e,t,s,a,l,c,d,m,h,_)=>(v,T)=>{const E=c(v)?v:l(v);if(a.has(T)){const C=t();return Promise.reject(C)}try{a.add(T)}catch{}return e(m,()=>m(E))?E.decodeAudioData(T).then(C=>(_v(T).catch(()=>{}),e(d,()=>d(C))||_(C),i.add(C),C)):new Promise((C,N)=>{const M=async()=>{try{await _v(T)}catch{}},x=q=>{N(q),M()};try{E.decodeAudioData(T,q=>{typeof q.copyFromChannel!="function"&&(h(q),qd(q)),i.add(q),M().then(()=>C(q))},q=>{x(q===null?s():q)})}catch(q){x(q)}})},Ab=(i,e,t,s,a,l,c,d)=>(m,h)=>{const _=e.get(m);if(_===void 0)throw new Error("Missing the expected cycle count.");const v=l(m.context),T=d(v);if(_===h){if(e.delete(m),!T&&c(m)){const E=s(m),{outputs:C}=t(m);for(const N of C)if(aa(N)){const M=s(N[0]);i(E,M,N[1],N[2])}else{const M=a(N[0]);E.connect(M,N[1])}}}else e.set(m,_-h)},Nb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Mb=(i,e,t,s,a,l,c)=>class extends i{constructor(m,h){const _=a(m),v={...Nb,...h},T=s(_,v),E=l(_),C=E?t(v.maxDelayTime):null;super(m,!1,T,C),this._delayTime=e(this,E,T.delayTime),c(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},xb=(i,e,t,s,a)=>l=>{const c=new WeakMap,d=async(m,h)=>{let _=t(m);const v=Ft(_,h);if(!v){const T={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,delayTime:_.delayTime.value,maxDelayTime:l};_=e(h,T)}return c.set(h,_),v?await i(h,m.delayTime,_.delayTime):await s(h,m.delayTime,_.delayTime),await a(m,h,_),_};return{render(m,h){const _=c.get(h);return _!==void 0?Promise.resolve(_):d(m,h)}}},wb=i=>(e,t,s,a)=>i(e[a],l=>l[0]===t&&l[1]===s),Rb=i=>(e,t)=>{i(e).delete(t)},bb=i=>"delayTime"in i,Db=(i,e,t)=>function s(a,l){const c=tu(l)?l:t(i,l);if(bb(c))return[];if(a[0]===c)return[a];if(a.includes(c))return[];const{outputs:d}=e(c);return Array.from(d).map(m=>s([...a,c],m[0])).reduce((m,h)=>m.concat(h),[])},Gl=(i,e,t)=>{const s=e[t];if(s===void 0)throw i();return s},Ib=i=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(l=>l.disconnect()):typeof t=="number"?Gl(i,e,t).disconnect():su(t)?s===void 0?e.forEach(l=>l.disconnect(t)):a===void 0?Gl(i,e,s).disconnect(t,0):Gl(i,e,s).disconnect(t,0,a):s===void 0?e.forEach(l=>l.disconnect(t)):Gl(i,e,s).disconnect(t,0),kb={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Ub=(i,e,t,s,a,l,c,d)=>class extends i{constructor(h,_){const v=l(h),T={...kb,..._},E=s(v,T),C=c(v),N=C?t():null;super(h,!1,E,N),this._attack=e(this,C,E.attack),this._knee=e(this,C,E.knee),this._nativeDynamicsCompressorNode=E,this._ratio=e(this,C,E.ratio),this._release=e(this,C,E.release),this._threshold=e(this,C,E.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const _=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=_,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const _=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=_,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Ob=(i,e,t,s,a)=>()=>{const l=new WeakMap,c=async(d,m)=>{let h=t(d);const _=Ft(h,m);if(!_){const v={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(m,v)}return l.set(m,h),_?(await i(m,d.attack,h.attack),await i(m,d.knee,h.knee),await i(m,d.ratio,h.ratio),await i(m,d.release,h.release),await i(m,d.threshold,h.threshold)):(await s(m,d.attack,h.attack),await s(m,d.knee,h.knee),await s(m,d.ratio,h.ratio),await s(m,d.release,h.release),await s(m,d.threshold,h.threshold)),await a(d,m,h),h};return{render(d,m){const h=l.get(m);return h!==void 0?Promise.resolve(h):c(d,m)}}},Vb=()=>new DOMException("","EncodingError"),qb=i=>e=>new Promise((t,s)=>{if(i===null){s(new SyntaxError);return}const a=i.document.head;if(a===null)s(new SyntaxError);else{const l=i.document.createElement("script"),c=new Blob([e],{type:"application/javascript"}),d=URL.createObjectURL(c),m=i.onerror,h=()=>{i.onerror=m,URL.revokeObjectURL(d)};i.onerror=(_,v,T,E,C)=>{if(v===d||v===i.location.href&&T===1&&E===1)return h(),s(C),!1;if(m!==null)return m(_,v,T,E,C)},l.onerror=()=>{h(),s(new SyntaxError)},l.onload=()=>{h(),t()},l.src=d,l.type="module",a.appendChild(l)}}),Pb=i=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let l=this._listeners.get(s);l===void 0&&(l=i(this,s),typeof s=="function"&&this._listeners.set(s,l)),this._nativeEventTarget.addEventListener(t,l,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const l=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,l===void 0?null:l,a)}},Lb=i=>(e,t,s)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{i!==null&&(delete i.currentFrame,delete i.currentTime)}},Gb=i=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw i()},Fb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},zb=(i,e,t,s,a,l)=>class extends i{constructor(d,m){const h=a(d),_={...Fb,...m},v=s(h,_),T=l(h),E=T?t():null;super(d,!1,v,E),this._gain=e(this,T,v.gain,Bt,jt)}get gain(){return this._gain}},Bb=(i,e,t,s,a)=>()=>{const l=new WeakMap,c=async(d,m)=>{let h=t(d);const _=Ft(h,m);if(!_){const v={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(m,v)}return l.set(m,h),_?await i(m,d.gain,h.gain):await s(m,d.gain,h.gain),await a(d,m,h),h};return{render(d,m){const h=l.get(m);return h!==void 0?Promise.resolve(h):c(d,m)}}},Hb=(i,e)=>t=>e(i,t),Yb=i=>e=>{const t=i(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},Jb=i=>e=>{var t;return(t=i.get(e))!==null&&t!==void 0?t:0},Xb=i=>e=>{const t=i(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},Wb=i=>e=>i.get(e),xt=()=>new DOMException("","InvalidStateError"),Qb=i=>e=>{const t=i.get(e);if(t===void 0)throw xt();return t},Zb=(i,e)=>t=>{let s=i.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),i.set(t,s),s},Kb=i=>e=>{const t=i.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},yu=()=>new DOMException("","InvalidAccessError"),$b=i=>{i.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw yu();return e.call(i,t,s,a)})(i.getFrequencyResponse)},jb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},eD=(i,e,t,s,a,l)=>class extends i{constructor(d,m){const h=s(d),_=a(h),v={...jb,...m},T=e(h,_?null:d.baseLatency,v),E=_?t(v.feedback,v.feedforward):null;super(d,!1,T,E),$b(T),this._nativeIIRFilterNode=T,l(this,1)}getFrequencyResponse(d,m,h){return this._nativeIIRFilterNode.getFrequencyResponse(d,m,h)}},TT=(i,e,t,s,a,l,c,d,m,h,_)=>{const v=h.length;let T=d;for(let E=0;E<v;E+=1){let C=t[0]*h[E];for(let N=1;N<a;N+=1){const M=T-N&m-1;C+=t[N]*l[M],C-=i[N]*c[M]}for(let N=a;N<s;N+=1)C+=t[N]*l[T-N&m-1];for(let N=a;N<e;N+=1)C-=i[N]*c[T-N&m-1];l[T]=h[E],c[T]=C,T=T+1&m-1,_[E]=C}return T},tD=(i,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),l=s instanceof Float64Array?s:new Float64Array(s),c=a.length,d=l.length,m=Math.min(c,d);if(a[0]!==1){for(let C=0;C<c;C+=1)l[C]/=a[0];for(let C=1;C<d;C+=1)a[C]/=a[0]}const h=32,_=new Float32Array(h),v=new Float32Array(h),T=e.createBuffer(i.numberOfChannels,i.length,i.sampleRate),E=i.numberOfChannels;for(let C=0;C<E;C+=1){const N=i.getChannelData(C),M=T.getChannelData(C);_.fill(0),v.fill(0),TT(a,c,l,d,m,_,v,0,h,N,M)}return T},nD=(i,e,t,s,a)=>(l,c)=>{const d=new WeakMap;let m=null;const h=async(_,v)=>{let T=null,E=e(_);const C=Ft(E,v);if(v.createIIRFilter===void 0?T=i(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):C||(E=v.createIIRFilter(c,l)),d.set(v,T===null?E:T),T!==null){if(m===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new t(_.context.destination.channelCount,_.context.length,v.sampleRate);m=(async()=>{await s(_,M,M.destination);const x=await a(M);return tD(x,v,l,c)})()}const N=await m;return T.buffer=N,T.start(0),T}return await s(_,v,E),E};return{render(_,v){const T=d.get(v);return T!==void 0?Promise.resolve(T):h(_,v)}}},iD=(i,e,t,s,a,l)=>c=>(d,m)=>{const h=i.get(d);if(h===void 0){if(!c&&l(d)){const _=s(d),{outputs:v}=t(d);for(const T of v)if(aa(T)){const E=s(T[0]);e(_,E,T[1],T[2])}else{const E=a(T[0]);_.disconnect(E,T[1])}}i.set(d,m)}else i.set(d,h+m)},sD=(i,e)=>t=>{const s=i.get(t);return e(s)||e(t)},oD=(i,e)=>t=>i.has(t)||e(t),rD=(i,e)=>t=>i.has(t)||e(t),aD=(i,e)=>t=>{const s=i.get(t);return e(s)||e(t)},lD=i=>e=>i!==null&&e instanceof i,uD=i=>e=>i!==null&&typeof i.AudioNode=="function"&&e instanceof i.AudioNode,cD=i=>e=>i!==null&&typeof i.AudioParam=="function"&&e instanceof i.AudioParam,fD=(i,e)=>t=>i(t)||e(t),dD=i=>e=>i!==null&&e instanceof i,hD=i=>i!==null&&i.isSecureContext,pD=(i,e,t,s)=>class extends i{constructor(l,c){const d=t(l),m=e(d,c);if(s(d))throw TypeError();super(l,!0,m,null),this._nativeMediaElementAudioSourceNode=m}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},mD={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},gD=(i,e,t,s)=>class extends i{constructor(l,c){const d=t(l);if(s(d))throw new TypeError;const m={...mD,...c},h=e(d,m);super(l,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},_D=(i,e,t,s)=>class extends i{constructor(l,c){const d=t(l),m=e(d,c);if(s(d))throw new TypeError;super(l,!0,m,null),this._nativeMediaStreamAudioSourceNode=m}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},yD=(i,e,t)=>class extends i{constructor(a,l){const c=t(a),d=e(c,l);super(a,!0,d,null)}},vD=(i,e,t,s,a,l)=>class extends t{constructor(d,m){super(d),this._nativeContext=d,gu.set(this,d),s(d)&&a.set(d,new Set),this._destination=new i(this,m),this._listener=e(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const m=typeof d=="function"?l(this,d):null;this._nativeContext.onstatechange=m;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===m?d:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ta=i=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=i.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},TD=(i,e)=>(t,s,a)=>{const l=new Set;return t.connect=(c=>(d,m=0,h=0)=>{const _=l.size===0;if(e(d))return c.call(t,d,m,h),i(l,[d,m,h],v=>v[0]===d&&v[1]===m&&v[2]===h,!0),_&&s(),d;c.call(t,d,m),i(l,[d,m],v=>v[0]===d&&v[1]===m,!0),_&&s()})(t.connect),t.disconnect=(c=>(d,m,h)=>{const _=l.size>0;if(d===void 0)c.apply(t),l.clear();else if(typeof d=="number"){c.call(t,d);for(const T of l)T[1]===d&&l.delete(T)}else{e(d)?c.call(t,d,m,h):c.call(t,d,m);for(const T of l)T[0]===d&&(m===void 0||T[1]===m)&&(h===void 0||T[2]===h)&&l.delete(T)}const v=l.size===0;_&&v&&a()})(t.disconnect),t},st=(i,e,t)=>{const s=e[t];s!==void 0&&s!==i[t]&&(i[t]=s)},Ct=(i,e)=>{st(i,e,"channelCount"),st(i,e,"channelCountMode"),st(i,e,"channelInterpretation")},yv=i=>typeof i.getFloatTimeDomainData=="function",SD=i=>{i.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);i.getByteTimeDomainData(t);const s=Math.max(t.length,i.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},ED=(i,e)=>(t,s)=>{const a=t.createAnalyser();if(Ct(a,s),!(s.maxDecibels>s.minDecibels))throw e();return st(a,s,"fftSize"),st(a,s,"maxDecibels"),st(a,s,"minDecibels"),st(a,s,"smoothingTimeConstant"),i(yv,()=>yv(a))||SD(a),a},CD=i=>i===null?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null,lt=(i,e,t)=>{const s=e[t];s!==void 0&&s!==i[t].value&&(i[t].value=s)},AD=i=>{i.start=(e=>{let t=!1;return(s=0,a=0,l)=>{if(t)throw xt();e.call(i,s,a,l),t=!0}})(i.start)},Gd=i=>{i.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(i,t,s,a)})(i.start)},Fd=i=>{i.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(i,t)})(i.stop)},ND=(i,e,t,s,a,l,c,d,m,h,_)=>(v,T)=>{const E=v.createBufferSource();return Ct(E,T),lt(E,T,"playbackRate"),st(E,T,"buffer"),st(E,T,"loop"),st(E,T,"loopEnd"),st(E,T,"loopStart"),e(t,()=>t(v))||AD(E),e(s,()=>s(v))||m(E),e(a,()=>a(v))||h(E,v),e(l,()=>l(v))||Gd(E),e(c,()=>c(v))||_(E,v),e(d,()=>d(v))||Fd(E),i(v,E),E},MD=i=>i===null?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null,xD=(i,e)=>(t,s,a)=>{const l=t.destination;if(l.channelCount!==s)try{l.channelCount=s}catch{}a&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:s});const c=i(t,{channelCount:s,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return e(c,"channelCount",d=>()=>d.call(c),d=>m=>{d.call(c,m);try{l.channelCount=m}catch(h){if(m>l.maxChannelCount)throw h}}),e(c,"channelCountMode",d=>()=>d.call(c),d=>m=>{d.call(c,m),l.channelCountMode=m}),e(c,"channelInterpretation",d=>()=>d.call(c),d=>m=>{d.call(c,m),l.channelInterpretation=m}),Object.defineProperty(c,"maxChannelCount",{get:()=>l.maxChannelCount}),c.connect(l),c},wD=i=>i===null?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null,RD=i=>{const{port1:e}=new MessageChannel;try{e.postMessage(i)}finally{e.close()}},bD=(i,e,t,s,a)=>(l,c,d,m,h,_)=>{if(d!==null)try{const v=new d(l,m,_),T=new Map;let E=null;if(Object.defineProperties(v,{channelCount:{get:()=>_.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>E,set:C=>{typeof E=="function"&&v.removeEventListener("processorerror",E),E=typeof C=="function"?C:null,typeof E=="function"&&v.addEventListener("processorerror",E)}}}),v.addEventListener=(C=>(...N)=>{if(N[0]==="processorerror"){const M=typeof N[1]=="function"?N[1]:typeof N[1]=="object"&&N[1]!==null&&typeof N[1].handleEvent=="function"?N[1].handleEvent:null;if(M!==null){const x=T.get(N[1]);x!==void 0?N[1]=x:(N[1]=q=>{q.type==="error"?(Object.defineProperties(q,{type:{value:"processorerror"}}),M(q)):M(new ErrorEvent(N[0],{...q}))},T.set(M,N[1]))}}return C.call(v,"error",N[1],N[2]),C.call(v,...N)})(v.addEventListener),v.removeEventListener=(C=>(...N)=>{if(N[0]==="processorerror"){const M=T.get(N[1]);M!==void 0&&(T.delete(N[1]),N[1]=M)}return C.call(v,"error",N[1],N[2]),C.call(v,N[0],N[1],N[2])})(v.removeEventListener),_.numberOfOutputs!==0){const C=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(C).connect(l.destination),a(v,()=>C.disconnect(),()=>C.connect(l.destination))}return v}catch(v){throw v.code===11?s():v}if(h===void 0)throw s();return RD(_),e(l,c,h,_)},ST=(i,e)=>i===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*e))))),DD=i=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:l})=>{s.close(),a.close(),e(l)},s.onmessageerror=({data:l})=>{s.close(),a.close(),t(l)},a.postMessage(i)}),ID=async(i,e)=>{const t=await DD(e);return new i(t)},kD=(i,e,t,s)=>{let a=Sd.get(i);a===void 0&&(a=new WeakMap,Sd.set(i,a));const l=ID(t,s);return a.set(e,l),l},UD=(i,e,t,s,a,l,c,d,m,h,_,v,T)=>(E,C,N,M)=>{if(M.numberOfInputs===0&&M.numberOfOutputs===0)throw m();const x=Array.isArray(M.outputChannelCount)?M.outputChannelCount:Array.from(M.outputChannelCount);if(x.some(le=>le<1))throw m();if(x.length!==M.numberOfOutputs)throw e();if(M.channelCountMode!=="explicit")throw m();const q=M.channelCount*M.numberOfInputs,k=x.reduce((le,ye)=>le+ye,0),F=N.parameterDescriptors===void 0?0:N.parameterDescriptors.length;if(q+F>6||k>6)throw m();const R=new MessageChannel,O=[],I=[];for(let le=0;le<M.numberOfInputs;le+=1)O.push(c(E,{channelCount:M.channelCount,channelCountMode:M.channelCountMode,channelInterpretation:M.channelInterpretation,gain:1})),I.push(a(E,{channelCount:M.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:M.channelCount}));const V=[];if(N.parameterDescriptors!==void 0)for(const{defaultValue:le,maxValue:ye,minValue:ut,name:Ze}of N.parameterDescriptors){const be=l(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:M.parameterData[Ze]!==void 0?M.parameterData[Ze]:le===void 0?0:le});Object.defineProperties(be.offset,{defaultValue:{get:()=>le===void 0?0:le},maxValue:{get:()=>ye===void 0?Bt:ye},minValue:{get:()=>ut===void 0?jt:ut}}),V.push(be)}const B=s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+F)}),W=ST(C,E.sampleRate),Z=d(E,W,q+F,Math.max(1,k)),H=a(E,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),ne=[];for(let le=0;le<M.numberOfOutputs;le+=1)ne.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[le]}));for(let le=0;le<M.numberOfInputs;le+=1){O[le].connect(I[le]);for(let ye=0;ye<M.channelCount;ye+=1)I[le].connect(B,ye,le*M.channelCount+ye)}const ie=new yT(N.parameterDescriptors===void 0?[]:N.parameterDescriptors.map(({name:le},ye)=>{const ut=V[ye];return ut.connect(B,0,q+ye),ut.start(0),[le,ut.offset]}));B.connect(Z);let fe=M.channelInterpretation,U=null;const X=M.numberOfOutputs===0?[Z]:ne,ee={get bufferSize(){return W},get channelCount(){return M.channelCount},set channelCount(le){throw t()},get channelCountMode(){return M.channelCountMode},set channelCountMode(le){throw t()},get channelInterpretation(){return fe},set channelInterpretation(le){for(const ye of O)ye.channelInterpretation=le;fe=le},get context(){return Z.context},get inputs(){return O},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(le){typeof U=="function"&&ee.removeEventListener("processorerror",U),U=typeof le=="function"?le:null,typeof U=="function"&&ee.addEventListener("processorerror",U)},get parameters(){return ie},get port(){return R.port2},addEventListener(...le){return Z.addEventListener(le[0],le[1],le[2])},connect:i.bind(null,X),disconnect:h.bind(null,X),dispatchEvent(...le){return Z.dispatchEvent(le[0])},removeEventListener(...le){return Z.removeEventListener(le[0],le[1],le[2])}},se=new Map;R.port1.addEventListener=(le=>(...ye)=>{if(ye[0]==="message"){const ut=typeof ye[1]=="function"?ye[1]:typeof ye[1]=="object"&&ye[1]!==null&&typeof ye[1].handleEvent=="function"?ye[1].handleEvent:null;if(ut!==null){const Ze=se.get(ye[1]);Ze!==void 0?ye[1]=Ze:(ye[1]=be=>{_(E.currentTime,E.sampleRate,()=>ut(be))},se.set(ut,ye[1]))}}return le.call(R.port1,ye[0],ye[1],ye[2])})(R.port1.addEventListener),R.port1.removeEventListener=(le=>(...ye)=>{if(ye[0]==="message"){const ut=se.get(ye[1]);ut!==void 0&&(se.delete(ye[1]),ye[1]=ut)}return le.call(R.port1,ye[0],ye[1],ye[2])})(R.port1.removeEventListener);let ue=null;Object.defineProperty(R.port1,"onmessage",{get:()=>ue,set:le=>{typeof ue=="function"&&R.port1.removeEventListener("message",ue),ue=typeof le=="function"?le:null,typeof ue=="function"&&(R.port1.addEventListener("message",ue),R.port1.start())}}),N.prototype.port=R.port1;let w=null;kD(E,ee,N,M).then(le=>w=le);const te=ru(M.numberOfInputs,M.channelCount),re=ru(M.numberOfOutputs,x),oe=N.parameterDescriptors===void 0?[]:N.parameterDescriptors.reduce((le,{name:ye})=>({...le,[ye]:new Float32Array(128)}),{});let he=!0;const Se=()=>{M.numberOfOutputs>0&&Z.disconnect(H);for(let le=0,ye=0;le<M.numberOfOutputs;le+=1){const ut=ne[le];for(let Ze=0;Ze<x[le];Ze+=1)H.disconnect(ut,ye+Ze,Ze);ye+=x[le]}},ce=new Map;Z.onaudioprocess=({inputBuffer:le,outputBuffer:ye})=>{if(w!==null){const ut=v(ee);for(let Ze=0;Ze<W;Ze+=128){for(let be=0;be<M.numberOfInputs;be+=1)for(let Ke=0;Ke<M.channelCount;Ke+=1)ou(le,te[be],Ke,Ke,Ze);N.parameterDescriptors!==void 0&&N.parameterDescriptors.forEach(({name:be},Ke)=>{ou(le,oe,be,q+Ke,Ze)});for(let be=0;be<M.numberOfInputs;be+=1)for(let Ke=0;Ke<x[be];Ke+=1)re[be][Ke].byteLength===0&&(re[be][Ke]=new Float32Array(128));try{const be=te.map((Vt,Jn)=>{if(ut[Jn].size>0)return ce.set(Jn,W/128),Vt;const Rt=ce.get(Jn);return Rt===void 0?[]:(Vt.every(Pu=>Pu.every(Sa=>Sa===0))&&(Rt===1?ce.delete(Jn):ce.set(Jn,Rt-1)),Vt)});he=_(E.currentTime+Ze/E.sampleRate,E.sampleRate,()=>w.process(be,re,oe));for(let Vt=0,Jn=0;Vt<M.numberOfOutputs;Vt+=1){for(let gs=0;gs<x[Vt];gs+=1)vT(ye,re[Vt],gs,Jn+gs,Ze);Jn+=x[Vt]}}catch(be){he=!1,ee.dispatchEvent(new ErrorEvent("processorerror",{colno:be.colno,filename:be.filename,lineno:be.lineno,message:be.message}))}if(!he){for(let be=0;be<M.numberOfInputs;be+=1){O[be].disconnect(I[be]);for(let Ke=0;Ke<M.channelCount;Ke+=1)I[Ze].disconnect(B,Ke,be*M.channelCount+Ke)}if(N.parameterDescriptors!==void 0){const be=N.parameterDescriptors.length;for(let Ke=0;Ke<be;Ke+=1){const Vt=V[Ke];Vt.disconnect(B,0,q+Ke),Vt.stop()}}B.disconnect(Z),Z.onaudioprocess=null,Le?Se():Yn();break}}}};let Le=!1;const on=c(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Dn=()=>Z.connect(on).connect(E.destination),Yn=()=>{Z.disconnect(on),on.disconnect()},Ta=()=>{if(he){Yn(),M.numberOfOutputs>0&&Z.connect(H);for(let le=0,ye=0;le<M.numberOfOutputs;le+=1){const ut=ne[le];for(let Ze=0;Ze<x[le];Ze+=1)H.connect(ut,ye+Ze,Ze);ye+=x[le]}}Le=!0},si=()=>{he&&(Dn(),Se()),Le=!1};return Dn(),T(ee,Ta,si)},ET=(i,e)=>{const t=i.createBiquadFilter();return Ct(t,e),lt(t,e,"Q"),lt(t,e,"detune"),lt(t,e,"frequency"),lt(t,e,"gain"),st(t,e,"type"),t},OD=(i,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return i!==null&&i.name==="webkitAudioContext"&&e(t,a),Ct(a,s),a},VD=i=>{const e=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw xt()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw xt()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw xt()}})},la=(i,e)=>{const t=i.createChannelSplitter(e.numberOfOutputs);return Ct(t,e),VD(t),t},qD=(i,e,t,s,a)=>(l,c)=>{if(l.createConstantSource===void 0)return t(l,c);const d=l.createConstantSource();return Ct(d,c),lt(d,c,"offset"),e(s,()=>s(l))||Gd(d),e(a,()=>a(l))||Fd(d),i(l,d),d},Zo=(i,e)=>(i.connect=e.connect.bind(e),i.disconnect=e.disconnect.bind(e),i),PD=(i,e,t,s)=>(a,{offset:l,...c})=>{const d=a.createBuffer(1,2,44100),m=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=t(a,{...c,gain:l}),_=d.getChannelData(0);_[0]=1,_[1]=1,m.buffer=d,m.loop=!0;const v={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(C){h.channelCount=C},get channelCountMode(){return h.channelCountMode},set channelCountMode(C){h.channelCountMode=C},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(C){h.channelInterpretation=C},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return m.onended},set onended(C){m.onended=C},addEventListener(...C){return m.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return m.dispatchEvent(C[0])},removeEventListener(...C){return m.removeEventListener(C[0],C[1],C[2])},start(C=0){m.start.call(m,C)},stop(C=0){m.stop.call(m,C)}},T=()=>m.connect(h),E=()=>m.disconnect(h);return i(a,m),s(Zo(v,h),T,E)},LD=(i,e)=>(t,s)=>{const a=t.createConvolver();if(Ct(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),st(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",l=>()=>l.call(a),l=>c=>{if(c>2)throw i();return l.call(a,c)}),s.channelCountMode==="max"))throw i();return e(a,"channelCountMode",l=>()=>l.call(a),l=>c=>{if(c==="max")throw i();return l.call(a,c)}),a},CT=(i,e)=>{const t=i.createDelay(e.maxDelayTime);return Ct(t,e),lt(t,e,"delayTime"),t},GD=i=>(e,t)=>{const s=e.createDynamicsCompressor();if(Ct(s,t),t.channelCount>2||t.channelCountMode==="max")throw i();return lt(s,t,"attack"),lt(s,t,"knee"),lt(s,t,"ratio"),lt(s,t,"release"),lt(s,t,"threshold"),s},nn=(i,e)=>{const t=i.createGain();return Ct(t,e),lt(t,e,"gain"),t},FD=i=>(e,t,s)=>{if(e.createIIRFilter===void 0)return i(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return Ct(a,s),a};function zD(i,e){const t=e[0]*e[0]+e[1]*e[1];return[(i[0]*e[0]+i[1]*e[1])/t,(i[1]*e[0]-i[0]*e[1])/t]}function BD(i,e){return[i[0]*e[0]-i[1]*e[1],i[0]*e[1]+i[1]*e[0]]}function vv(i,e){let t=[0,0];for(let s=i.length-1;s>=0;s-=1)t=BD(t,e),t[0]+=i[s];return t}const HD=(i,e,t,s)=>(a,l,{channelCount:c,channelCountMode:d,channelInterpretation:m,feedback:h,feedforward:_})=>{const v=ST(l,a.sampleRate),T=h instanceof Float64Array?h:new Float64Array(h),E=_ instanceof Float64Array?_:new Float64Array(_),C=T.length,N=E.length,M=Math.min(C,N);if(C===0||C>20)throw s();if(T[0]===0)throw e();if(N===0||N>20)throw s();if(E[0]===0)throw e();if(T[0]!==1){for(let V=0;V<N;V+=1)E[V]/=T[0];for(let V=1;V<C;V+=1)T[V]/=T[0]}const x=t(a,v,c,c);x.channelCount=c,x.channelCountMode=d,x.channelInterpretation=m;const q=32,k=[],F=[],R=[];for(let V=0;V<c;V+=1){k.push(0);const B=new Float32Array(q),W=new Float32Array(q);B.fill(0),W.fill(0),F.push(B),R.push(W)}x.onaudioprocess=V=>{const B=V.inputBuffer,W=V.outputBuffer,Z=B.numberOfChannels;for(let H=0;H<Z;H+=1){const ne=B.getChannelData(H),ie=W.getChannelData(H);k[H]=TT(T,C,E,N,M,F[H],R[H],k[H],q,ne,ie)}};const O=a.sampleRate/2;return Zo({get bufferSize(){return v},get channelCount(){return x.channelCount},set channelCount(V){x.channelCount=V},get channelCountMode(){return x.channelCountMode},set channelCountMode(V){x.channelCountMode=V},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(V){x.channelInterpretation=V},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},addEventListener(...V){return x.addEventListener(V[0],V[1],V[2])},dispatchEvent(...V){return x.dispatchEvent(V[0])},getFrequencyResponse(V,B,W){if(V.length!==B.length||B.length!==W.length)throw i();const Z=V.length;for(let H=0;H<Z;H+=1){const ne=-Math.PI*(V[H]/O),ie=[Math.cos(ne),Math.sin(ne)],fe=vv(E,ie),U=vv(T,ie),X=zD(fe,U);B[H]=Math.sqrt(X[0]*X[0]+X[1]*X[1]),W[H]=Math.atan2(X[1],X[0])}},removeEventListener(...V){return x.removeEventListener(V[0],V[1],V[2])}},x)},YD=(i,e)=>i.createMediaElementSource(e.mediaElement),JD=(i,e)=>{const t=i.createMediaStreamDestination();return Ct(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},XD=(i,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((l,c)=>l.id<c.id?-1:l.id>c.id?1:0);const s=t.slice(0,1),a=i.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},WD=(i,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),l=t.createMediaStreamSource(a);if(s.kind!=="audio")throw i();if(e(t))throw new TypeError;return l},QD=i=>i===null?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null,ZD=(i,e,t,s,a,l)=>(c,d)=>{const m=c.createOscillator();return Ct(m,d),lt(m,d,"detune"),lt(m,d,"frequency"),d.periodicWave!==void 0?m.setPeriodicWave(d.periodicWave):st(m,d,"type"),e(t,()=>t(c))||Gd(m),e(s,()=>s(c))||l(m,c),e(a,()=>a(c))||Fd(m),i(c,m),m},KD=i=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?i(e,t):(Ct(s,t),lt(s,t,"orientationX"),lt(s,t,"orientationY"),lt(s,t,"orientationZ"),lt(s,t,"positionX"),lt(s,t,"positionY"),lt(s,t,"positionZ"),st(s,t,"coneInnerAngle"),st(s,t,"coneOuterAngle"),st(s,t,"coneOuterGain"),st(s,t,"distanceModel"),st(s,t,"maxDistance"),st(s,t,"panningModel"),st(s,t,"refDistance"),st(s,t,"rolloffFactor"),s)},$D=(i,e,t,s,a,l,c,d,m,h)=>(_,{coneInnerAngle:v,coneOuterAngle:T,coneOuterGain:E,distanceModel:C,maxDistance:N,orientationX:M,orientationY:x,orientationZ:q,panningModel:k,positionX:F,positionY:R,positionZ:O,refDistance:I,rolloffFactor:V,...B})=>{const W=_.createPanner();if(B.channelCount>2||B.channelCountMode==="max")throw c();Ct(W,B);const Z={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},H=t(_,{...Z,channelInterpretation:"speakers",numberOfInputs:6}),ne=s(_,{...B,gain:1}),ie=s(_,{...Z,gain:1}),fe=s(_,{...Z,gain:0}),U=s(_,{...Z,gain:0}),X=s(_,{...Z,gain:0}),ee=s(_,{...Z,gain:0}),se=s(_,{...Z,gain:0}),ue=a(_,256,6,1),w=l(_,{...Z,curve:new Float32Array([1,1]),oversample:"none"});let Y=[M,x,q],te=[F,R,O];const re=new Float32Array(1);ue.onaudioprocess=({inputBuffer:ce})=>{const Le=[m(ce,re,0),m(ce,re,1),m(ce,re,2)];Le.some((Dn,Yn)=>Dn!==Y[Yn])&&(W.setOrientation(...Le),Y=Le);const on=[m(ce,re,3),m(ce,re,4),m(ce,re,5)];on.some((Dn,Yn)=>Dn!==te[Yn])&&(W.setPosition(...on),te=on)},Object.defineProperty(fe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"defaultValue",{get:()=>0});const oe={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(ce){if(ce>2)throw c();ne.channelCount=ce,W.channelCount=ce},get channelCountMode(){return W.channelCountMode},set channelCountMode(ce){if(ce==="max")throw c();ne.channelCountMode=ce,W.channelCountMode=ce},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(ce){ne.channelInterpretation=ce,W.channelInterpretation=ce},get coneInnerAngle(){return W.coneInnerAngle},set coneInnerAngle(ce){W.coneInnerAngle=ce},get coneOuterAngle(){return W.coneOuterAngle},set coneOuterAngle(ce){W.coneOuterAngle=ce},get coneOuterGain(){return W.coneOuterGain},set coneOuterGain(ce){if(ce<0||ce>1)throw e();W.coneOuterGain=ce},get context(){return W.context},get distanceModel(){return W.distanceModel},set distanceModel(ce){W.distanceModel=ce},get inputs(){return[ne]},get maxDistance(){return W.maxDistance},set maxDistance(ce){if(ce<0)throw new RangeError;W.maxDistance=ce},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get orientationX(){return ie.gain},get orientationY(){return fe.gain},get orientationZ(){return U.gain},get panningModel(){return W.panningModel},set panningModel(ce){W.panningModel=ce},get positionX(){return X.gain},get positionY(){return ee.gain},get positionZ(){return se.gain},get refDistance(){return W.refDistance},set refDistance(ce){if(ce<0)throw new RangeError;W.refDistance=ce},get rolloffFactor(){return W.rolloffFactor},set rolloffFactor(ce){if(ce<0)throw new RangeError;W.rolloffFactor=ce},addEventListener(...ce){return ne.addEventListener(ce[0],ce[1],ce[2])},dispatchEvent(...ce){return ne.dispatchEvent(ce[0])},removeEventListener(...ce){return ne.removeEventListener(ce[0],ce[1],ce[2])}};v!==oe.coneInnerAngle&&(oe.coneInnerAngle=v),T!==oe.coneOuterAngle&&(oe.coneOuterAngle=T),E!==oe.coneOuterGain&&(oe.coneOuterGain=E),C!==oe.distanceModel&&(oe.distanceModel=C),N!==oe.maxDistance&&(oe.maxDistance=N),M!==oe.orientationX.value&&(oe.orientationX.value=M),x!==oe.orientationY.value&&(oe.orientationY.value=x),q!==oe.orientationZ.value&&(oe.orientationZ.value=q),k!==oe.panningModel&&(oe.panningModel=k),F!==oe.positionX.value&&(oe.positionX.value=F),R!==oe.positionY.value&&(oe.positionY.value=R),O!==oe.positionZ.value&&(oe.positionZ.value=O),I!==oe.refDistance&&(oe.refDistance=I),V!==oe.rolloffFactor&&(oe.rolloffFactor=V),(Y[0]!==1||Y[1]!==0||Y[2]!==0)&&W.setOrientation(...Y),(te[0]!==0||te[1]!==0||te[2]!==0)&&W.setPosition(...te);const he=()=>{ne.connect(W),i(ne,w,0,0),w.connect(ie).connect(H,0,0),w.connect(fe).connect(H,0,1),w.connect(U).connect(H,0,2),w.connect(X).connect(H,0,3),w.connect(ee).connect(H,0,4),w.connect(se).connect(H,0,5),H.connect(ue).connect(_.destination)},Se=()=>{ne.disconnect(W),d(ne,w,0,0),w.disconnect(ie),ie.disconnect(H),w.disconnect(fe),fe.disconnect(H),w.disconnect(U),U.disconnect(H),w.disconnect(X),X.disconnect(H),w.disconnect(ee),ee.disconnect(H),w.disconnect(se),se.disconnect(H),H.disconnect(ue),ue.disconnect(_.destination)};return h(Zo(oe,W),he,Se)},jD=i=>(e,{disableNormalization:t,imag:s,real:a})=>{const l=s instanceof Float32Array?s:new Float32Array(s),c=a instanceof Float32Array?a:new Float32Array(a),d=e.createPeriodicWave(c,l,{disableNormalization:t});if(Array.from(s).length<2)throw i();return d},ua=(i,e,t,s)=>i.createScriptProcessor(e,t,s),eI=(i,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return i(t,s);const l=t.createStereoPanner();return Ct(l,s),lt(l,s,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>a,set:c=>{if(c!==a)throw e()}}),l},tI=(i,e,t,s,a,l)=>{const d=new Float32Array([1,1]),m=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},_={...h,oversample:"none"},v=(C,N,M,x)=>{const q=new Float32Array(16385),k=new Float32Array(16385);for(let B=0;B<16385;B+=1){const W=B/16384*m;q[B]=Math.cos(W),k[B]=Math.sin(W)}const F=t(C,{...h,gain:0}),R=s(C,{..._,curve:q}),O=s(C,{..._,curve:d}),I=t(C,{...h,gain:0}),V=s(C,{..._,curve:k});return{connectGraph(){N.connect(F),N.connect(O.inputs===void 0?O:O.inputs[0]),N.connect(I),O.connect(M),M.connect(R.inputs===void 0?R:R.inputs[0]),M.connect(V.inputs===void 0?V:V.inputs[0]),R.connect(F.gain),V.connect(I.gain),F.connect(x,0,0),I.connect(x,0,1)},disconnectGraph(){N.disconnect(F),N.disconnect(O.inputs===void 0?O:O.inputs[0]),N.disconnect(I),O.disconnect(M),M.disconnect(R.inputs===void 0?R:R.inputs[0]),M.disconnect(V.inputs===void 0?V:V.inputs[0]),R.disconnect(F.gain),V.disconnect(I.gain),F.disconnect(x,0,0),I.disconnect(x,0,1)}}},T=(C,N,M,x)=>{const q=new Float32Array(16385),k=new Float32Array(16385),F=new Float32Array(16385),R=new Float32Array(16385),O=Math.floor(16385/2);for(let X=0;X<16385;X+=1)if(X>O){const ee=(X-O)/(16384-O)*m;q[X]=Math.cos(ee),k[X]=Math.sin(ee),F[X]=0,R[X]=1}else{const ee=X/(16384-O)*m;q[X]=1,k[X]=0,F[X]=Math.cos(ee),R[X]=Math.sin(ee)}const I=e(C,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),V=t(C,{...h,gain:0}),B=s(C,{..._,curve:q}),W=t(C,{...h,gain:0}),Z=s(C,{..._,curve:k}),H=s(C,{..._,curve:d}),ne=t(C,{...h,gain:0}),ie=s(C,{..._,curve:F}),fe=t(C,{...h,gain:0}),U=s(C,{..._,curve:R});return{connectGraph(){N.connect(I),N.connect(H.inputs===void 0?H:H.inputs[0]),I.connect(V,0),I.connect(W,0),I.connect(ne,1),I.connect(fe,1),H.connect(M),M.connect(B.inputs===void 0?B:B.inputs[0]),M.connect(Z.inputs===void 0?Z:Z.inputs[0]),M.connect(ie.inputs===void 0?ie:ie.inputs[0]),M.connect(U.inputs===void 0?U:U.inputs[0]),B.connect(V.gain),Z.connect(W.gain),ie.connect(ne.gain),U.connect(fe.gain),V.connect(x,0,0),ne.connect(x,0,0),W.connect(x,0,1),fe.connect(x,0,1)},disconnectGraph(){N.disconnect(I),N.disconnect(H.inputs===void 0?H:H.inputs[0]),I.disconnect(V,0),I.disconnect(W,0),I.disconnect(ne,1),I.disconnect(fe,1),H.disconnect(M),M.disconnect(B.inputs===void 0?B:B.inputs[0]),M.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),M.disconnect(ie.inputs===void 0?ie:ie.inputs[0]),M.disconnect(U.inputs===void 0?U:U.inputs[0]),B.disconnect(V.gain),Z.disconnect(W.gain),ie.disconnect(ne.gain),U.disconnect(fe.gain),V.disconnect(x,0,0),ne.disconnect(x,0,0),W.disconnect(x,0,1),fe.disconnect(x,0,1)}}},E=(C,N,M,x,q)=>{if(N===1)return v(C,M,x,q);if(N===2)return T(C,M,x,q);throw a()};return(C,{channelCount:N,channelCountMode:M,pan:x,...q})=>{if(M==="max")throw a();const k=i(C,{...q,channelCount:1,channelCountMode:M,numberOfInputs:2}),F=t(C,{...q,channelCount:N,channelCountMode:M,gain:1}),R=t(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:x});let{connectGraph:O,disconnectGraph:I}=E(C,N,F,R,k);Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"maxValue",{get:()=>1}),Object.defineProperty(R.gain,"minValue",{get:()=>-1});const V={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(H){F.channelCount!==H&&(B&&I(),{connectGraph:O,disconnectGraph:I}=E(C,H,F,R,k),B&&O()),F.channelCount=H},get channelCountMode(){return F.channelCountMode},set channelCountMode(H){if(H==="clamped-max"||H==="max")throw a();F.channelCountMode=H},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(H){F.channelInterpretation=H},get context(){return F.context},get inputs(){return[F]},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get pan(){return R.gain},addEventListener(...H){return F.addEventListener(H[0],H[1],H[2])},dispatchEvent(...H){return F.dispatchEvent(H[0])},removeEventListener(...H){return F.removeEventListener(H[0],H[1],H[2])}};let B=!1;const W=()=>{O(),B=!0},Z=()=>{I(),B=!1};return l(Zo(V,k),W,Z)}},nI=(i,e,t,s,a,l,c)=>(d,m)=>{const h=d.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return t(d,m);Ct(h,m);const _=m.curve===null||m.curve instanceof Float32Array?m.curve:new Float32Array(m.curve);if(_!==null&&_.length<2)throw e();st(h,{curve:_},"curve"),st(h,m,"oversample");let v=null,T=!1;return c(h,"curve",N=>()=>N.call(h),N=>M=>(N.call(h,M),T&&(s(M)&&v===null?v=i(d,h):!s(M)&&v!==null&&(v(),v=null)),M)),a(h,()=>{T=!0,s(h.curve)&&(v=i(d,h))},()=>{T=!1,v!==null&&(v(),v=null)})},iI=(i,e,t,s,a)=>(l,{curve:c,oversample:d,...m})=>{const h=l.createWaveShaper(),_=l.createWaveShaper();Ct(h,m),Ct(_,m);const v=t(l,{...m,gain:1}),T=t(l,{...m,gain:-1}),E=t(l,{...m,gain:1}),C=t(l,{...m,gain:-1});let N=null,M=!1,x=null;const q={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(R){v.channelCount=R,T.channelCount=R,h.channelCount=R,E.channelCount=R,_.channelCount=R,C.channelCount=R},get channelCountMode(){return h.channelCountMode},set channelCountMode(R){v.channelCountMode=R,T.channelCountMode=R,h.channelCountMode=R,E.channelCountMode=R,_.channelCountMode=R,C.channelCountMode=R},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(R){v.channelInterpretation=R,T.channelInterpretation=R,h.channelInterpretation=R,E.channelInterpretation=R,_.channelInterpretation=R,C.channelInterpretation=R},get context(){return h.context},get curve(){return x},set curve(R){if(R!==null&&R.length<2)throw e();if(R===null)h.curve=R,_.curve=R;else{const O=R.length,I=new Float32Array(O+2-O%2),V=new Float32Array(O+2-O%2);I[0]=R[0],V[0]=-R[O-1];const B=Math.ceil((O+1)/2),W=(O+1)/2-1;for(let Z=1;Z<B;Z+=1){const H=Z/B*W,ne=Math.floor(H),ie=Math.ceil(H);I[Z]=ne===ie?R[ne]:(1-(H-ne))*R[ne]+(1-(ie-H))*R[ie],V[Z]=ne===ie?-R[O-1-ne]:-((1-(H-ne))*R[O-1-ne])-(1-(ie-H))*R[O-1-ie]}I[B]=O%2===1?R[B-1]:(R[B-2]+R[B-1])/2,h.curve=I,_.curve=V}x=R,M&&(s(x)&&N===null?N=i(l,v):N!==null&&(N(),N=null))},get inputs(){return[v]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(R){h.oversample=R,_.oversample=R},addEventListener(...R){return v.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return v.dispatchEvent(R[0])},removeEventListener(...R){return v.removeEventListener(R[0],R[1],R[2])}};c!==null&&(q.curve=c instanceof Float32Array?c:new Float32Array(c)),d!==q.oversample&&(q.oversample=d);const k=()=>{v.connect(h).connect(E),v.connect(T).connect(_).connect(C).connect(E),M=!0,s(x)&&(N=i(l,v))},F=()=>{v.disconnect(h),h.disconnect(E),v.disconnect(T),T.disconnect(_),_.disconnect(C),C.disconnect(E),M=!1,N!==null&&(N(),N=null)};return a(Zo(q,E),k,F)},Yt=()=>new DOMException("","NotSupportedError"),sI={numberOfChannels:1},oI=(i,e,t,s,a)=>class extends i{constructor(c,d,m){let h;if(typeof c=="number"&&d!==void 0&&m!==void 0)h={length:d,numberOfChannels:c,sampleRate:m};else if(typeof c=="object")h=c;else throw new Error("The given parameters are not valid.");const{length:_,numberOfChannels:v,sampleRate:T}={...sI,...h},E=s(v,_,T);e(ta,()=>ta(E))||E.addEventListener("statechange",(()=>{let C=0;const N=M=>{this._state==="running"&&(C>0?(E.removeEventListener("statechange",N),M.stopImmediatePropagation(),this._waitForThePromiseToSettle(M)):C+=1)};return N})()),super(E,v),this._length=_,this._nativeOfflineAudioContext=E,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,pT(this)}))}_waitForThePromiseToSettle(c){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(c):setTimeout(()=>this._waitForThePromiseToSettle(c))}},rI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},aI=(i,e,t,s,a,l,c)=>class extends i{constructor(m,h){const _=a(m),v={...rI,...h},T=t(_,v),E=l(_),C=E?s():null,N=m.sampleRate/2;super(m,!1,T,C),this._detune=e(this,E,T.detune,153600,-153600),this._frequency=e(this,E,T.frequency,N,-N),this._nativeOscillatorNode=T,this._onended=null,this._oscillatorNodeRenderer=C,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(m){const h=typeof m=="function"?c(this,m):null;this._nativeOscillatorNode.onended=h;const _=this._nativeOscillatorNode.onended;this._onended=_!==null&&_===h?m:_}get type(){return this._nativeOscillatorNode.type}set type(m){this._nativeOscillatorNode.type=m,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(m){this._nativeOscillatorNode.setPeriodicWave(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=m)}start(m=0){if(this._nativeOscillatorNode.start(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=m),this.context.state!=="closed"){zo(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),Ni(this)&&oa(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(m=0){this._nativeOscillatorNode.stop(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=m)}},lI=(i,e,t,s,a)=>()=>{const l=new WeakMap;let c=null,d=null,m=null;const h=async(_,v)=>{let T=t(_);const E=Ft(T,v);if(!E){const C={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,detune:T.detune.value,frequency:T.frequency.value,periodicWave:c===null?void 0:c,type:T.type};T=e(v,C),d!==null&&T.start(d),m!==null&&T.stop(m)}return l.set(v,T),E?(await i(v,_.detune,T.detune),await i(v,_.frequency,T.frequency)):(await s(v,_.detune,T.detune),await s(v,_.frequency,T.frequency)),await a(_,v,T),T};return{set periodicWave(_){c=_},set start(_){d=_},set stop(_){m=_},render(_,v){const T=l.get(v);return T!==void 0?Promise.resolve(T):h(_,v)}}},uI={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},cI=(i,e,t,s,a,l,c)=>class extends i{constructor(m,h){const _=a(m),v={...uI,...h},T=t(_,v),E=l(_),C=E?s():null;super(m,!1,T,C),this._nativePannerNode=T,this._orientationX=e(this,E,T.orientationX,Bt,jt),this._orientationY=e(this,E,T.orientationY,Bt,jt),this._orientationZ=e(this,E,T.orientationZ,Bt,jt),this._positionX=e(this,E,T.positionX,Bt,jt),this._positionY=e(this,E,T.positionY,Bt,jt),this._positionZ=e(this,E,T.positionZ,Bt,jt),c(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(m){this._nativePannerNode.coneInnerAngle=m}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(m){this._nativePannerNode.coneOuterAngle=m}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(m){this._nativePannerNode.coneOuterGain=m}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(m){this._nativePannerNode.distanceModel=m}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(m){this._nativePannerNode.maxDistance=m}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(m){this._nativePannerNode.panningModel=m}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(m){this._nativePannerNode.refDistance=m}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(m){this._nativePannerNode.rolloffFactor=m}},fI=(i,e,t,s,a,l,c,d,m,h)=>()=>{const _=new WeakMap;let v=null;const T=async(E,C)=>{let N=null,M=l(E);const x={channelCount:M.channelCount,channelCountMode:M.channelCountMode,channelInterpretation:M.channelInterpretation},q={...x,coneInnerAngle:M.coneInnerAngle,coneOuterAngle:M.coneOuterAngle,coneOuterGain:M.coneOuterGain,distanceModel:M.distanceModel,maxDistance:M.maxDistance,panningModel:M.panningModel,refDistance:M.refDistance,rolloffFactor:M.rolloffFactor},k=Ft(M,C);if("bufferSize"in M)N=s(C,{...x,gain:1});else if(!k){const F={...q,orientationX:M.orientationX.value,orientationY:M.orientationY.value,orientationZ:M.orientationZ.value,positionX:M.positionX.value,positionY:M.positionY.value,positionZ:M.positionZ.value};M=a(C,F)}if(_.set(C,N===null?M:N),N!==null){if(v===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Z=new c(6,E.context.length,C.sampleRate),H=e(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});H.connect(Z.destination),v=(async()=>{const ne=await Promise.all([E.orientationX,E.orientationY,E.orientationZ,E.positionX,E.positionY,E.positionZ].map(async(ie,fe)=>{const U=t(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe===0?1:0});return await d(Z,ie,U.offset),U}));for(let ie=0;ie<6;ie+=1)ne[ie].connect(H,0,ie),ne[ie].start(0);return h(Z)})()}const F=await v,R=s(C,{...x,gain:1});await m(E,C,R);const O=[];for(let Z=0;Z<F.numberOfChannels;Z+=1)O.push(F.getChannelData(Z));let I=[O[0][0],O[1][0],O[2][0]],V=[O[3][0],O[4][0],O[5][0]],B=s(C,{...x,gain:1}),W=a(C,{...q,orientationX:I[0],orientationY:I[1],orientationZ:I[2],positionX:V[0],positionY:V[1],positionZ:V[2]});R.connect(B).connect(W.inputs[0]),W.connect(N);for(let Z=128;Z<F.length;Z+=128){const H=[O[0][Z],O[1][Z],O[2][Z]],ne=[O[3][Z],O[4][Z],O[5][Z]];if(H.some((ie,fe)=>ie!==I[fe])||ne.some((ie,fe)=>ie!==V[fe])){I=H,V=ne;const ie=Z/C.sampleRate;B.gain.setValueAtTime(0,ie),B=s(C,{...x,gain:0}),W=a(C,{...q,orientationX:I[0],orientationY:I[1],orientationZ:I[2],positionX:V[0],positionY:V[1],positionZ:V[2]}),B.gain.setValueAtTime(1,ie),R.connect(B).connect(W.inputs[0]),W.connect(N)}}return N}return k?(await i(C,E.orientationX,M.orientationX),await i(C,E.orientationY,M.orientationY),await i(C,E.orientationZ,M.orientationZ),await i(C,E.positionX,M.positionX),await i(C,E.positionY,M.positionY),await i(C,E.positionZ,M.positionZ)):(await d(C,E.orientationX,M.orientationX),await d(C,E.orientationY,M.orientationY),await d(C,E.orientationZ,M.orientationZ),await d(C,E.positionX,M.positionX),await d(C,E.positionY,M.positionY),await d(C,E.positionZ,M.positionZ)),Qo(M)?await m(E,C,M.inputs[0]):await m(E,C,M),M};return{render(E,C){const N=_.get(C);return N!==void 0?Promise.resolve(N):T(E,C)}}},dI={disableNormalization:!1},hI=(i,e,t,s)=>class AT{constructor(l,c){const d=e(l),m=s({...dI,...c}),h=i(d,m);return t.add(h),h}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===AT.prototype||t.has(l)}},pI=(i,e)=>(t,s,a)=>(i(s).replay(a),e(s,t,a)),mI=(i,e,t)=>async(s,a,l)=>{const c=i(s);await Promise.all(c.activeInputs.map((d,m)=>Array.from(d).map(async([h,_])=>{const T=await e(h).render(h,a),E=s.context.destination;!t(h)&&(s!==E||!t(s))&&T.connect(l,_,m)})).reduce((d,m)=>[...d,...m],[]))},gI=(i,e,t)=>async(s,a,l)=>{const c=e(s);await Promise.all(Array.from(c.activeInputs).map(async([d,m])=>{const _=await i(d).render(d,a);t(d)||_.connect(l,m)}))},_I=(i,e,t,s)=>a=>i(ta,()=>ta(a))?Promise.resolve(i(s,s)).then(l=>{if(!l){const c=t(a,512,0,1);a.oncomplete=()=>{c.onaudioprocess=null,c.disconnect()},c.onaudioprocess=()=>a.currentTime,c.connect(a.destination)}return a.startRendering()}):new Promise(l=>{const c=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=d=>{c.disconnect(),l(d.renderedBuffer)},c.connect(a.destination),a.startRendering()}),yI=i=>(e,t)=>{i.set(e,t)},vI=i=>(e,t)=>i.set(e,t),TI=(i,e,t,s,a,l,c,d)=>(m,h)=>t(m).render(m,h).then(()=>Promise.all(Array.from(s(h)).map(_=>t(_).render(_,h)))).then(()=>a(h)).then(_=>(typeof _.copyFromChannel!="function"?(c(_),qd(_)):e(l,()=>l(_))||d(_),i.add(_),_)),SI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},EI=(i,e,t,s,a,l)=>class extends i{constructor(d,m){const h=a(d),_={...SI,...m},v=t(h,_),T=l(h),E=T?s():null;super(d,!1,v,E),this._pan=e(this,T,v.pan)}get pan(){return this._pan}},CI=(i,e,t,s,a)=>()=>{const l=new WeakMap,c=async(d,m)=>{let h=t(d);const _=Ft(h,m);if(!_){const v={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(m,v)}return l.set(m,h),_?await i(m,d.pan,h.pan):await s(m,d.pan,h.pan),Qo(h)?await a(d,m,h.inputs[0]):await a(d,m,h),h};return{render(d,m){const h=l.get(m);return h!==void 0?Promise.resolve(h):c(d,m)}}},AI=i=>()=>{if(i===null)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0},NI=(i,e)=>async()=>{if(i===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let l=!1,c=!1;try{await s.audioWorklet.addModule(a);const d=new i(s,"a",{numberOfOutputs:0}),m=s.createOscillator();d.port.onmessage=()=>l=!0,d.onprocessorerror=()=>c=!0,m.connect(d),m.start(0),await s.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(a)}return l&&!c},MI=(i,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},xI=()=>new DOMException("","UnknownError"),wI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},RI=(i,e,t,s,a,l,c)=>class extends i{constructor(m,h){const _=a(m),v={...wI,...h},T=t(_,v),C=l(_)?s():null;super(m,!0,T,C),this._isCurveNullified=!1,this._nativeWaveShaperNode=T,c(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(m){if(m===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(m.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=m}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(m){this._nativeWaveShaperNode.oversample=m}},bI=(i,e,t)=>()=>{const s=new WeakMap,a=async(l,c)=>{let d=e(l);if(!Ft(d,c)){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=i(c,h)}return s.set(c,d),Qo(d)?await t(l,c,d.inputs[0]):await t(l,c,d),d};return{render(l,c){const d=s.get(c);return d!==void 0?Promise.resolve(d):a(l,c)}}},DI=()=>typeof window>"u"?null:window,II=(i,e)=>t=>{t.copyFromChannel=(s,a,l=0)=>{const c=i(l),d=i(a);if(d>=t.numberOfChannels)throw e();const m=t.length,h=t.getChannelData(d),_=s.length;for(let v=c<0?-c:0;v+c<m&&v<_;v+=1)s[v]=h[v+c]},t.copyToChannel=(s,a,l=0)=>{const c=i(l),d=i(a);if(d>=t.numberOfChannels)throw e();const m=t.length,h=t.getChannelData(d),_=s.length;for(let v=c<0?-c:0;v+c<m&&v<_;v+=1)h[v+c]=s[v]}},kI=i=>e=>{e.copyFromChannel=(t=>(s,a,l=0)=>{const c=i(l),d=i(a);if(c<e.length)return t.call(e,s,d,c)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,l=0)=>{const c=i(l),d=i(a);if(c<e.length)return t.call(e,s,d,c)})(e.copyToChannel)},UI=i=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),i(e,"buffer",a=>()=>{const l=a.call(e);return l===s?null:l},a=>l=>a.call(e,l===null?s:l))},OI=(i,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const a=t.createBufferSource();e(s,()=>{const d=s.numberOfInputs;for(let m=0;m<d;m+=1)a.connect(s,0,m)},()=>a.disconnect(s))},NT=(i,e,t)=>i.copyFromChannel===void 0?i.getChannelData(t)[0]:(i.copyFromChannel(e,t),e[0]),MT=i=>{if(i===null)return!1;const e=i.length;return e%2!==0?i[Math.floor(e/2)]!==0:i[e/2-1]+i[e/2]!==0},ca=(i,e,t,s)=>{let a=i;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:l,set:c}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(i,e,{get:t(l),set:s(c)})},VI=i=>({...i,outputChannelCount:i.outputChannelCount!==void 0?i.outputChannelCount:i.numberOfInputs===1&&i.numberOfOutputs===1?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}),qI=i=>({...i,channelCount:i.numberOfOutputs}),PI=i=>{const{imag:e,real:t}=i;return e===void 0?t===void 0?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(t,()=>0),real:t}:t===void 0?{...i,imag:e,real:Array.from(e,()=>0)}:{...i,imag:e,real:t}},xT=(i,e,t)=>{try{i.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;xT(i,e,t+1e-7)}},LI=i=>{const e=i.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},GI=i=>{const e=i.createBufferSource(),t=i.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},FI=i=>{const e=i.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},zd=i=>{const e=i.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},wT=i=>{const e=i.createBuffer(1,1,44100),t=i.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Bd=i=>{const e=i.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},zI=i=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(i)}finally{e.close(),t.close()}},BI=i=>{i.start=(e=>(t=0,s=0,a)=>{const l=i.buffer,c=l===null?s:Math.min(l.duration,s);l!==null&&c>l.duration-.5/i.context.sampleRate?e.call(i,t,0,0):e.call(i,t,c,a)})(i.start)},RT=(i,e)=>{const t=e.createGain();i.connect(t);const s=(a=>()=>{a.call(i,t),i.removeEventListener("ended",s)})(i.disconnect);i.addEventListener("ended",s),Zo(i,t),i.stop=(a=>{let l=!1;return(c=0)=>{if(l)try{a.call(i,c)}catch{t.gain.setValueAtTime(0,c)}else a.call(i,c),l=!0}})(i.stop)},Ko=(i,e)=>t=>{const s={value:i};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(i,t):e.handleEvent.call(i,t)},HI=cR(Bs),YI=gR(Bs),JI=wb(_u),bT=new WeakMap,XI=Jb(bT),zn=sb(new Map,new WeakMap),$n=DI(),DT=ED(zn,ti),Hd=Yb(Ht),Ot=mI(Ht,Hd,Ls),WI=SR(DT,nt,Ot),$e=Qb(gu),Di=QD($n),Xe=dD(Di),IT=new WeakMap,kT=Pb(Ko),fa=MD($n),Yd=lD(fa),Jd=uD($n),UT=cD($n),na=wD($n),ht=JR(fR(aT),mR(HI,YI,nu,JI,iu,Ht,XI,sa,nt,Bs,Ni,Ls,Jl),zn,iD(vd,iu,Ht,nt,ea,Ni),ti,yu,Yt,Ab(nu,vd,Ht,nt,ea,$e,Ni,Xe),Db(IT,Ht,Pn),kT,$e,Yd,Jd,UT,Xe,na),QI=TR(ht,WI,ti,DT,$e,Xe),Xd=new WeakSet,Tv=CD($n),OT=_b(new Uint32Array(1)),Wd=II(OT,ti),Qd=kI(OT),VT=CR(Xd,zn,Yt,Tv,Di,AI(Tv),Wd,Qd),vu=_R(nn),qT=gI(Hd,ra,Ls),ni=fb(qT),$o=ND(vu,zn,LI,GI,FI,zd,wT,Bd,BI,UI(ca),RT),ii=pI(Xb(ra),qT),ZI=MR(ni,$o,nt,ii,Ot),Bn=XR(dR(lT),IT,Vd,WR,sR,oR,rR,aR,lR,gd,oT,fa,xT),KI=NR(ht,ZI,Bn,xt,$o,$e,Xe,Ko),$I=OR(ht,VR,ti,xt,xD(nn,ca),$e,Xe,Ot),jI=ib(ni,ET,nt,ii,Ot),Hs=vI(bT),ek=nb(ht,Bn,jI,yu,ET,$e,Xe,Hs),ps=TD(Bs,Jd),tk=OI(xt,ps),ms=OD(fa,tk),nk=ab(ms,nt,Ot),ik=rb(ht,nk,ms,$e,Xe),sk=cb(la,nt,Ot),ok=ub(ht,sk,la,$e,Xe,qI),rk=PD(vu,$o,nn,ps),jo=qD(vu,zn,rk,zd,Bd),ak=gb(ni,jo,nt,ii,Ot),lk=mb(ht,Bn,ak,jo,$e,Xe,Ko),PT=LD(Yt,ca),uk=Tb(PT,nt,Ot),ck=vb(ht,uk,PT,$e,Xe,Hs),fk=xb(ni,CT,nt,ii,Ot),dk=Mb(ht,Bn,fk,CT,$e,Xe,Hs),LT=GD(Yt),hk=Ob(ni,LT,nt,ii,Ot),pk=Ub(ht,Bn,hk,LT,Yt,$e,Xe,Hs),mk=Bb(ni,nn,nt,ii,Ot),gk=zb(ht,Bn,mk,nn,$e,Xe),_k=HD(yu,xt,ua,Yt),Tu=_I(zn,nn,ua,MI(nn,Di)),yk=nD($o,nt,Di,Ot,Tu),vk=FD(_k),Tk=eD(ht,vk,yk,$e,Xe,Hs),Sk=qR(Bn,ms,jo,ua,Yt,NT,Xe,ca),GT=new WeakMap,Ek=vD($I,Sk,kT,Xe,GT,Ko),FT=ZD(vu,zn,zd,wT,Bd,RT),Ck=lI(ni,FT,nt,ii,Ot),Ak=aI(ht,Bn,FT,Ck,$e,Xe,Ko),zT=hb($o),Nk=iI(zT,xt,nn,MT,ps),Su=nI(zT,xt,Nk,MT,ps,fa,ca),Mk=$D(nu,xt,ms,nn,ua,Su,Yt,iu,NT,ps),BT=KD(Mk),xk=fI(ni,ms,jo,nn,BT,nt,Di,ii,Ot,Tu),wk=cI(ht,Bn,BT,xk,$e,Xe,Hs),Rk=jD(ti),bk=hI(Rk,$e,new WeakSet,PI),Dk=tI(ms,la,nn,Su,Yt,ps),HT=eI(Dk,Yt),Ik=CI(ni,HT,nt,ii,Ot),kk=EI(ht,Bn,HT,Ik,$e,Xe),Uk=bI(Su,nt,Ot),Ok=RI(ht,xt,Su,Uk,$e,Xe,Hs),YT=hD($n),Zd=Lb($n),JT=new WeakMap,Vk=Zb(JT,Di),qk=YT?pR(zn,Yt,qb($n),Zd,Gb(uR),$e,Vk,Xe,na,new WeakMap,new WeakMap,NI(na,Di),$n):void 0,Pk=fD(Yd,Xe),Lk=Cb(Xd,zn,Eb,Vb,new WeakSet,$e,Pk,eu,ta,Wd,Qd),XT=eb(qk,QI,VT,KI,ek,ik,ok,lk,ck,Lk,dk,pk,gk,Tk,Ek,Ak,wk,bk,kk,Ok),Gk=pD(ht,YD,$e,Xe),Fk=gD(ht,JD,$e,Xe),zk=_D(ht,XD,$e,Xe),Bk=WD(xt,Xe),Hk=yD(ht,Bk,$e),Yk=UR(XT,xt,Yt,xI,Gk,Fk,zk,Hk,fa),Kd=Kb(GT),Jk=yR(Kd),WT=db(ti),Xk=Rb(Kd),QT=Ib(ti),ZT=new WeakMap,Wk=Hb(ZT,Pn),Qk=UD(WT,ti,xt,ms,la,jo,nn,ua,Yt,QT,Zd,Wk,ps),Zk=bD(xt,Qk,nn,Yt,ps),Kk=jR(ni,WT,$o,ms,la,jo,nn,Xk,QT,Zd,nt,na,Di,ii,Ot,Tu),$k=Wb(JT),jk=yI(ZT),Sv=YT?ZR(Jk,ht,Bn,Kk,Zk,Ht,$k,$e,Xe,na,VI,jk,zI,Ko):void 0,e2=Sb(Yt,Di),t2=TI(Xd,zn,Hd,Kd,Tu,eu,Wd,Qd),n2=oI(XT,zn,xt,e2,t2),i2=sD(gu,Yd),s2=oD(Od,Jd),o2=rD(Vd,UT),r2=aD(gu,Xe);function yn(i){return i===void 0}function Ne(i){return i!==void 0}function a2(i){return typeof i=="function"}function Ln(i){return typeof i=="number"}function as(i){return Object.prototype.toString.call(i)==="[object Object]"&&i.constructor===Object}function KT(i){return typeof i=="boolean"}function tn(i){return Array.isArray(i)}function xi(i){return typeof i=="string"}function Fl(i){return xi(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function Te(i,e){if(!i)throw new Error(e)}function en(i,e,t=1/0){if(!(e<=i&&i<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${i}`)}function $T(i){!i.isOffline&&i.state!=="running"&&Eu('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let jT=!1,Ev=!1;function Cv(i){jT=i}function l2(i){yn(i)&&jT&&!Ev&&(Ev=!0,Eu("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let e0=console;function u2(...i){e0.log(...i)}function Eu(...i){e0.warn(...i)}function c2(i){return new Yk(i)}function f2(i,e,t){return new n2(i,e,t)}const mn=typeof self=="object"?self:null,d2=mn&&(mn.hasOwnProperty("AudioContext")||mn.hasOwnProperty("webkitAudioContext"));function h2(i,e,t){return Te(Ne(Sv),"AudioWorkletNode only works in a secure context (https or localhost)"),new(i instanceof(mn==null?void 0:mn.BaseAudioContext)?mn==null?void 0:mn.AudioWorkletNode:Sv)(i,e,t)}function Hn(i,e,t,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(c=i[d])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function dt(i,e,t,s){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(_){try{h(s.next(_))}catch(v){c(v)}}function m(_){try{h(s.throw(_))}catch(v){c(v)}}function h(_){_.done?l(_.value):a(_.value).then(d,m)}h((s=s.apply(i,e||[])).next())})}class p2{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Gs(i){return o2(i)}function ls(i){return s2(i)}function Xl(i){return r2(i)}function Io(i){return i2(i)}function m2(i){return i instanceof VT}function g2(i,e){return i==="value"||Gs(e)||ls(e)||m2(e)}function Ps(i,...e){if(!e.length)return i;const t=e.shift();if(as(i)&&as(t))for(const s in t)g2(s,t[s])?i[s]=t[s]:as(t[s])?(i[s]||Object.assign(i,{[s]:{}}),Ps(i[s],t[s])):Object.assign(i,{[s]:t[s]});return Ps(i,...e)}function _2(i,e){return i.length===e.length&&i.every((t,s)=>e[s]===t)}function pe(i,e,t=[],s){const a={},l=Array.from(e);if(as(l[0])&&s&&!Reflect.has(l[0],s)&&(Object.keys(l[0]).some(d=>Reflect.has(i,d))||(Ps(a,{[s]:l[0]}),t.splice(t.indexOf(s),1),l.shift())),l.length===1&&as(l[0]))Ps(a,l[0]);else for(let c=0;c<t.length;c++)Ne(l[c])&&(a[t[c]]=l[c]);return Ps(i,a)}function y2(i){return i.constructor.getDefaults()}function Kn(i,e){return yn(i)?e:i}function gn(i,e){return e.forEach(t=>{Reflect.has(i,t)&&delete i[t]}),i}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Ii{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||mn&&this.toString()===mn.TONE_DEBUG_CLASS)&&u2(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ii.version=sT;const $d=1e-6;function Bo(i,e){return i>e+$d}function Ad(i,e){return Bo(i,e)||On(i,e)}function au(i,e){return i+$d<e}function On(i,e){return Math.abs(i-e)<$d}function v2(i,e,t){return Math.max(Math.min(i,t),e)}class bn extends Ii{constructor(){super(),this.name="Timeline",this._timeline=[];const e=pe(bn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Te(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Te(Ad(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(On(this._timeline[t].time,e)){for(let s=t;s>=0&&On(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Ad(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let l=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<l;){let c=Math.floor(s+(l-s)/2);const d=this._timeline[c],m=this._timeline[c+1];if(On(d[t],e)){for(let h=c;h<this._timeline.length;h++){const _=this._timeline[h];if(On(_[t],e))c=h;else break}return c}else{if(au(d[t],e)&&Bo(m[t],e))return c;Bo(d[t],e)?l=c:s=c+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),l=this._search(t);return a!==-1&&l!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[l].time===t&&(l-=1),this._iterate(s,a,l)):a===-1&&this._iterate(s,0,l),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&On(this._timeline[s].time,e)){let a=s;for(let l=s;l>=0&&On(this._timeline[l].time,e);l--)a=l;this._iterate(l=>{t(l)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const t0=[];function Cu(i){t0.push(i)}function T2(i){t0.forEach(e=>e(i))}const n0=[];function Au(i){n0.push(i)}function S2(i){n0.forEach(e=>e(i))}class da extends Ii{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{yn(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(yn(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(yn(t))this._events[a]=[];else{const l=this._events[a];for(let c=l.length-1;c>=0;c--)l[c]===t&&l.splice(c,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,l=s.length;a<l;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(da.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class i0 extends da{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ha extends i0{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new bn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=pe(ha.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=c2({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new p2(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(T2(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Te(Io(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Te(Io(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Te(Io(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Te(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Te(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Te(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Te(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return h2(this.rawContext,e,t)}addAudioWorkletModule(e){return dt(this,void 0,void 0,function*(){Te(Ne(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return dt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Io(this._context)?this._context.resume():Promise.resolve()}close(){return dt(this,void 0,void 0,function*(){Io(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&S2(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let l=0;l<s.length;l++)s[l]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const l=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:l+t})};return a(),s}}class E2 extends i0{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return dt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Oe(i,e){tn(e)?e.forEach(t=>Oe(i,t)):Object.defineProperty(i,e,{enumerable:!0,writable:!1})}function jd(i,e){tn(e)?e.forEach(t=>jd(i,t)):Object.defineProperty(i,e,{writable:!0})}const qe=()=>{};class Qe extends Ii{constructor(){super(),this.name="ToneAudioBuffer",this.onload=qe;const e=pe(Qe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,xi(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:qe,onload:qe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Vn().sampleRate}set(e){return e instanceof Qe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return dt(this,void 0,void 0,function*(){const t=Qe.load(e).then(s=>{this.set(s),this.onload(this)});Qe.downloads.push(t);try{yield t}finally{const s=Qe.downloads.indexOf(t);Qe.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=tn(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,l=Vn(),c=l.createBuffer(s,a,l.sampleRate),d=!t&&s===1?[e]:e;for(let m=0;m<s;m++)c.copyToChannel(d[m],m);return this._buffer=c,this}toMono(e){if(Ln(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const l=this.toArray(a);for(let c=0;c<l.length;c++)t[c]+=l[c]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(Ln(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Te(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);Te(s<a,"The start time must be less than the end time");const l=a-s,c=Vn().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)c.copyToChannel(this.getChannelData(d).subarray(s,a),d);return new Qe(c)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Qe().fromArray(e)}static fromUrl(e){return dt(this,void 0,void 0,function*(){return yield new Qe().load(e)})}static load(e){return dt(this,void 0,void 0,function*(){const t=Qe.baseUrl===""||Qe.baseUrl.endsWith("/")?Qe.baseUrl:Qe.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield Vn().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return dt(this,void 0,void 0,function*(){for(yield Promise.resolve();Qe.downloads.length;)yield Qe.downloads[0]})}}Qe.baseUrl="";Qe.downloads=[];class Nu extends ha{constructor(){super({clockSource:"offline",context:Xl(arguments[0])?arguments[0]:f2(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Xl(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Xl(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return dt(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return dt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Qe(t)})}close(){return Promise.resolve()}}const s0=new E2;let Os=s0;function Vn(){return Os===s0&&d2&&C2(new ha),Os}function C2(i,e=!1){e&&Os.dispose(),Io(i)?Os=new ha(i):Xl(i)?Os=new Nu(i):Os=i}function A2(){return Os.resume()}if(mn&&!mn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${sT} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function N2(i){return Math.pow(10,i/20)}function M2(i){return 20*(Math.log(i)/Math.LN10)}function o0(i){return Math.pow(2,i/12)}let Mu=440;function x2(){return Mu}function w2(i){Mu=i}function Vs(i){return Math.round(r0(i))}function r0(i){return 69+12*Math.log2(i/Mu)}function a0(i){return Mu*Math.pow(2,(i-69)/12)}class eh extends Ii{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof eh&&this.fromType(this._val),yn(this._val))return this._noArg();if(xi(this._val)&&yn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(as(this._val)){let e=0;for(const t in this._val)if(Ne(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(Ne(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return xi(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class qn extends eh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new qn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),d=Math.round(a/s)*s-a;return a+d*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let l=1;l<9;l++){const c=Math.pow(2,l);t.push(c+"n."),t.push(c+"n"),t.push(c+"t")}t.push("0");let s=t[0],a=new qn(this.context,t[0]).toSeconds();return t.forEach(l=>{const c=new qn(this.context,l).toSeconds();Math.abs(c-e)<Math.abs(a-e)&&(s=l,a=c)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const l=a.toString();return l.length>3&&(a=parseFloat(parseFloat(l).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Vs(this.toFrequency())}_now(){return this.context.now()}}class _n extends qn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return x2()}static set A4(e){w2(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:_n.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=R2[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:_n.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new _n(this.context,this.valueOf()*o0(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Vs(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/_n.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),b2[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return a0(e)}static ftom(e){return Vs(e)}}const R2={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},b2=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Lo extends qn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class wt extends Ii{constructor(){super();const e=pe(wt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Vn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return l2(e),new qn(this.context,e).toSeconds()}toFrequency(e){return new _n(this.context,e).toFrequency()}toTicks(e){return new Lo(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{yn(e[s])&&delete t[s]}),t}get(){const e=y2(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Ne(s)&&Ne(s.value)&&Ne(s.setValueAtTime)?e[t]=s.value:s instanceof wt?e[t]=s._getPartialProperties(e[t]):tn(s)||Ln(s)||xi(s)||KT(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ne(this[t])&&(this[t]&&Ne(this[t].value)&&Ne(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof wt?this[t].set(e[t]):this[t]=e[t])}),this}}class pa extends bn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return en(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const l=this._timeline[a];if(l.state===e)return l}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const l=this._timeline[a];if(l.state===e)return l}}}class Je extends wt{constructor(){const e=pe(Je.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Te(Ne(e.param)&&(Gs(e.param)||e.param instanceof Je),"param must be an AudioParam");!Gs(e.param);)e.param=e.param._param;this._swappable=Ne(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new bn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ne(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(wt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ne(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ne(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ne(this.maxValue)&&Ne(this.minValue)&&en(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?N2(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?M2(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return Te(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let l=this._initialValue;if(a===null)l=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const c=this._events.getBefore(a.time);let d;c===null?d=this._initialValue:d=c.value,a.type==="setTargetAtTime"&&(l=this._exponentialApproach(a.time,d,a.value,a.constant,t))}else if(s===null)l=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let c=a.value;if(a.type==="setTargetAtTime"){const d=this._events.getBefore(a.time);d===null?c=this._initialValue:c=d.value}s.type==="linearRampToValueAtTime"?l=this._linearInterpolate(a.time,c,s.time,s.value,t):l=this._exponentialInterpolate(a.time,c,s.time,s.value,t)}else l=a.value;return this._toType(l)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return Te(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=On(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return Te(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);Te(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(t);return this._assertRange(a),Te(isFinite(a)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:l,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,l,s),this._param.setTargetAtTime(a,l,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const l=this._fromType(e[0])*a;this.setValueAtTime(this._toType(l),t);const c=s/(e.length-1);for(let d=1;d<e.length;d++){const m=this._fromType(e[d])*a;this.linearRampToValueAtTime(this._toType(m),t+d*c)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Te(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Te(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),l=this._events.getAfter(t);return a&&On(a.time,t)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),l=a?a.time:t+2,c=(l-t)/10;for(let d=t;d<l;d+=c)e.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){Te(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,l){return s+(t-s)*Math.exp(-(l-e)/a)}_linearInterpolate(e,t,s,a,l){return t+(a-t)*((l-e)/(s-e))}_exponentialInterpolate(e,t,s,a,l){return t*Math.pow(a/t,(l-e)/(s-e))}}class ge extends wt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ne(this.input)?Gs(this.input)||this.input instanceof Je?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ne(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ne(e)&&(e instanceof ge||ls(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Te(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return jn(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Eu("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return D2(this,e,t,s),this}chain(...e){return Fs(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ne(this.input)&&(this.input instanceof ge?this.input.dispose():ls(this.input)&&this.input.disconnect()),Ne(this.output)&&(this.output instanceof ge?this.output.dispose():ls(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Fs(...i){const e=i.shift();i.reduce((t,s)=>(t instanceof ge?t.connect(s):ls(t)&&jn(t,s),s),e)}function jn(i,e,t=0,s=0){for(Te(Ne(i),"Cannot connect from undefined node"),Te(Ne(e),"Cannot connect to undefined node"),(e instanceof ge||ls(e))&&Te(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Te(i.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ge||e instanceof Je;)Ne(e.input)&&(e=e.input);for(;i instanceof ge;)Ne(i.output)&&(i=i.output);Gs(e)?i.connect(e,t):i.connect(e,t,s)}function D2(i,e,t=0,s=0){if(Ne(e))for(;e instanceof ge;)e=e.input;for(;!ls(i);)Ne(i.output)&&(i=i.output);Gs(e)?i.disconnect(e,t):ls(e)?i.disconnect(e,t,s):i.disconnect()}class Pe extends ge{constructor(){const e=pe(Pe.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Je({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Oe(this,"gain")}static getDefaults(){return Object.assign(ge.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ho extends ge{constructor(e){super(e),this.onended=qe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Pe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ge.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:qe})}_startGain(e,t=1){Te(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Te(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==qe&&(this.onended(this),this.onended=qe,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Te(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=qe,this}}class th extends Ho{constructor(){const e=pe(th.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),jn(this._source,this._gainNode),this.offset=new Je({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ho.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ze extends ge{constructor(){const e=pe(ze.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new th({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ge.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return nh(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function nh(i,e,t,s){(e instanceof Je||Gs(e)||e instanceof ze&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ze&&(e.overridden=!0)),jn(i,e,t,s)}class ih extends Je{constructor(){const e=pe(ih.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new bn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Je.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),l=this._events.get(t),c=Math.round(Math.max(1/s,1));for(let d=0;d<=c;d++){const m=s*d+t,h=this._exponentialApproach(l.time,l.value,a,s,m);this.linearRampToValueAtTime(this._toType(h),m)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),l=this._events.previousEvent(a),c=this._getTicksUntilEvent(l,s);return a.ticks=Math.max(c,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),l=this._events.previousEvent(a),c=this._getTicksUntilEvent(l,s);return a.ticks=Math.max(c,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),l=Math.round(Math.max((t-a.time)*10,1)),c=(t-a.time)/l;for(let d=0;d<=l;d++){const m=c*d+a.time,h=this._exponentialInterpolate(a.time,a.value,t,s,m);this.linearRampToValueAtTime(this._toType(h),m)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(yn(e.ticks)){const c=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(c,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const l=this._events.get(t);return l&&l.time===t&&l.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),c=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),d=Math.sqrt(Math.pow(a,2)-2*c*(t.ticks-e)),m=(-a+d)/c,h=(-a-d)/c;return(m>0?m:h)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),l=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-l}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class sh extends ze{constructor(){const e=pe(sh.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new ih({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ze.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class oh extends wt{constructor(){const e=pe(oh.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new pa,this._tickOffset=new bn,this._ticksAtTime=new bn,this._secondsAtTime=new bn,this.frequency=new sh({context:this.context,units:e.units,value:e.frequency}),Oe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},wt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Ne(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),l={state:"paused",time:t};this._state.add(l);let c=a||s,d=a?a.ticks:0,m=null;return this._state.forEachBetween(c.time,t+this.sampleTime,h=>{let _=c.time;const v=this._tickOffset.get(h.time);v&&v.time>=c.time&&(d=v.ticks,_=v.time),c.state==="started"&&h.state!=="started"&&(d+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(_),h.time!==l.time&&(m={state:h.state,time:h.time,ticks:d})),c=h}),this._state.remove(l),m&&this._ticksAtTime.add(m),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let l=a||t,c=a?a.seconds:0,d=null;return this._state.forEachBetween(l.time,e+this.sampleTime,m=>{let h=l.time;const _=this._tickOffset.get(m.time);_&&_.time>=l.time&&(c=_.seconds,h=_.time),l.state==="started"&&m.state!=="started"&&(c+=m.time-h,m.time!==s.time&&(d={state:m.state,time:m.time,seconds:c})),l=m}),this._state.remove(s),d&&this._secondsAtTime.add(d),c}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),l=Math.max(s.time,a.time),c=this.frequency.getTicksAtTime(l)+e-s.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,c=>{a&&a.state==="started"&&c.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),c.time-this.sampleTime,s),a=c});let l=null;if(a&&a.state==="started"){const c=Math.max(a.time,e),d=this.frequency.getTicksAtTime(c),m=this.frequency.getTicksAtTime(a.time),h=d-m;let _=Math.ceil(h)-h;_=On(_,1)?0:_;let v=this.frequency.getTimeOfTick(d+_);for(;v<t;){try{s(v,Math.round(this.getTicksAtTime(v)))}catch(T){l=T;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class xu extends wt{constructor(){const e=pe(xu.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=qe,this._lastUpdate=0,this._state=new pa("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new oh({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Oe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(wt.getDefaults(),{callback:qe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){$T(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}da.mixin(xu);class jr extends ge{constructor(){const e=pe(jr.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new Je({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Oe(this,"delayTime")}static getDefaults(){return Object.assign(ge.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class er extends ge{constructor(){const e=pe(er.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Pe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Oe(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class rh extends ge{constructor(){const e=pe(rh.getDefaults(),arguments);super(e),this.name="Destination",this.input=new er({context:this.context}),this.output=new Pe({context:this.context}),this.volume=this.input.volume,Fs(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Fs(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Cu(i=>{i.destination=new rh({context:i})});Au(i=>{i.destination.dispose()});class I2 extends ge{constructor(){super(...arguments),this.name="Listener",this.positionX=new Je({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Je({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Je({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Je({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Je({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Je({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Je({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Je({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Je({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ge.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Cu(i=>{i.listener=new I2({context:i})});Au(i=>{i.listener.dispose()});class ah extends Ii{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=pe(ah.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:qe,onload:qe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Te(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=qe,a=qe){return xi(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Qe(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new Qe(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class lu extends _n{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Vs(super._frequencyToUnits(e))}_ticksToUnits(e){return Vs(super._ticksToUnits(e))}_beatsToUnits(e){return Vs(super._beatsToUnits(e))}_secondsToUnits(e){return Vs(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return a0(this.toMidi())}transpose(e){return new lu(this.context,this.toMidi()+e)}}class Et extends Lo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class k2 extends wt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new bn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Cu(i=>{i.draw=new k2({context:i})});Au(i=>{i.draw.dispose()});class U2 extends Ii{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Te(Ne(e.time),"Events must have a time property"),Te(Ne(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new O2(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class O2{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class V2 extends Ii{constructor(e){super(),this.name="TimelineValue",this._timeline=new bn({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class wi extends ge{constructor(){super(pe(wi.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return nh(this,e,t,s),this}}class tr extends wi{constructor(){const e=pe(tr.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,tn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):a2(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ze.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,l=t;a<l;a++){const c=a/(l-1)*2-1;s[a]=e(c,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Te(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class wu extends wi{constructor(){const e=pe(wu.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new tr({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(wi.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class us{constructor(e,t){this.id=us._eventId++,this._remainderTime=0;const s=Object.assign(us.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:qe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}us._eventId=0;class lh extends us{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(lh.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},us.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return au(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Et(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){au(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Et(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Bo(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ru extends wt{constructor(){const e=pe(Ru.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new V2(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new bn,this._repeatedEvents=new U2,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new xu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Oe(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(wt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new Et(this.context,this._swingTicks*2/3).toSeconds()*a}Cv(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),Cv(!1)}schedule(e,t){const s=new us(this,{callback:e,time:new Lo(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const l=new lh(this,{callback:e,duration:new qn(this.context,a).toTicks(),interval:new qn(this.context,t).toTicks(),time:new Lo(this.context,s).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(e,t){const s=new us(this,{callback:e,once:!0,time:new Lo(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Et(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Ne(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){tn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new qn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new qn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Et(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Et(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),l=t+a;this.emit("stop",l),this._clock.setTicksAtTime(e,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,l=1/(60/a.getValueAtTime(s)/this.PPQ),c=[];if(e.units==="time"){const m=.015625/l,h=new Pe(m),_=new wu(-1),v=new Pe(m);a.chain(h,_,v),a=v,l=1/l,c=[h,_,v]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/l:t=0);const d=new Pe(t);return a.connect(d),d.connect(e._param),c.push(d),this._syncedSignals.push({initial:e.value,nodes:c,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),jd(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}da.mixin(Ru);Cu(i=>{i.transport=new Ru({context:i})});Au(i=>{i.transport.dispose()});class At extends ge{constructor(e){super(e),this.input=void 0,this._state=new pa("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=qe,this._syncedStop=qe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new er({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Oe(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,onstop:qe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=yn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Te(Bo(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const l=this._state.get(a);l&&(l.offset=this.toSeconds(Kn(t,0)),l.duration=s?this.toSeconds(s):void 0);const c=this.context.transport.schedule(d=>{this._start(d,t,s)},a);this._scheduled.push(c),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else $T(this.context),this._start(a,t,s);return this}stop(e){let t=yn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Ne(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Bo(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let l;s.duration&&(l=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,l)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=qe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ma extends Ho{constructor(){const e=pe(ma.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,jn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Je({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Qe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ho.getDefaults(),{url:new Qe,loop:!1,loopEnd:0,loopStart:0,onload:qe,onerror:qe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){Te(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(e);this._startGain(l,a),this.loop?t=Kn(t,this.loopStart):t=Kn(t,0);let c=Math.max(this.toSeconds(t),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,m=this.toSeconds(this.loopStart),h=d-m;Ad(c,d)&&(c=(c-m)%h+m),On(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,au(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,c)),Ne(s)){let d=this.toSeconds(s);d=Math.max(d,0),this.stop(l+d)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Yo extends At{constructor(){const e=pe(Yo.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(At.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Te(e in Av,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=Av[this._type];this._source=new ma({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Do=44100*5,od=2,Ci={brown:null,pink:null,white:null},Av={get brown(){if(!Ci.brown){const i=[];for(let e=0;e<od;e++){const t=new Float32Array(Do);i[e]=t;let s=0;for(let a=0;a<Do;a++){const l=Math.random()*2-1;t[a]=(s+.02*l)/1.02,s=t[a],t[a]*=3.5}}Ci.brown=new Qe().fromArray(i)}return Ci.brown},get pink(){if(!Ci.pink){const i=[];for(let e=0;e<od;e++){const t=new Float32Array(Do);i[e]=t;let s,a,l,c,d,m,h;s=a=l=c=d=m=h=0;for(let _=0;_<Do;_++){const v=Math.random()*2-1;s=.99886*s+v*.0555179,a=.99332*a+v*.0750759,l=.969*l+v*.153852,c=.8665*c+v*.3104856,d=.55*d+v*.5329522,m=-.7616*m-v*.016898,t[_]=s+a+l+c+d+m+h+v*.5362,t[_]*=.11,h=v*.115926}}Ci.pink=new Qe().fromArray(i)}return Ci.pink},get white(){if(!Ci.white){const i=[];for(let e=0;e<od;e++){const t=new Float32Array(Do);i[e]=t;for(let s=0;s<Do;s++)t[s]=Math.random()*2-1}Ci.white=new Qe().fromArray(i)}return Ci.white}};function Ys(i,e){return dt(this,void 0,void 0,function*(){const t=e/i.context.sampleRate,s=new Nu(1,t,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class uh extends Ho{constructor(){const e=pe(uh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],jn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Je({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Je({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Oe(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ho.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Tt extends At{constructor(){const e=pe(Tt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new ze({context:this.context,units:"frequency",value:e.frequency}),Oe(this,"frequency"),this.detune=new ze({context:this.context,units:"cents",value:e.detune}),Oe(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(At.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new uh({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Tt._periodicWaveCache.find(t=>t.phase===this._phase&&_2(t.partials,this._partials));{const e=Tt._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Ne(s)){const{partials:a,wave:l}=s;this._wave=l,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,l]=this._getRealImaginary(e,this._phase),c=this.context.createPeriodicWave(a,l);this._wave=c,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Tt._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),Tt._periodicWaveCache.length>100&&Tt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){en(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((l,c)=>a[c]=l),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const l=new Float32Array(a),c=new Float32Array(a);let d=1;if(e==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,a=d,this._partials.length===0)return[l,c]}else{const m=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);m?(d=parseInt(m[2],10)+1,this._partialCount=parseInt(m[2],10),e=m[1],d=Math.max(d,2),a=d):this._partialCount=0,this._partials=[]}for(let m=1;m<a;++m){const h=2/(m*Math.PI);let _;switch(e){case"sine":_=m<=d?1:0,this._partials[m-1]=_;break;case"square":_=m&1?2*h:0,this._partials[m-1]=_;break;case"sawtooth":_=h*(m&1?1:-1),this._partials[m-1]=_;break;case"triangle":m&1?_=2*(h*h)*(m-1>>1&1?-1:1):_=0,this._partials[m-1]=_;break;case"custom":_=this._partials[m-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}_!==0?(l[m]=-_*Math.sin(t*m),c[m]=_*Math.cos(t*m)):(l[m]=0,c[m]=0)}return[l,c]}_inverseFFT(e,t,s){let a=0;const l=e.length;for(let c=0;c<l;c++)a+=e[c]*Math.cos(c*s)+t[c]*Math.sin(c*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,l=32;for(let c=0;c<l;c++)s=Math.max(this._inverseFFT(e,t,c/l*a),s);return v2(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Tt._periodicWaveCache=[];class l0 extends wi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new tr({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class cs extends ze{constructor(){const e=pe(cs.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Pe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ze.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class bu extends At{constructor(){const e=pe(bu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new l0({context:this.context}),this._modulationNode=new Pe({context:this.context}),this._carrier=new Tt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Tt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new cs({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Oe(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Tt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Du extends At{constructor(){const e=pe(Du.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Pe({context:this.context,gain:0}),this._carrier=new Tt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ze({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Tt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new cs({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new cs({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Oe(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Tt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ga extends At{constructor(){const e=pe(ga.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Pe({context:this.context,gain:0}),this._thresh=new tr({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new ze({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Tt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Oe(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(At.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Iu extends At{constructor(){const e=pe(Iu.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ze({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ze({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Oe(this,["frequency","detune"])}static getDefaults(){return Object.assign(Tt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,l)=>a.detune.value=t+s*l)}}get count(){return this._oscillators.length}set count(e){if(en(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new Tt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):qe});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class ku extends At{constructor(){const e=pe(ku.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new cs({context:this.context,value:2}),this._pulse=new ga({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Tt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Oe(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(At.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Nv={am:bu,fat:Iu,fm:Du,oscillator:Tt,pulse:ga,pwm:ku};class fs extends At{constructor(){const e=pe(fs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ze({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ze({context:this.context,units:"cents",value:e.detune}),Oe(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Tt.getDefaults(),Du.getDefaults(),bu.getDefaults(),Iu.getDefaults(),ga.getDefaults(),ku.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Nv[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Nv[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ln(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ln(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&xi(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return dt(this,arguments,void 0,function*(e=1024){return Ys(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class ch extends ze{constructor(){super(pe(ch.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Pe({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Fs(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ze.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class fh extends wi{constructor(){const e=pe(fh.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new cs({context:this.context,value:e.max-e.min}),this._add=this.output=new ch({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(wi.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function u0(i,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(l){en(l,i,e),t.set(this,l)}})}}function ki(i,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(l){en(this.toSeconds(l),i,e),t.set(this,l)}})}}class Uu extends At{constructor(){const e=pe(Uu.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Qe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(At.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:qe,onerror:qe,playbackRate:1,reverse:!1})}load(e){return dt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=qe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Kn(t,this._loopStart):t=Kn(t,0);const a=this.toSeconds(t),l=s;s=Kn(s,Math.max(this._buffer.duration-a,0));let c=this.toSeconds(s);c=c/this._playbackRate,e=this.toSeconds(e);const d=new ma({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+c),this._state.setStateAtTime("stopped",e+c,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&yn(l)?d.start(e,a):d.start(e,a,c-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&en(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&en(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Hn([ki(0)],Uu.prototype,"fadeIn",void 0);Hn([ki(0)],Uu.prototype,"fadeOut",void 0);class q2 extends wi{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new tr({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class sn extends ge{constructor(){const e=pe(sn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ze({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ge.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(xi(e))return e;{let s;for(s in zl)if(zl[s][t]===e)return s;return e}}_setCurve(e,t,s){if(xi(s)&&Reflect.has(zl,s)){const a=zl[s];as(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(tn(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),c=this.getValueAtTime(e);if(c>0){const d=1/a;a=(1-c)/d}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let d=this._attackCurve;for(let m=1;m<d.length;m++)if(d[m-1]<=c&&c<=d[m]){d=this._attackCurve.slice(m),d[0]=c;break}this._sig.setValueCurveAtTime(d,e,a,t)}if(l&&this.sustain<1){const d=t*this.sustain,m=e+a;this.log("decay",m),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,l+m):this._sig.exponentialApproachValueAtTime(d,m,l)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Te(tn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return nh(this,e,t,s),this}asArray(){return dt(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new Nu(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=a+this.toSeconds(this.release),c=l*.1,d=l+c,m=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/d,decay:t*this.toSeconds(this.decay)/d,release:t*this.toSeconds(this.release)/d,context:s}));return m._sig.toDestination(),m.triggerAttackRelease(t*(a+c)/d,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Hn([ki(0)],sn.prototype,"attack",void 0);Hn([ki(0)],sn.prototype,"decay",void 0);Hn([u0(0,1)],sn.prototype,"sustain",void 0);Hn([ki(0)],sn.prototype,"release",void 0);const zl=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],l=6.4;for(e=0;e<127;e++){t=e/127;const T=Math.sin(t*(Math.PI*2)*l-Math.PI/2)+1;a[e]=T/10+t*.83}a[127]=1;const c=[],d=5;for(e=0;e<128;e++)c[e]=Math.ceil(e/127*d)/d;const m=[];for(e=0;e<128;e++)t=e/127,m[e]=.5*(1-Math.cos(Math.PI*t));const h=[];for(e=0;e<128;e++){t=e/127;const T=Math.pow(t,3)*4+.2,E=Math.cos(T*Math.PI*2*t);h[e]=Math.abs(E*(1-t))}function _(T){const E=new Array(T.length);for(let C=0;C<T.length;C++)E[C]=1-T[C];return E}function v(T){return T.slice(0).reverse()}return{bounce:{In:_(h),Out:h},cosine:{In:s,Out:v(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:_(a)},sine:{In:m,Out:_(m)},step:{In:c,Out:_(c)}}})();class ei extends ge{constructor(){const e=pe(ei.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new er({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Oe(this,"volume")}static getDefaults(){return Object.assign(ge.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const l=a[t],c=this.context.transport.schedule(d=>{a[t]=d,s.apply(this,a)},l);this._scheduledEvents.push(c)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const l=this.toSeconds(s),c=this.toSeconds(t);return this.triggerAttack(e,l,a),this.triggerRelease(l+c),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Gn extends ei{constructor(){const e=pe(Gn.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,onsilence:qe,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof _n?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,l,s)}else this.frequency.setValueAtTime(a,s);return this}}Hn([ki(0)],Gn.prototype,"portamento",void 0);class _a extends sn{constructor(){super(pe(_a.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Pe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ds extends Gn{constructor(){const e=pe(ds.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new fs(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new _a(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Oe(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Gn.getDefaults(),{envelope:Object.assign(gn(sn.getDefaults(),Object.keys(ge.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(gn(fs.getDefaults(),[...Object.keys(At.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class dh extends Gn{constructor(){const e=pe(dh.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new ds({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new ds({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new ze({context:this.context,units:"frequency"}),this.detune=new ze({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new cs({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new Pe({context:this.context,gain:0}),Oe(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Gn.getDefaults(),{harmonicity:3,oscillator:Object.assign(gn(fs.getDefaults(),[...Object.keys(At.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(gn(sn.getDefaults(),Object.keys(ge.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(gn(fs.getDefaults(),[...Object.keys(At.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(gn(sn.getDefaults(),Object.keys(ge.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class hh extends dh{constructor(){super(pe(hh.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new l0({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class uu extends ge{constructor(){const e=pe(uu.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Je({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Je({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Je({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Je({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ge.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Te(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let c=0;c<e;c++){const m=Math.pow(c/e,2)*19980+20;t[c]=m}const s=new Float32Array(e),a=new Float32Array(e),l=this.context.createBiquadFilter();return l.type=this.type,l.Q.value=this.Q.value,l.frequency.value=this.frequency.value,l.gain.value=this.gain.value,l.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class ia extends ge{constructor(){const e=pe(ia.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Pe({context:this.context}),this.output=new Pe({context:this.context}),this._filters=[],this._filters=[],this.Q=new ze({context:this.context,units:"positive",value:e.Q}),this.frequency=new ze({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ze({context:this.context,units:"cents",value:e.detune}),this.gain=new ze({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Oe(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ge.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Te(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Ln(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);Te(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(l=>l.disconnect()),this._filters=new Array(a);for(let l=0;l<a;l++){const c=new uu({context:this.context});c.type=this._type,this.frequency.connect(c.frequency),this.detune.connect(c.detune),this.Q.connect(c.Q),this.gain.connect(c.gain),this._filters[l]=c}this._internalChannels=this._filters,Fs(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new uu({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((l,c)=>s[c]*=l)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),jd(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class cu extends sn{constructor(){const e=pe(cu.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new wu({context:this.context,value:e.exponent}),this._scale=this.output=new fh({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(sn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);en(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class ph extends Gn{constructor(){const e=pe(ph.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new fs(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new ia(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new cu(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new _a(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Oe(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Gn.getDefaults(),{envelope:Object.assign(gn(sn.getDefaults(),Object.keys(ge.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(gn(ia.getDefaults(),Object.keys(ge.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(gn(cu.getDefaults(),Object.keys(ge.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(gn(fs.getDefaults(),Object.keys(At.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Ou extends ds{constructor(){const e=pe(Ou.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Oe(this,["oscillator","envelope"])}static getDefaults(){return Ps(Gn.getDefaults(),ds.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof _n?e.toFrequency():e),l=a*this.octaves;return this.oscillator.frequency.setValueAtTime(l,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Hn([u0(0)],Ou.prototype,"octaves",void 0);Hn([ki(0)],Ou.prototype,"pitchDecay",void 0);class mh extends ei{constructor(){const e=pe(mh.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new Yo(Object.assign({context:this.context},e.noise)),this.envelope=new _a(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ei.getDefaults(),{envelope:Object.assign(gn(sn.getDefaults(),Object.keys(ge.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(gn(Yo.getDefaults(),Object.keys(At.getDefaults())),{type:"white"})})}triggerAttack(e,t=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,s),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const c0=new Set;function gh(i){c0.add(i)}function f0(i,e){const t=`registerProcessor("${i}", ${e})`;c0.add(t)}const P2=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;gh(P2);const L2=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;gh(L2);const G2=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;gh(G2);const F2="feedback-comb-filter",z2=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;f0(F2,z2);class fu extends ei{constructor(){const e=pe(fu.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),Te(!Ln(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ei.getDefaults(),{maxPolyphony:32,options:{},voice:ds})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Te(e instanceof Gn,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Eu("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const l=new lu(this.context,a).toMidi(),c=this._getNextAvailableVoice();c&&(c.triggerAttack(a,t,s),this._activeVoices.push({midi:l,voice:c,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new lu(this.context,s).toMidi(),l=this._activeVoices.find(({midi:c,released:d})=>c===a&&!d);l&&(l.voice.triggerRelease(t),l.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){Te(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const l=this.toSeconds(s);if(this.triggerAttack(e,l,a),tn(t)){Te(tn(e),"If the duration is an array, the notes must also be an array"),e=e;for(let c=0;c<e.length;c++){const d=t[Math.min(c,t.length-1)],m=this.toSeconds(d);Te(m>0,"The duration must be greater than 0"),this.triggerRelease(e[c],l+m)}}else{const c=this.toSeconds(t);Te(c>0,"The duration must be greater than 0"),this.triggerRelease(e,l+c)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=gn(e,["onsilence","context"]);return this.options=Ps(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Vu extends ei{constructor(){const e=pe(Vu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(Te(Fl(s)||Ln(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),Fl(s)){const l=new _n(this.context,s).toMidi();t[l]=e.urls[s]}else Ln(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new ah({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ei.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:qe,onerror:qe,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const l=r0(new _n(this.context,a).toFrequency()),c=Math.round(l),d=l-c,m=this._findClosest(c),h=c-m,_=this._buffers.get(h),v=o0(m+d),T=new ma({url:_,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);T.start(t,0,_.duration/v,s),tn(this._activeSources.get(c))||this._activeSources.set(c,[]),this._activeSources.get(c).push(T),T.onended=()=>{if(this._activeSources&&this._activeSources.has(c)){const E=this._activeSources.get(c),C=E.indexOf(T);C!==-1&&E.splice(C,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new _n(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const l=this._activeSources.get(a);t=this.toSeconds(t),l.forEach(c=>{c.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const l=this.toSeconds(s);return this.triggerAttack(e,l,a),tn(t)?(Te(tn(e),"notes must be an array when duration is array"),e.forEach((c,d)=>{const m=t[Math.min(d,t.length-1)];this.triggerRelease(c,l+this.toSeconds(m))})):this.triggerRelease(e,l+this.toSeconds(t)),this}add(e,t,s){if(Te(Fl(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Fl(e)){const a=new _n(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Hn([ki(0)],Vu.prototype,"attack",void 0);Hn([ki(0)],Vu.prototype,"release",void 0);class qs extends wt{constructor(){const e=pe(qs.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new pa("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(wt.getDefaults(),{callback:qe,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,t=>{let s;if(t.state==="started"){t.id!==-1&&this.context.transport.clear(t.id);const a=t.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Ln(this._loop)&&this._loop>1){s=1/0,Ln(this._loop)&&(s=this._loop*this._getLoopDuration());const l=this._state.getAfter(a);l!==null&&(s=Math.min(s,l.time-a)),s!==1/0&&(s=new Et(this.context,s));const c=new Et(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),c,new Et(this.context,a),s)}else t.id=this.context.transport.schedule(this._tick.bind(this),new Et(this.context,a))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return this._state.getValueAtTime(t)==="stopped"&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if(this._state.getValueAtTime(t)==="started"){this._state.setStateAtTime("stopped",t,{id:-1});const s=this._state.getBefore(t);let a=t;s!==null&&(a=s.time),this._rescheduleEvents(a)}return this}cancel(e){e=Kn(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,s=>{this.context.transport.clear(s.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(t)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;KT(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Et(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Et(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(t!==null&&t.state==="started"){const s=this._getLoopDuration();return(e-t.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class _h extends wt{constructor(){const e=pe(_h.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new qs({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(wt.getDefaults(),{interval:"4n",callback:qe,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class Go extends qs{constructor(){const e=pe(Go.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new pa("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(t=>{tn(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(qs.getDefaults(),{events:[]})}start(e,t){const s=this.toTicks(e);if(this._state.getValueAtTime(s)!=="started"){t=Kn(t,this._loop?this._loopStart:0),this._loop?t=Kn(t,this._loopStart):t=Kn(t,0);const a=this.toTicks(t);this._state.add({id:-1,offset:a,state:"started",time:s}),this._forEach(l=>{this._startNote(l,s,a)})}return this}_startNote(e,t,s){t-=s,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<s&&(t+=this._getLoopDuration()),e.start(new Et(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=s&&(e.loop=!1,e.start(new Et(this.context,t))):e.startOffset>=s&&e.start(new Et(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(e){const t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(s=>{s.stop(e)}),this}at(e,t){const s=new Lo(this.context,e).toTicks(),a=new Et(this.context,1).toSeconds(),l=this._events.values();let c=l.next();for(;!c.done;){const d=c.value;if(Math.abs(s-d.startOffset)<a)return Ne(t)&&(d.value=t),d;c=l.next()}return Ne(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(t=e,e=t.time);const s=this.toTicks(e);let a;return t instanceof qs?(a=t,a.callback=this._tick.bind(this)):a=new qs({callback:this._tick.bind(this),context:this.context,value:t}),a.startOffset=s,a.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(a),this._restartEvent(a),this}_restartEvent(e){this._state.forEach(t=>{t.state==="started"?this._startNote(e,t.time,t.offset):e.stop(new Et(this.context,t.time))})}remove(e,t){return as(e)&&e.hasOwnProperty("time")&&(t=e,e=t.time),e=this.toTicks(e),this._events.forEach(s=>{s.startOffset===e&&(yn(t)||Ne(t)&&s.value===t)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof Go?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(s=>{s[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new Et(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new Et(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class qu extends ge{constructor(){const e=pe(qu.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new q2({context:this.context}),this.a=new Pe({context:this.context,gain:0}),this.b=new Pe({context:this.context,gain:0}),this.output=new Pe({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new ze({context:this.context,units:"normalRange",value:e.fade}),Oe(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",jn(this._split,this.a.gain,0),jn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ge.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Mv extends ge{constructor(e){super(e),this.name="Effect",this._dryWet=new qu({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Pe({context:this.context}),this.effectReturn=new Pe({context:this.context}),this.input=new Pe({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Oe(this,"wet")}static getDefaults(){return Object.assign(ge.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class yh extends ge{constructor(){const e=pe(yh.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Je({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Oe(this,"pan")}static getDefaults(){return Object.assign(ge.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const B2="bit-crusher",H2=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;f0(B2,H2);class ya extends ge{constructor(){const e=pe(ya.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ge.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class va extends ge{constructor(){const e=pe(va.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ge.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class xv extends ge{constructor(e){super(e),this.name="StereoEffect",this.input=new Pe({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new qu({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new ya({context:this.context,channels:2}),this._merge=new va({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Oe(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Fs(...e),jn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Fs(...e),jn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ge.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Y2 extends xv{constructor(e){super(e),this.feedback=new ze({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Pe({context:this.context}),this._feedbackR=new Pe({context:this.context}),this._feedbackSplit=new ya({context:this.context,channels:2}),this._feedbackMerge=new va({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Oe(this,["feedback"])}static getDefaults(){return Object.assign(xv.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class wv extends Y2{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Oe(this,["feedback"])}}class vh extends wv{constructor(){const e=pe(vh.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="PingPongDelay",this._leftDelay=new jr({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new jr({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new jr({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new ze({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Oe(this,["delayTime"])}static getDefaults(){return Object.assign(wv.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Th extends Mv{constructor(){const e=pe(Th.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);en(t,.001),this._decay=t;const s=this.toSeconds(e.preDelay);en(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Mv.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),en(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),en(e,0),this._preDelay=e,this.generate()}generate(){return dt(this,void 0,void 0,function*(){const e=this.ready,t=new Nu(2,this._decay+this._preDelay,this.context.sampleRate),s=new Yo({context:t}),a=new Yo({context:t}),l=new va({context:t});s.connect(l,0,0),a.connect(l,0,1);const c=new Pe({context:t}).toDestination();l.connect(c),s.start(0),a.start(0),c.gain.setValueAtTime(0,0),c.gain.setValueAtTime(1,this._preDelay),c.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const d=t.render();return this.ready=d.then(qe),yield e,this._convolver.buffer=(yield d).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Sh extends ge{constructor(){const e=pe(Sh.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Pe({context:this.context}),this._split=new ya({context:this.context,channels:e.channels}),this.input.connect(this._split),en(e.channels,1);for(let t=0;t<e.channels;t++)this._analysers[t]=this.context.createAnalyser(),this._split.connect(this._analysers[t],t,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(ge.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,t)=>{const s=this._buffers[t];this._type==="fft"?e.getFloatFrequencyData(s):this._type==="waveform"&&e.getFloatTimeDomainData(s)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((t,s)=>{t.fftSize=e*2,this._buffers[s]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){Te(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(t=>t.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class yt extends ge{constructor(){const e=pe(yt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Pe({context:this.context}),yt._allSolos.has(this.context)||yt._allSolos.set(this.context,new Set),yt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ge.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),yt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){yt._soloed.has(this.context)||yt._soloed.set(this.context,new Set),yt._soloed.get(this.context).add(this)}_removeSolo(){yt._soloed.has(this.context)&&yt._soloed.get(this.context).delete(this)}_isSoloed(){return yt._soloed.has(this.context)&&yt._soloed.get(this.context).has(this)}_noSolos(){return!yt._soloed.has(this.context)||yt._soloed.has(this.context)&&yt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),yt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}yt._allSolos=new Map;yt._soloed=new Map;class Eh extends ge{constructor(){const e=pe(Eh.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new yh({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new er({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Oe(this,["pan","volume"])}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Oo extends ge{constructor(){const e=pe(Oo.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new yt({solo:e.solo,context:this.context}),this._panVol=this.output=new Eh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Oe(this,["pan","volume"])}static getDefaults(){return Object.assign(ge.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Oo.buses.has(e)||Oo.buses.set(e,new Pe({context:this.context})),Oo.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new Pe({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Oo.buses=new Map;const Kr=Vn().transport,J2=Vn().destination;Vn().destination;Vn().listener;Vn().draw;Vn();class X2{constructor(){this.padSynth=null,this.bassSynth=null,this.arpSynth=null,this.noiseSynth=null,this.masterReverb=null,this.masterFilter=null,this.masterDelay=null,this.part=null,this.bassPart=null,this.noisePart=null,this.padLoop=null,this.isInitialized=!1}async initialize(){this.isInitialized||(await A2(),this.masterReverb=new Th({decay:4,wet:.3}).toDestination(),this.masterDelay=new vh("8n.",.2).connect(this.masterReverb),this.masterFilter=new ia(3e3,"lowpass").connect(this.masterDelay),this.padSynth=new fu(ds,{oscillator:{type:"fatsawtooth",count:3,spread:20},envelope:{attack:2,decay:3,sustain:.8,release:4}}).connect(this.masterFilter),this.padSynth.volume.value=-12,this.bassSynth=new ph({oscillator:{type:"triangle"},envelope:{attack:.1,decay:.5,sustain:.4,release:1},filterEnvelope:{attack:.01,decay:.5,baseFrequency:50,octaves:2}}).connect(this.masterReverb),this.bassSynth.volume.value=-8,this.arpSynth=new fu(hh,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:.1,release:1},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).connect(this.masterDelay),this.arpSynth.volume.value=-10,this.noiseSynth=new mh({noise:{type:"pink"},envelope:{attack:.01,decay:.1,sustain:0}}).connect(this.masterFilter),this.noiseSynth.volume.value=-20,this.isInitialized=!0)}generateScore(e){if(!this.isInitialized)return;if(this.stop(),Kr.bpm.value=e.tempo||90,this.masterReverb&&(this.masterReverb.decay=1+e.volume*10,this.masterReverb.wet.value=.2+e.volume*.6),this.masterFilter){const v=400+e.brightness*6e3;this.masterFilter.frequency.rampTo(v,1)}const{scale:t,root:s,chordProgression:a}=this.getMusicalContext(e.suggestedKey);let l=0;this.padLoop=new _h(v=>{var E;const T=a[l%a.length];(E=this.padSynth)==null||E.triggerAttackRelease(T,"1n",v),l++},"1m");const c=[];for(let v=0;v<4;v++)e.complexity>.5?(c.push({time:`0:${v}:0`,note:t[0]+"2",duration:"8n"}),c.push({time:`0:${v}:2`,note:t[0]+"2",duration:"8n"})):c.push({time:`0:${v}:0`,note:t[0]+"2",duration:"2n"});this.bassPart=new Go((v,T)=>{var E;(E=this.bassSynth)==null||E.triggerAttackRelease(T.note,T.duration,v)},c).start(0),this.bassPart.loop=!0,this.bassPart.loopEnd="1m";const d=[],m=[],h=Math.floor(e.complexity*16),_=16/Math.max(1,h);for(let v=0;v<16;v+=_){const T=t[Math.floor(Math.random()*t.length)],E=Math.random()>.6?5:4;Math.random()>.7&&m.push({time:`0:0:${Math.floor(v)}`,duration:"16n"}),d.push({time:`0:0:${Math.floor(v)}`,note:T+E,velocity:Math.random()*.5+.5})}this.part=new Go((v,T)=>{var E;(E=this.arpSynth)==null||E.triggerAttackRelease(T.note,"16n",v,T.velocity)},d).start(0),this.part.loop=!0,this.part.loopEnd="1m",this.noisePart=new Go((v,T)=>{var E;(E=this.noiseSynth)==null||E.triggerAttackRelease(T.duration,v)},m).start(0),this.noisePart.loop=!0,this.noisePart.loopEnd="1m",this.padLoop.start(0),Kr.start()}stop(){var e,t,s,a,l,c;Kr.stop(),Kr.cancel(),(e=this.padLoop)==null||e.dispose(),(t=this.part)==null||t.dispose(),(s=this.bassPart)==null||s.dispose(),(a=this.noisePart)==null||a.dispose(),(l=this.padSynth)==null||l.releaseAll(),(c=this.arpSynth)==null||c.releaseAll()}isPlaying(){return Kr.state==="started"}getMusicalContext(e){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];let s="C",a=!0;if(e){const _=e.split(" ");_.length>0&&(s=_[0].replace("","b").replace("","#")),e.toLowerCase().includes("major")&&(a=!1)}const l=t.indexOf(s)>-1?t.indexOf(s):0,d=(a?[0,2,3,5,7,8,10]:[0,2,4,5,7,9,11]).map(_=>t[(l+_)%12]),m=_=>{const v=d[_%7],T=d[(_+2)%7],E=d[(_+4)%7];return[v+"3",T+"3",E+"3"]},h=[m(0),m(5),m(3),m(4)];return{scale:d,root:s,chordProgression:h}}}const Bl=new X2,W2=({isActive:i,isGenerating:e=!1,color:t="#FF4D00"})=>{const s=Pt.useRef(null),a=Pt.useRef(null),l=Pt.useRef(0);return Pt.useEffect(()=>(a.current||(a.current=new Sh("waveform",256),J2.connect(a.current)),()=>{l.current&&cancelAnimationFrame(l.current)}),[]),Pt.useEffect(()=>{const c=s.current;if(!c)return;const d=c.getContext("2d");if(!d)return;const m=()=>{var v;if(!i&&!e){d.clearRect(0,0,c.width,c.height);return}if(d.fillStyle="#121212",d.fillRect(0,0,c.width,c.height),e)_(d,c);else if(i){const T=(v=a.current)==null?void 0:v.getValue();T&&h(d,c,T,t)}l.current=requestAnimationFrame(m)},h=(v,T,E,C)=>{v.beginPath(),v.lineWidth=2,v.strokeStyle=C;const N=T.width/E.length;let M=0;for(let x=0;x<E.length;x++){const k=(E[x]+1)/2*T.height;x===0?v.moveTo(M,k):v.lineTo(M,k),M+=N}v.stroke()},_=(v,T)=>{const E=Date.now()*.001,C=T.height/2,N=30;v.strokeStyle="#8B5CF6",v.lineWidth=3,v.globalAlpha=.8;for(let M=0;M<3;M++){v.beginPath();for(let x=0;x<T.width;x+=2){const q=.02+M*.01,k=M*Math.PI/3,F=C+Math.sin(x*q+E*2+k)*(N-M*8);x===0?v.moveTo(x,F):v.lineTo(x,F)}v.stroke(),v.globalAlpha*=.6}v.globalAlpha=1};return i||e?m():(l.current&&cancelAnimationFrame(l.current),d.clearRect(0,0,c.width,c.height)),()=>{l.current&&cancelAnimationFrame(l.current)}},[i,e,t]),j.jsx("canvas",{ref:s,className:"w-full h-32 rounded bg-arch-black border border-arch-gray/50",width:600,height:128})},Q2=({data:i})=>{var e;return j.jsxs("div",{className:"space-y-6 font-mono text-sm overflow-y-auto h-full pr-2",children:[j.jsxs("div",{className:"space-y-3",children:[j.jsxs("h3",{className:"flex items-center gap-2 text-arch-accent uppercase tracking-widest text-xs font-bold border-b border-arch-gray/30 pb-2",children:[j.jsx(yC,{className:"w-4 h-4"}),"Visual Discovery"]}),j.jsxs("p",{className:"text-arch-light italic leading-relaxed text-sm opacity-90",children:['"',i.architecturalDescription,'"']}),j.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(e=i.detectedFeatures)==null?void 0:e.map((t,s)=>j.jsx("span",{className:"px-2 py-1 bg-arch-gray/30 text-xs rounded-sm text-arch-light border border-arch-gray/50",children:t},s))})]}),j.jsxs("div",{className:"space-y-3 mt-6",children:[j.jsxs("h3",{className:"flex items-center gap-2 text-arch-accent uppercase tracking-widest text-xs font-bold border-b border-arch-gray/30 pb-2",children:[j.jsx(pC,{className:"w-4 h-4"}),"Sonic Translation"]}),j.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[j.jsxs("div",{className:"bg-arch-black p-3 rounded border border-arch-gray/30",children:[j.jsx("span",{className:"block text-xs text-arch-gray mb-1",children:"Generated Key"}),j.jsx("span",{className:"text-lg text-white font-bold",children:i.suggestedKey})]}),j.jsxs("div",{className:"bg-arch-black p-3 rounded border border-arch-gray/30",children:[j.jsx("span",{className:"block text-xs text-arch-gray mb-1",children:"Tempo (BPM)"}),j.jsx("span",{className:"text-lg text-white font-bold",children:i.tempo})]}),j.jsxs("div",{className:"col-span-2 bg-arch-black p-3 rounded border border-arch-gray/30 flex justify-between items-center",children:[j.jsxs("div",{children:[j.jsx("span",{className:"block text-xs text-arch-gray mb-1",children:"Genre Style"}),j.jsx("span",{className:"text-md text-arch-light font-bold",children:i.genre})]}),j.jsx(rC,{className:"w-5 h-5 text-arch-gray animate-spin-slow"})]})]})]}),j.jsxs("div",{className:"space-y-4 mt-6",children:[j.jsxs("h3",{className:"flex items-center gap-2 text-arch-accent uppercase tracking-widest text-xs font-bold border-b border-arch-gray/30 pb-2",children:[j.jsx(I_,{className:"w-4 h-4"}),"Parameter Mapping"]}),j.jsx(rd,{icon:j.jsx($E,{className:"w-3 h-3"}),label:"Volume (Reverb)",value:i.volume}),j.jsx(rd,{icon:j.jsx(cC,{className:"w-3 h-3"}),label:"Brightness (Timbre)",value:i.brightness}),j.jsx(rd,{icon:j.jsx(I_,{className:"w-3 h-3"}),label:"Complexity (Arp)",value:i.complexity})]}),j.jsxs("div",{className:"text-xs text-arch-gray pt-4 border-t border-arch-gray/30",children:["Materials detected: ",j.jsx("span",{className:"text-arch-light",children:i.materials})]})]})},rd=({label:i,value:e,icon:t})=>j.jsxs("div",{className:"group",children:[j.jsxs("div",{className:"flex justify-between mb-1 items-center",children:[j.jsxs("div",{className:"flex items-center gap-2 text-xs text-arch-gray group-hover:text-arch-light transition-colors",children:[t," ",i]}),j.jsxs("span",{className:"text-xs text-arch-accent font-bold",children:[(e*100).toFixed(0),"%"]})]}),j.jsx("div",{className:"w-full bg-arch-black h-1.5 rounded-full overflow-hidden border border-arch-gray/20",children:j.jsx("div",{className:"bg-arch-light h-full transition-all duration-1000 ease-out relative",style:{width:`${e*100}%`},children:j.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-[1px] bg-white shadow-[0_0_4px_2px_rgba(255,255,255,0.5)]"})})})]});function Z2(){const[i,e]=Pt.useState(at.IDLE),[t,s]=Pt.useState(null),[a,l]=Pt.useState(null),[c,d]=Pt.useState(!0),m=Pt.useRef(null),h=async T=>{var N;const E=(N=T.target.files)==null?void 0:N[0];if(!E)return;e(at.ANALYZING),s(null),d(!1),Bl.stop();const C=new FileReader;C.onload=async M=>{var q;const x=(q=M.target)==null?void 0:q.result;l(x);try{const k=x.split(",")[1],F=await eR(k,E.type);s(F),e(at.READY)}catch(k){console.error(k),e(at.ERROR)}},C.readAsDataURL(E)},_=async()=>{t&&(await Bl.initialize(),Bl.generateScore(t),e(at.PLAYING))},v=()=>{Bl.stop(),e(at.READY)};return j.jsxs("div",{className:"min-h-screen bg-arch-black text-arch-light font-sans selection:bg-arch-accent selection:text-white p-4 md:p-8 flex flex-col",children:[j.jsxs("header",{className:"max-w-7xl mx-auto w-full mb-8 flex justify-between items-end border-b border-arch-gray pb-4",children:[j.jsxs("div",{children:[j.jsxs("h1",{className:"text-4xl md:text-6xl font-mono font-bold tracking-tighter text-white",children:["SONIC",j.jsx("span",{className:"text-arch-accent",children:"."}),"ARCH"]}),j.jsx("p",{className:"text-arch-gray mt-2 font-mono text-sm max-w-md",children:"Algorithmic architectural sonification."})]}),j.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 text-xs font-mono text-arch-accent hover:text-white transition-colors",children:[c?"HIDE SYSTEM INFO":"HOW IT WORKS",c?j.jsx(nC,{className:"w-4 h-4"}):j.jsx(eC,{className:"w-4 h-4"})]})]}),c&&j.jsx("section",{className:"max-w-7xl mx-auto w-full mb-8 bg-arch-dark/40 border border-arch-gray/30 rounded-lg p-6 animate-in slide-in-from-top-4 duration-500",children:j.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[j.jsxs("div",{className:"flex flex-col items-start gap-3",children:[j.jsx("div",{className:"bg-arch-gray/20 p-3 rounded-full",children:j.jsx(lC,{className:"w-6 h-6 text-arch-accent"})}),j.jsx("h3",{className:"font-mono font-bold text-white",children:"1. Visual Analysis"}),j.jsx("p",{className:"text-sm text-arch-gray leading-relaxed",children:"Gemini Vision AI scans your floorplan or photo, identifying physical volume, materials (wood, concrete), light levels, and structural complexity."})]}),j.jsxs("div",{className:"flex flex-col items-start gap-3 relative",children:[j.jsx("div",{className:"hidden md:block absolute -left-4 top-6 text-arch-gray/20",children:j.jsx(k_,{className:"w-8 h-8"})}),j.jsx("div",{className:"bg-arch-gray/20 p-3 rounded-full",children:j.jsx(sC,{className:"w-6 h-6 text-arch-accent"})}),j.jsx("h3",{className:"font-mono font-bold text-white",children:"2. Parameter Mapping"}),j.jsx("p",{className:"text-sm text-arch-gray leading-relaxed",children:"Visual data is mapped to acoustic properties: Room size defines reverb decay, brightness controls timbre filters, and complexity drives rhythm density."})]}),j.jsxs("div",{className:"flex flex-col items-start gap-3 relative",children:[j.jsx("div",{className:"hidden md:block absolute -left-4 top-6 text-arch-gray/20",children:j.jsx(k_,{className:"w-8 h-8"})}),j.jsx("div",{className:"bg-arch-gray/20 p-3 rounded-full",children:j.jsx(TC,{className:"w-6 h-6 text-arch-accent"})}),j.jsx("h3",{className:"font-mono font-bold text-white",children:"3. Generative Composition"}),j.jsx("p",{className:"text-sm text-arch-gray leading-relaxed",children:"The audio engine composes a unique score in real-time, harmonizing a generated musical key and scale that matches the mood of the space."})]})]})}),j.jsxs("main",{className:"max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-2 gap-8 flex-grow",children:[j.jsxs("div",{className:"space-y-6 flex flex-col",children:[j.jsxs("div",{className:`
              relative flex-grow min-h-[300px] rounded-lg border-2 border-dashed 
              flex flex-col items-center justify-center transition-all overflow-hidden group
              ${i===at.ANALYZING?"border-arch-accent/50 bg-arch-dark":"border-arch-gray hover:border-arch-light hover:bg-arch-dark/50 cursor-pointer"}
            `,onClick:()=>{var T;return i!==at.ANALYZING&&((T=m.current)==null?void 0:T.click())},children:[a?j.jsx("img",{src:a,alt:"Architectural Input",className:`w-full h-full object-contain p-4 transition-all duration-700 ${i===at.ANALYZING?"opacity-20 blur-sm scale-95":"scale-100"}`}):j.jsxs("div",{className:"text-center p-6 transition-transform duration-300 group-hover:scale-105",children:[j.jsx(AC,{className:"w-12 h-12 mx-auto mb-4 text-arch-gray"}),j.jsx("h3",{className:"text-lg font-mono text-white",children:"Input Architecture"}),j.jsx("p",{className:"text-sm text-arch-gray mt-2",children:"Drop Floorplan, Sketch, or Interior Photo"})]}),i===at.ANALYZING&&j.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[j.jsxs("div",{className:"relative",children:[j.jsx(dC,{className:"w-12 h-12 text-arch-accent animate-spin"}),j.jsx("div",{className:"absolute inset-0 w-12 h-12 border-t-2 border-white rounded-full animate-ping opacity-20"})]}),j.jsx("span",{className:"font-mono text-sm text-arch-accent animate-pulse mt-4",children:"ANALYZING GEOMETRY & LIGHT..."})]}),j.jsx("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:h})]}),j.jsxs("div",{className:"border border-arch-gray rounded-lg p-4 bg-arch-dark shadow-2xl",children:[j.jsxs("div",{className:"flex justify-between items-center mb-4",children:[j.jsxs("span",{className:"font-mono text-xs text-arch-gray uppercase flex items-center gap-2",children:[j.jsx(K2,{isActive:i===at.PLAYING}),"Real-time Audio Output"]}),i===at.PLAYING&&j.jsxs("div",{className:"flex gap-1",children:[j.jsx("div",{className:"w-1 h-3 bg-arch-accent animate-pulse",style:{animationDelay:"0ms"}}),j.jsx("div",{className:"w-1 h-3 bg-arch-accent animate-pulse",style:{animationDelay:"100ms"}}),j.jsx("div",{className:"w-1 h-3 bg-arch-accent animate-pulse",style:{animationDelay:"200ms"}})]})]}),j.jsx(W2,{isActive:i===at.PLAYING})]})]}),j.jsxs("div",{className:"flex flex-col h-full space-y-6",children:[j.jsxs("div",{className:"flex gap-4",children:[j.jsxs("button",{disabled:i===at.IDLE||i===at.ANALYZING||i===at.PLAYING,onClick:_,className:`
                flex-1 py-4 flex items-center justify-center gap-2 font-mono font-bold tracking-widest uppercase transition-all shadow-lg hover:shadow-arch-accent/20
                ${i===at.PLAYING?"bg-arch-dark text-arch-gray cursor-not-allowed border border-arch-gray":i===at.READY?"bg-arch-accent text-black hover:bg-white hover:scale-[1.02] transform":"bg-arch-gray/20 text-arch-gray cursor-not-allowed border border-arch-gray/20"}
              `,children:[j.jsx(gC,{className:"w-5 h-5 fill-current"}),i===at.PLAYING?"Playing Soundscape":"Generate Soundscape"]}),j.jsx("button",{disabled:i!==at.PLAYING,onClick:v,className:`
                px-8 flex items-center justify-center transition-all border border-arch-gray
                ${i===at.PLAYING?"bg-white text-black hover:bg-gray-200 shadow-[0_0_15px_rgba(255,255,255,0.3)]":"bg-transparent text-arch-gray opacity-50 cursor-not-allowed"}
              `,children:j.jsx(EC,{className:"w-5 h-5 fill-current"})})]}),j.jsxs("div",{className:"flex-grow bg-arch-dark/30 border border-arch-gray/20 rounded-lg p-6 relative overflow-hidden backdrop-blur-sm",children:[j.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),t?j.jsx(Q2,{data:t}):j.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-arch-gray font-mono opacity-50 space-y-4",children:[j.jsx("div",{className:"w-16 h-16 border-2 border-arch-gray/50 rounded-full flex items-center justify-center border-dashed animate-spin-slow",children:j.jsx("div",{className:"w-2 h-2 bg-arch-gray rounded-full"})}),j.jsx("span",{className:"text-sm",children:"AWAITING ARCHITECTURAL INPUT"})]})]})]})]}),j.jsxs("div",{className:"max-w-7xl mx-auto w-full text-xs font-mono text-arch-gray/50 border-t border-arch-gray/20 pt-4 flex justify-between mt-8",children:[j.jsx("span",{children:"POWERED BY GOOGLE GEMINI 2.5 & TONE.JS"}),j.jsx("span",{children:"LATENCY: 12ms // BUFFER: 256"})]})]})}const K2=({isActive:i})=>j.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-arch-accent animate-pulse shadow-[0_0_8px_#FF4D00]":"bg-arch-gray"}`}),d0=document.getElementById("root");if(!d0)throw new Error("Could not find root element to mount to");const $2=BE.createRoot(d0);$2.render(j.jsx(OE.StrictMode,{children:j.jsx(Z2,{})}));
